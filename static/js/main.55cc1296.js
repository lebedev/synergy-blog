/*! For license information please see main.55cc1296.js.LICENSE.txt */
(()=>{var e={730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),I=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case I:return"Portal";case x:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ee=null,Se=null;function xe(e){if(e=wi(e)){if("function"!==typeof Ie)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ie(e.stateNode,e.type,t))}}function Te(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function ke(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Se)&&(Ne(),ke())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return He(i),e;if(o===r)return He(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,It,Et,St,xt,Tt=!1,kt=[],Ct=null,Nt=null,At=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&It(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void xt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&It(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(Vt),Rt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<kt.length){zt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Gt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=F({},cn,{view:0,detail:0}),hn=sn(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},dn,{relatedTarget:0})),vn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return Sn}var Tn=F({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(Tn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Sr={};function xr(e){if(Er[e])return Er[e];if(!Ir[e])return e;var t,n=Ir[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);var Tr=xr("animationend"),kr=xr("animationiteration"),Cr=xr("animationstart"),Nr=xr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Ar.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(kr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Kt;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Tr:case kr:case Cr:l=vn;break;case Nr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&u.push(Kr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==d&&Qr(o,d,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Hn(a))if($n)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(v=Wr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Re(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Kr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Kr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ii=[],Ei=-1;function Si(e){return{current:e}}function xi(e){0>Ei||(e.current=Ii[Ei],Ii[Ei]=null,Ei--)}function Ti(e,t){Ei++,Ii[Ei]=e.current,e.current=t}var ki={},Ci=Si(ki),Ni=Si(!1),Ai=ki;function Pi(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){xi(Ni),xi(Ci)}function Oi(e,t,n){if(Ci.current!==ki)throw Error(s(168));Ti(Ci,t),Ti(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ai=Ci.current,Ti(Ci,e),Ti(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,xi(Ni),xi(Ci),Ti(Ci,e)):xi(Ni),Ti(Ni,n)}var Ui=null,Vi=!1,ji=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{wt=t,ji=!1}}return null}var qi=[],Hi=0,Ki=null,Wi=0,Gi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){qi[Hi++]=Wi,qi[Hi++]=Ki,Ki=e,Wi=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Ji=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Hi],qi[Hi]=null,Wi=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case I:return(t=Uc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case I:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),is&&Xi(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Xi(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,c);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===d?u=w:d.sibling=w,d=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ys(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Oc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case I:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),_s=ws(!1),Is=Si(null),Es=null,Ss=null,xs=null;function Ts(){xs=Ss=Es=null}function ks(e){var t=Is.current;xi(Is),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){Es=e,xs=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(xs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===Es)throw Error(s(308));Ss=e,Es.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ps=null;function Rs(e){null===Ps?Ps=[e]:Ps.push(e)}function Ds(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function js(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=F({},d,h);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=d}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ks=Si(Hs),Ws=Si(Hs),Gs=Si(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Ti(Gs,t),Ti(Ws,e),Ti(Ks,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Ks),Ti(Ks,t)}function Js(){xi(Ks),xi(Ws),xi(Gs)}function $s(e){Qs(Gs.current);var t=Qs(Ks.current),n=le(t,e.type);t!==n&&(Ti(Ws,e),Ti(Ks,n))}function Xs(e){Ws.current===e&&(xi(Ks),xi(Ws))}var Zs=Si(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((so&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,oo.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function So(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Mo(ko.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,To.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&so)||xo(n,t,i)}return i}function xo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&No(e)}function ko(e,t,n){return n((function(){Co(t)&&No(e)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function Ao(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return wo().memoizedState}function Do(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}oo.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function Uo(e,t){return Oo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function jo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Vo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ko(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Wo(){return wo().memoizedState}function Go(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Jo(t,n);else if(null!==(n=Ds(e,t,n,r))){nc(n,e,r,ec()),$o(n,t,r)}}function Qo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Jo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ds(e,t,i,r))&&(nc(n,e,r,i=ec()),$o(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xo={readContext:As,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:As,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ao,useDebugValue:zo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=Ko.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&so)||xo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(ko.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Nl.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:As,useCallback:Bo,useContext:As,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:_o,useRef:Ro,useState:function(){return _o(bo)},useDebugValue:zo,useDeferredValue:function(e){return Ho(wo(),ao.memoizedState,e)},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:So,useId:Wo,unstable_isNewReconciler:!1},ta={readContext:As,useCallback:Bo,useContext:As,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:Io,useRef:Ro,useState:function(){return Io(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:Ho(t,ao.memoizedState,e)},useTransition:function(){return[Io(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:So,useId:Wo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nc(t,e,i,r),js(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nc(t,e,i,r),js(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(nc(t,e,r,n),js(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Ri(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Ri(t)?Ai:Ci.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),da(0,t)},n}function pa(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=go(e,t,n,r,s,i),n=vo(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ta(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Dl,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Dl,Rl),Rl|=r;return ba(e,t,i,n),t.child}function xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Ri(n)?Ai:Ci.current;return s=Pi(t,s),Ns(t,i),n=go(e,t,n,r,s,i),r=vo(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function ka(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(Ns(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Pi(t,c=Ri(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var h=t.memoizedState;o.state=h,Bs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ni.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Pi(t,l=Ri(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,o,r,l),Ls=!1,h=t.memoizedState,o.state=h,Bs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ni.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ca(e,t,n,r,s,i)}function Ca(e,t,n,r,i,s){xa(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ha(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Ys(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Pa,Ra,Da,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Os(e,i),nc(r,e,i,-1))}return mc(),Va(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ja(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ja(e,n,t);else if(19===e.tag)ja(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Ri(t.type)&&Di(),Wa(t),null;case 3:return r=t.stateNode,Js(),xi(Ni),xi(Ci),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ra(e,t),Wa(t),null;case 5:Xs(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Wa(t),null}if(e=Qs(Ks.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":J(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Ks.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wa(t),null;case 13:if(xi(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Js(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Wa(t),null;case 10:return ks(t.type._context),Wa(t),null;case 19:if(xi(Zs),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Bl&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Wa(t),null}else 2*$e()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=Zs.current,Ti(Zs,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),xi(Ni),xi(Ci),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(xi(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(Zs),null;case 4:return Js(),null;case 10:return ks(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ks.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,$a="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||Za(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ja&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,hl(e,t,n),Ja=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):w(i,d,h,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=$e())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||d,ml(t,e),Ja=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_l(h);continue}}null!==p?(p.return=f,Xa=p):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xa=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Ya;var c=Ja;if(Ya=o,(Ja=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,Xa=l):Il(i);for(;null!==s;)Xa=s,wl(s,t,n),s=s.sibling;Xa=i,Ya=a,Ja=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):bl(e)}}function bl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&il(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function _l(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Il(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Sc(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var El,Sl=Math.ceil,xl=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,kl=b.ReactCurrentBatchConfig,Cl=0,Nl=null,Al=null,Pl=0,Rl=0,Dl=Si(0),Ol=0,Ll=null,Ml=0,Fl=0,Ul=0,Vl=null,jl=null,zl=0,Bl=1/0,ql=null,Hl=!1,Kl=null,Wl=null,Gl=!1,Ql=null,Yl=0,Jl=0,$l=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Cl)?$e():-1!==Xl?Xl:Xl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,$l=null,Error(s(185));vt(e,n,r),0!==(2&Cl)&&e===Nl||(e===Nl&&(0===(2&Cl)&&(Fl|=n),4===Ol&&ac(e,Pl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Bl=$e()+500,Vi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Nl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi((function(){0===(6&Cl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=ht(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var o=pc();for(Nl===e&&Pl===t||(ql=null,Bl=$e()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Ts(),xl.current=o,Cl=i,null!==Al?t=0:(Nl=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,hc(e,0),ac(e,r),rc(e,$e()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ll,hc(e,0),ac(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,jl,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,jl,ql),t);break}_c(e,jl,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,jl,ql),r);break}_c(e,jl,ql);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=jl,jl=n,null!==t&&oc(t)),e}function oc(e){null===jl?jl=e:jl.push.apply(jl,e)}function ac(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));Ic();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,hc(e,0),ac(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,jl,ql),rc(e,$e()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Bl=$e()+500,Vi&&Bi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Cl)&&Ic();var t=Cl;Cl|=1;var n=kl.transition,r=wt;try{if(kl.transition=null,wt=1,e)return e()}finally{wt=r,kl.transition=n,0===(6&(Cl=t))&&Bi()}}function dc(){Rl=Dl.current,xi(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Js(),xi(Ni),xi(Ci),no();break;case 5:Xs(r);break;case 4:Js();break;case 13:case 19:xi(Zs);break;case 10:ks(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Al=e=Dc(e.current,null),Pl=Rl=t,Ol=0,Ll=null,Ul=Fl=Ml=0,jl=Vl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ps=null}return e}function fc(e,t){for(;;){var n=Al;try{if(Ts(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Tl.current=null,null===n||null===n.return){Ol=1,Ll=t,Al=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Ol&&(Ol=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wl||!Wl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=xl.current;return xl.current=Xo,null===e?Xo:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Nl||0===(268435455&Ml)&&0===(268435455&Fl)||ac(Nl,Pl)}function gc(e,t){var n=Cl;Cl|=2;var r=pc();for(Nl===e&&Pl===t||(ql=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(Ts(),Cl=n,xl.current=r,null!==Al)throw Error(s(261));return Nl=null,Pl=0,Ol}function vc(){for(;null!==Al;)wc(Al)}function yc(){for(;null!==Al&&!Ye();)wc(Al)}function wc(e){var t=El(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,Tl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ol=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ol&&(Ol=5)}function _c(e,t,n){var r=wt,i=kl.transition;try{kl.transition=null,wt=1,function(e,t,n,r){do{Ic()}while(null!==Ql);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Al=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Nc(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=kl.transition,kl.transition=null;var a=wt;wt=1;var l=Cl;Cl|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),Cl=l,wt=a,kl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===$l?Jl++:(Jl=0,$l=e):Jl=0,Bi()}(e,t,n,r)}finally{kl.transition=i,wt=r}return null}function Ic(){if(null!==Ql){var e=bt(Yl),t=kl.transition,n=wt;try{if(kl.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Cl))throw Error(s(331));var i=Cl;for(Cl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var f=(d=Xa).sibling,p=d.return;if(sl(d),d===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Xa=y;break e}Xa=o.return}}var w=e.current;for(Xa=w;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=w;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(I){Sc(l,l.return,I)}if(l===a){Xa=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Xa=_;break e}Xa=l.return}}if(Cl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(I){}r=!0}return r}finally{wt=n,kl.transition=t}}return!1}function Ec(e,t,n){e=Vs(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Vs(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>$e()-zl?hc(e,0):Ul|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Os(e,t))&&(vt(e,t,n),rc(e,n))}function kc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ac(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Lc(n.children,i,o,t);case S:a=8,i|=8;break;case x:return(e=Pc(12,n,t,2|i)).elementType=x,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case k:a=9;break e;case C:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zc(e){if(!e)return ki;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=jc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=Us(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,o))&&(nc(e,i,o,s),js(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:$s(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Is,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ti(Zs,1&Zs.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ti(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ha(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ns(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ca(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),xa(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(Is,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Us(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Cs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Cs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=As(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ia(e,t,r,i=na(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ns(t,n),oa(t,r,i),la(t,r,i,n),Ca(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,$e()),0===(6&Cl)&&(Bl=$e()+500,Bi()))}break;case 13:uc((function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},It=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},St=function(){return wt},xt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ie=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[wi,bi,_i,Te,ke,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,I=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)I.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,D(I);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function I(e,n){m=!1,g&&(g=!1,y(T),T=-1),p=!0;var s=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(_,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,x=null,T=-1,k=5,C=-1;function N(){return!(t.unstable_now()-C<k)}function A(){if(null!==x){var e=t.unstable_now();C=e;var n=!0;try{n=x(!0,e)}finally{n?E():(S=!1,x=null)}}else S=!1}if("function"===typeof w)E=function(){w(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,E=function(){R.postMessage(null)}}else E=function(){v(A,0)};function D(e){x=e,S||(S=!0,E())}function O(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(I))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(T),T=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(I))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},956:(e,t,n)=>{"use strict";var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useState,o=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),o((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},39:(e,t,n)=>{"use strict";var r=n(43),i=n(461);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,a=n)}var o,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var f=o(e,d[0],d[1]);return l((function(){h.hasValue=!0,h.value=f}),[f]),u(f),f}},461:(e,t,n)=>{"use strict";e.exports=n(956)},443:(e,t,n)=>{"use strict";e.exports=n(39)},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>S,SDK_VERSION:()=>nt,_DEFAULT_ENTRY_NAME:()=>je,_addComponent:()=>Ke,_addOrOverwriteComponent:()=>We,_apps:()=>Be,_clearComponents:()=>Xe,_components:()=>He,_getProvider:()=>Qe,_isFirebaseApp:()=>Je,_isFirebaseServerApp:()=>$e,_registerComponent:()=>Ge,_removeServiceInstance:()=>Ye,_serverApps:()=>qe,deleteApp:()=>at,getApp:()=>st,getApps:()=>ot,initializeApp:()=>rt,initializeServerApp:()=>it,onLog:()=>ct,registerVersion:()=>lt,setLogLevel:()=>ut});var t=n(43),r=n.t(t,2),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(bI){console.error("base64Decode failed: ",bI)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}const d=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return d()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/synergy-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(bI){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(bI){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(bI))}},f=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function g(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(bI){return!1}}function v(){return"undefined"!==typeof window||y()}function y(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function w(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function b(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function _(){const e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function I(){return!g()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){try{return"object"===typeof indexedDB}catch(bI){return!1}}class S extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.create)}}class x{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(T,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new S(n,s,t)}}const T=/\{\$([^}]+)}/g;function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(N(n)&&N(s)){if(!C(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function N(e){return null!==e&&"object"===typeof e}function A(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function P(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function D(e,t){const n=new O(e,t);return n.subscribe.bind(n)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(bI){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(bI){"undefined"!==typeof console&&console.error&&console.error(bI)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function L(){}function M(e){return e&&e._delegate?e._delegate:e}class F{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const U="[DEFAULT]";class V{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new p;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(bI){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(bI){if(r)return null;throw bI}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:U})}catch(bI){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(bI){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===U?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return this.component?this.component.multipleInstances?e:U:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class j{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new V(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const z=[];var B;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(B||(B={}));const q={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},H=B.INFO,K={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},W=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=K[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class G{constructor(e){this.name=e,this._logLevel=H,this._logHandler=W,this._userLogHandler=null,z.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...t),this._logHandler(this,B.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...t),this._logHandler(this,B.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.INFO,...t),this._logHandler(this,B.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.WARN,...t),this._logHandler(this,B.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,B.ERROR,...t),this._logHandler(this,B.ERROR,...t)}}const Q=(e,t)=>t.some((t=>e instanceof t));let Y,J;const $=new WeakMap,X=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap;let ne={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return X.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Z.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return se(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function re(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(J||(J=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(oe(this),n),se($.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return se(e.apply(oe(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(oe(this),t,...r);return Z.set(s,t.sort?t.sort():[t]),se(s)}}function ie(e){return"function"===typeof e?re(e):(e instanceof IDBTransaction&&function(e){if(X.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));X.set(e,t)}(e),Q(e,Y||(Y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ne):e)}function se(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(se(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&$.set(t,e)})).catch((()=>{})),te.set(t,e),t}(e);if(ee.has(e))return ee.get(e);const t=ie(e);return t!==e&&(ee.set(e,t),te.set(t,e)),t}const oe=e=>te.get(e);const ae=["get","getKey","getAll","getAllKeys","count"],le=["put","add","delete","clear"],ce=new Map;function ue(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ce.get(t))return ce.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=le.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ae.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ce.set(t,s),s}ne=(e=>({...e,get:(t,n,r)=>ue(t,n)||e.get(t,n,r),has:(t,n)=>!!ue(t,n)||e.has(t,n)}))(ne);class de{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const he="@firebase/app",fe="0.10.8",pe=new G("@firebase/app"),me="@firebase/app-compat",ge="@firebase/analytics-compat",ve="@firebase/analytics",ye="@firebase/app-check-compat",we="@firebase/app-check",be="@firebase/auth",_e="@firebase/auth-compat",Ie="@firebase/database",Ee="@firebase/database-compat",Se="@firebase/functions",xe="@firebase/functions-compat",Te="@firebase/installations",ke="@firebase/installations-compat",Ce="@firebase/messaging",Ne="@firebase/messaging-compat",Ae="@firebase/performance",Pe="@firebase/performance-compat",Re="@firebase/remote-config",De="@firebase/remote-config-compat",Oe="@firebase/storage",Le="@firebase/storage-compat",Me="@firebase/firestore",Fe="@firebase/vertexai-preview",Ue="@firebase/firestore-compat",Ve="firebase",je="[DEFAULT]",ze={[he]:"fire-core",[me]:"fire-core-compat",[ve]:"fire-analytics",[ge]:"fire-analytics-compat",[we]:"fire-app-check",[ye]:"fire-app-check-compat",[be]:"fire-auth",[_e]:"fire-auth-compat",[Ie]:"fire-rtdb",[Ee]:"fire-rtdb-compat",[Se]:"fire-fn",[xe]:"fire-fn-compat",[Te]:"fire-iid",[ke]:"fire-iid-compat",[Ce]:"fire-fcm",[Ne]:"fire-fcm-compat",[Ae]:"fire-perf",[Pe]:"fire-perf-compat",[Re]:"fire-rc",[De]:"fire-rc-compat",[Oe]:"fire-gcs",[Le]:"fire-gcs-compat",[Me]:"fire-fst",[Ue]:"fire-fst-compat",[Fe]:"fire-vertex","fire-js":"fire-js",[Ve]:"fire-js-all"},Be=new Map,qe=new Map,He=new Map;function Ke(e,t){try{e.container.addComponent(t)}catch(bI){pe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),bI)}}function We(e,t){e.container.addOrOverwriteComponent(t)}function Ge(e){const t=e.name;if(He.has(t))return pe.debug("There were multiple attempts to register component ".concat(t,".")),!1;He.set(t,e);for(const n of Be.values())Ke(n,e);for(const n of qe.values())Ke(n,e);return!0}function Qe(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ye(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:je;Qe(e,t).clearInstance(n)}function Je(e){return void 0!==e.options}function $e(e){return void 0!==e.settings}function Xe(){He.clear()}const Ze=new x("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class et{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new F("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ze.create("app-deleted",{appName:this._name})}}class tt extends et{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,lt(he,fe,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){at(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ze.create("server-app-deleted")}}const nt="10.12.5";function rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:je,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ze.create("bad-app-name",{appName:String(i)});if(n||(n=f()),!n)throw Ze.create("no-options");const s=Be.get(i);if(s){if(C(n,s.options)&&C(r,s.config))return s;throw Ze.create("duplicate-app",{appName:i})}const o=new j(i);for(const l of He.values())o.addComponent(l);const a=new et(n,r,o);return Be.set(i,a),a}function it(e,t){if(v()&&!y())throw Ze.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Je(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Ze.create("finalization-registry-not-supported",{});const i=""+(e=>[...e].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0))(JSON.stringify(r)),s=qe.get(i);if(s)return s.incRefCount(t.releaseOnDeref),s;const o=new j(i);for(const l of He.values())o.addComponent(l);const a=new tt(n,t,i,o);return qe.set(i,a),a}function st(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;const t=Be.get(e);if(!t&&e===je&&f())return rt();if(!t)throw Ze.create("no-app",{appName:e});return t}function ot(){return Array.from(Be.values())}async function at(e){let t=!1;const n=e.name;if(Be.has(n))t=!0,Be.delete(n);else if(qe.has(n)){e.decRefCount()<=0&&(qe.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function lt(e,t,n){var r;let i=null!==(r=ze[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void pe.warn(e.join(" "))}Ge(new F("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function ct(e,t){if(null!==e&&"function"!==typeof e)throw Ze.create("invalid-log-argument");!function(e,t){for(const n of z){let r=null;t&&t.level&&(r=q[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:B[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function ut(e){var t;t=e,z.forEach((e=>{e.setLogLevel(t)}))}const dt="firebase-heartbeat-database",ht=1,ft="firebase-heartbeat-store";let pt=null;function mt(){return pt||(pt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=se(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(se(o.result),e.oldVersion,e.newVersion,se(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(dt,ht,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ft)}catch(bI){console.warn(bI)}}}).catch((e=>{throw Ze.create("idb-open",{originalErrorMessage:e.message})}))),pt}async function gt(e,t){try{const n=(await mt()).transaction(ft,"readwrite"),r=n.objectStore(ft);await r.put(t,vt(e)),await n.done}catch(bI){if(bI instanceof S)pe.warn(bI.message);else{const t=Ze.create("idb-set",{originalErrorMessage:null===bI||void 0===bI?void 0:bI.message});pe.warn(t.message)}}}function vt(e){return"".concat(e.name,"!").concat(e.options.appId)}class yt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bt(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wt();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=wt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),_t(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_t(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function wt(){return(new Date).toISOString().substring(0,10)}class bt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!E()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await mt()).transaction(ft),n=await t.objectStore(ft).get(vt(e));return await t.done,n}catch(bI){if(bI instanceof S)pe.warn(bI.message);else{const t=Ze.create("idb-get",{originalErrorMessage:null===bI||void 0===bI?void 0:bI.message});pe.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return gt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return gt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function _t(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var It;It="",Ge(new F("platform-logger",(e=>new de(e)),"PRIVATE")),Ge(new F("heartbeat",(e=>new yt(e)),"PRIVATE")),lt(he,fe,It),lt(he,fe,"esm2017"),lt("fire-js","");class Et{constructor(e,t){this._delegate=e,this.firebase=t,Ke(e,new F("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),at(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:je;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:je;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Ke(this._delegate,e)}_addOrOverwriteComponent(e){We(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const St=new x("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const xt=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=rt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(k(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:lt,setLogLevel:ut,onLog:ct,apps:null,SDK_VERSION:nt,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Ge(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw St.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&u(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!k(n,e=e||je))throw St.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Et);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){u(n,e)},createSubscribe:D,ErrorFactory:x,deepExtend:u}),n}(),Tt=new G("@firebase/app-compat");if(v()&&void 0!==window.firebase){Tt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=window.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Tt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const kt=xt;!function(e){lt("@firebase/app-compat","0.2.38",e)}();kt.registerVersion("firebase","10.12.5","app-compat");function Ct(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const Nt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},At="EMAIL_SIGNIN",Pt="PASSWORD_RESET",Rt="RECOVER_EMAIL",Dt="REVERT_SECOND_FACTOR_ADDITION",Ot="VERIFY_AND_CHANGE_EMAIL",Lt="VERIFY_EMAIL";function Mt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ft=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ut=Mt,Vt=new x("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jt=new G("@firebase/auth");function zt(e){if(jt.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];jt.error("Auth (".concat(nt,"): ").concat(e),...n)}}function Bt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Gt(e,...n)}function qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Gt(e,...n)}function Ht(e,t,n){const r=Object.assign(Object.assign({},Ut()),{[t]:n});return new x("auth","Firebase",r).create(t,{appName:e.name})}function Kt(e){return Ht(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Bt(e,"argument-error"),Ht(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Vt.create(e,...n)}function Qt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Gt(t,...r)}}function Yt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zt(t),new Error(t)}function Jt(e,t){e||Yt(t)}function $t(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Xt(){return"http:"===Zt()||"https:"===Zt()}function Zt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class en{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())||b()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Xt()||w()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function tn(e,t){Jt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class nn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},sn=new en(3e4,6e4);function on(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function an(e,t,n,r){return ln(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=A(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),nn.fetch()(un(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function ln(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},rn),t);try{const t=new hn(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw fn(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw fn(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw fn(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw fn(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Ht(e,a,o);Bt(e,a)}}catch(bI){if(bI instanceof S)throw bI;Bt(e,"network-request-failed",{message:String(bI)})}}async function cn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await an(e,t,n,r,i);return"mfaPendingCredential"in s&&Bt(e,"multi-factor-auth-required",{_serverResponse:s}),s}function un(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?tn(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function dn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(qt(this.auth,"network-request-failed"))),sn.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function fn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qt(e,t,r);return i.customData._tokenResponse=n,i}function pn(e){return void 0!==e&&void 0!==e.getResponse}function mn(e){return void 0!==e&&void 0!==e.enterprise}class gn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function vn(e,t){return an(e,"GET","/v2/recaptchaConfig",on(e,t))}async function yn(e,t){return an(e,"POST","/v1/accounts:lookup",t)}function wn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(bI){}}function bn(e){return 1e3*Number(e)}function _n(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return zt("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(zt("Failed to decode base64 JWT payload"),null)}catch(bI){return zt("Caught error parsing JWT payload as JSON",null===bI||void 0===bI?void 0:bI.toString()),null}}function In(e){const t=_n(e);return Qt(t,"internal-error"),Qt("undefined"!==typeof t.exp,"internal-error"),Qt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function En(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(bI){throw bI instanceof S&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(bI)&&e.auth.currentUser===e&&await e.auth.signOut(),bI}}class Sn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(bI){return void((null===bI||void 0===bI?void 0:bI.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class xn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wn(this.lastLoginAt),this.creationTime=wn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await En(e,yn(n,{idToken:r}));Qt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?kn(s.providerUserInfo):[],a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xn(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function kn(e){return e.map((e=>{var{providerId:t}=e,n=Ct(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Cn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qt(e.idToken,"internal-error"),Qt("undefined"!==typeof e.idToken,"internal-error"),Qt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):In(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qt(0!==e.length,"internal-error");const t=In(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Qt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ln(e,{},(async()=>{const n=A({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=un(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",nn.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Cn;return n&&(Qt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Qt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Qt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cn,this.toJSON())}_performRefresh(){return Yt("not implemented")}}function Nn(e,t){Qt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class An{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Ct(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xn(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await En(this,this.stsTokenManager.getToken(this.auth,e));return Qt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=M(e),r=await n.getIdToken(t),i=_n(r);Qt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:wn(bn(i.auth_time)),issuedAtTime:wn(bn(i.iat)),expirationTime:wn(bn(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=M(e);await Tn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Qt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new An(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Qt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Tn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($e(this.auth.app))return Promise.reject(Kt(this.auth));const e=await this.getIdToken();return await En(this,async function(e,t){return an(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;Qt(y&&I,e,"internal-error");const E=Cn.fromJSON(this.name,I);Qt("string"===typeof y,e,"internal-error"),Nn(u,e.name),Nn(d,e.name),Qt("boolean"===typeof w,e,"internal-error"),Qt("boolean"===typeof b,e,"internal-error"),Nn(h,e.name),Nn(f,e.name),Nn(p,e.name),Nn(m,e.name),Nn(g,e.name),Nn(v,e.name);const S=new An({uid:y,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Cn;r.updateFromServerResponse(t);const i=new An({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Tn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Qt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?kn(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Cn;o.updateFromIdToken(n);const a=new An({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new xn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Pn=new Map;function Rn(e){Jt(e instanceof Function,"Expected a class definition");let t=Pn.get(e);return t?(Jt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Pn.set(e,t),t)}class Dn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Dn.type="NONE";const On=Dn;function Ln(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Mn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ln(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ln("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?An._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Mn(Rn(On),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Rn(On);const s=Ln(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=An._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Mn(i,e,n)):new Mn(i,e,n)}}function Fn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Un(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qn(t))return"Blackberry";if(Hn(t))return"Webos";if(Vn(t))return"Safari";if((t.includes("chrome/")||jn(t))&&!t.includes("edge/"))return"Chrome";if(Bn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/firefox\//i.test(e)}function Vn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:m()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/crios\//i.test(e)}function zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/iemobile/i.test(e)}function Bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/android/i.test(e)}function qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/blackberry/i.test(e)}function Hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/webos/i.test(e)}function Kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return Kn(e)||Bn(e)||Hn(e)||qn(e)||/windows phone/i.test(e)||zn(e)}function Gn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Fn(m());break;case"Worker":t="".concat(Fn(m()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nt,"/").concat(r)}class Qn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(bI){r(bI)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(bI){t.reverse();for(const n of t)try{n()}catch(TE){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===bI||void 0===bI?void 0:bI.message})}}}class Yn{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Jn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xn(this),this.idTokenSubscription=new Xn(this),this.beforeStateQueue=new Qn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rn(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Mn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(bI){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await yn(this,{idToken:e}),n=await An._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($e(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(bI){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(bI)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Qt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(bI){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tn(e)}catch(bI){if((null===bI||void 0===bI?void 0:bI.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($e(this.app))return Promise.reject(Kt(this));const t=e?M(e):null;return t&&Qt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Qt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return $e(this.app)?Promise.reject(Kt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $e(this.app)?Promise.reject(Kt(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(Rn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return an(e,"GET","/v2/passwordPolicy",on(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Yn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new x("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return an(e,"POST","/v2/accounts:revokeToken",on(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rn(e)||this._popupRedirectResolver;Qt(t,this,"argument-error"),this.redirectPersistenceManager=await Mn.create(this,[Rn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qt(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(jt.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];jt.warn("Auth (".concat(nt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function $n(e){return M(e)}class Xn{constructor(e){this.auth=e,this.observer=null,this.addObserver=D((e=>this.observer=e))}get next(){return Qt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function er(e){return Zn.loadJS(e)}function tr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class nr{constructor(e){this.type="recaptcha-enterprise",this.auth=$n(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;mn(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{vn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new gn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&mn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Zn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),er(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function rr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new nr(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ir(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await rr(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await rr(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function sr(e,t,n){const r=$n(e);Qt(r._canInitEmulator,r,"emulator-config-failed"),Qt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=or(t),{host:o,port:a}=function(e){const t=or(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ar(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ar(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function or(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ar(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class lr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yt("not implemented")}_getIdTokenResponse(e){return Yt("not implemented")}_linkToIdToken(e,t){return Yt("not implemented")}_getReauthenticationResolver(e){return Yt("not implemented")}}async function cr(e,t){return an(e,"POST","/v1/accounts:resetPassword",on(e,t))}async function ur(e,t){return an(e,"POST","/v1/accounts:signUp",t)}async function dr(e,t){return cn(e,"POST","/v1/accounts:signInWithPassword",on(e,t))}async function hr(e,t){return an(e,"POST","/v1/accounts:sendOobCode",on(e,t))}async function fr(e,t){return hr(e,t)}async function pr(e,t){return hr(e,t)}class mr extends lr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new mr(e,t,"password")}static _fromEmailAndCode(e,t){return new mr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ir(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",dr);case"emailLink":return async function(e,t){return cn(e,"POST","/v1/accounts:signInWithEmailLink",on(e,t))}(e,{email:this._email,oobCode:this._password});default:Bt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ir(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ur);case"emailLink":return async function(e,t){return cn(e,"POST","/v1/accounts:signInWithEmailLink",on(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Bt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function gr(e,t){return cn(e,"POST","/v1/accounts:signInWithIdp",on(e,t))}class vr extends lr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Ct(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new vr(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return gr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,gr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=A(t)}return e}}const yr={USER_NOT_FOUND:"user-not-found"};class wr extends lr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new wr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new wr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return cn(e,"POST","/v1/accounts:signInWithPhoneNumber",on(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await cn(e,"POST","/v1/accounts:signInWithPhoneNumber",on(e,t));if(n.temporaryProof)throw fn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return cn(e,"POST","/v1/accounts:signInWithPhoneNumber",on(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),yr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new wr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class br{constructor(e){var t,n,r,i,s,o;const a=P(R(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Qt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=P(R(e)).link,n=t?P(R(t)).deep_link_id:null,r=P(R(e)).deep_link_id;return(r?P(R(r)).link:null)||r||n||t||e}(e);try{return new br(t)}catch(n){return null}}}class _r{constructor(){this.providerId=_r.PROVIDER_ID}static credential(e,t){return mr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=br.parseLink(t);return Qt(n,"argument-error"),mr._fromEmailAndCode(e,n.code,n.tenantId)}}_r.PROVIDER_ID="password",_r.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_r.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ir{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Er extends Ir{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sr extends Er{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Qt("providerId"in t&&"signInMethod"in t,"argument-error"),vr._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Qt(e.idToken||e.accessToken,"argument-error"),vr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Sr.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Sr.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Sr(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(bI){return null}}}class xr extends Er{constructor(){super("facebook.com")}static credential(e){return vr._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return xr.credential(t.oauthAccessToken)}catch(n){return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com",xr.PROVIDER_ID="facebook.com";class Tr extends Er{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vr._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Tr.credential(n,r)}catch(i){return null}}}Tr.GOOGLE_SIGN_IN_METHOD="google.com",Tr.PROVIDER_ID="google.com";class kr extends Er{constructor(){super("github.com")}static credential(e){return vr._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return kr.credential(t.oauthAccessToken)}catch(n){return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com",kr.PROVIDER_ID="github.com";class Cr extends lr{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return gr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,gr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gr(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Cr(n,i):null}static _create(e,t){return new Cr(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nr extends Ir{constructor(e){Qt(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Nr.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Nr.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Cr.fromJSON(e);return Qt(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Cr._create(r,n)}catch(bI){return null}}}class Ar extends Er{constructor(){super("twitter.com")}static credential(e,t){return vr._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ar.credential(n,r)}catch(i){return null}}}async function Pr(e,t){return cn(e,"POST","/v1/accounts:signUp",on(e,t))}Ar.TWITTER_SIGN_IN_METHOD="twitter.com",Ar.PROVIDER_ID="twitter.com";class Rr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await An._fromIdTokenResponse(e,n,r),s=Dr(n);return new Rr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Dr(n);return new Rr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Dr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Or extends S{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Or.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Or(e,t,n,r)}}function Lr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Or._fromErrorAndOperation(e,n,t,r);throw n}))}function Mr(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Fr(e,t){const n=M(e);await Vr(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return an(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Mr(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ur(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await En(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Rr._forOperation(e,"link",r)}async function Vr(e,t,n){await Tn(t);const r=!1===e?"provider-already-linked":"no-such-provider";Qt(Mr(t.providerData).has(n)===e,t.auth,r)}async function jr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if($e(r.app))return Promise.reject(Kt(r));const i="reauthenticate";try{const s=await En(e,Lr(r,i,t,e),n);Qt(s.idToken,r,"internal-error");const o=_n(s.idToken);Qt(o,r,"internal-error");const{sub:a}=o;return Qt(e.uid===a,r,"user-mismatch"),Rr._forOperation(e,i,s)}catch(bI){throw(null===bI||void 0===bI?void 0:bI.code)==="auth/".concat("user-not-found")&&Bt(r,"user-mismatch"),bI}}async function zr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if($e(e.app))return Promise.reject(Kt(e));const r="signIn",i=await Lr(e,r,t),s=await Rr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Br(e,t){return zr($n(e),t)}async function qr(e,t){const n=M(e);return await Vr(!1,n,t.providerId),Ur(n,t)}async function Hr(e,t){return jr(M(e),t)}async function Kr(e,t){if($e(e.app))return Promise.reject(Kt(e));const n=$n(e),r=await async function(e,t){return cn(e,"POST","/v1/accounts:signInWithCustomToken",on(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Rr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Wr{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Gr._fromServerResponse(e,t):"totpInfo"in t?Qr._fromServerResponse(e,t):Bt(e,"internal-error")}}class Gr extends Wr{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Gr(t)}}class Qr extends Wr{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Qr(t)}}function Yr(e,t,n){var r;Qt((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Qt("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Qt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Qt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Jr(e){const t=$n(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function $r(e,t){await async function(e,t){return an(e,"POST","/v1/accounts:update",on(e,t))}(M(e),{oobCode:t})}async function Xr(e,t){const n=M(e),r=await cr(n,{oobCode:t}),i=r.requestType;switch(Qt(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Qt(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Qt(r.mfaInfo,n,"internal-error");default:Qt(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Wr._fromServerResponse($n(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Zr(e,t){const n={identifier:t,continueUri:Xt()?$t():"http://localhost"},{signinMethods:r}=await async function(e,t){return an(e,"POST","/v1/accounts:createAuthUri",on(e,t))}(M(e),n);return r||[]}async function ei(e,t){const n=M(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Yr(n.auth,r,t);const{email:i}=await async function(e,t){return hr(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function ti(e,t,n){const r=M(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Yr(r.auth,i,n);const{email:s}=await async function(e,t){return hr(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function ni(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=M(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await En(i,async function(e,t){return an(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function ri(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await En(e,async function(e,t){return an(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class ii{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class si extends ii{constructor(e,t,n,r){super(e,t,n),this.username=r}}class oi extends ii{constructor(e,t){super(e,"facebook.com",t)}}class ai extends si{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class li extends ii{constructor(e,t){super(e,"google.com",t)}}class ci extends si{constructor(e,t,n){super(e,"twitter.com",t,n)}}function ui(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=_n(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new ii(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new oi(s,i);case"github.com":return new ai(s,i);case"google.com":return new li(s,i);case"twitter.com":return new ci(s,i,e.screenName||null);case"custom":case"anonymous":return new ii(s,null);default:return new ii(s,r,i)}}(n)}class di{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new di("enroll",e,t)}static _fromMfaPendingCredential(e){return new di("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return di._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return di._fromIdtoken(e.multiFactorSession.idToken)}return null}}class hi{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=$n(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Wr._fromServerResponse(n,e)));Qt(r.mfaPendingCredential,n,"internal-error");const s=di._fromMfaPendingCredential(r.mfaPendingCredential);return new hi(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Rr._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Qt(t.user,n,"internal-error"),Rr._forOperation(t.user,t.operationType,o);default:Bt(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class fi{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Wr._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new fi(e)}async getSession(){return di._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await En(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await En(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},an(r,"POST","/v2/accounts/mfaEnrollment:withdraw",on(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(bI){throw bI}var r,i}}const pi=new WeakMap;const mi="__sak";class gi{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mi,"1"),this.storage.removeItem(mi),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class vi extends gi{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=m();return Vn(e)||Kn(e)}()&&function(){try{return!(!window||window===window.top)}catch(bI){return!1}}(),this.fallbackToPolling=Wn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);_()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vi.type="LOCAL";const yi=vi;class wi extends gi{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wi.type="SESSION";const bi=wi;class _i{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new _i(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}_i.receivers=[];class Ei{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Ii("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Si(){return window}function xi(){return"undefined"!==typeof Si().WorkerGlobalScope&&"function"===typeof Si().importScripts}const Ti="firebaseLocalStorageDb",ki="firebaseLocalStorage",Ci="fbase_key";class Ni{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Ai(e,t){return e.transaction([ki],t?"readwrite":"readonly").objectStore(ki)}function Pi(){const e=indexedDB.open(Ti,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(ki,{keyPath:Ci})}catch(bI){n(bI)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(ki)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ti);return new Ni(e).toPromise()}(),t(await Pi()))}))}))}async function Ri(e,t,n){const r=Ai(e,!0).put({[Ci]:t,value:n});return new Ni(r).toPromise()}function Di(e,t){const n=Ai(e,!0).delete(t);return new Ni(n).toPromise()}class Oi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Pi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(bI){if(t++>3)throw bI;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xi()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_i._getInstance(xi()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ei(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pi();return await Ri(e,mi,"1"),await Di(e,mi),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ri(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Ai(e,!1).get(t),r=await new Ni(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Di(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Ai(e,!1).getAll();return new Ni(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Oi.type="LOCAL";const Li=Oi;const Mi=1e12;class Fi{constructor(e){this.auth=e,this.counter=Mi,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Ui(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Mi;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Mi;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Mi;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Ui{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Qt(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(bI){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(bI){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Vi=tr("rcb"),ji=new en(3e4,6e4);class zi{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Si().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Qt(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&pn(Si().grecaptcha)?Promise.resolve(Si().grecaptcha):new Promise(((n,r)=>{const i=Si().setTimeout((()=>{r(qt(e,"network-request-failed"))}),ji.get());Si()[Vi]=()=>{Si().clearTimeout(i),delete Si()[Vi];const s=Si().grecaptcha;if(!s||!pn(s))return void r(qt(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};er("".concat(Zn.recaptchaV2Script,"?").concat(A({onload:Vi,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(qt(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Si().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bi{async load(e){return new Fi(e)}clearedOneInstance(){}}const qi="recaptcha",Hi={theme:"light",type:"image"};class Ki{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},Hi);this.parameters=n,this.type=qi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$n(e),this.isInvisible="invisible"===this.parameters.size,Qt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Qt(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bi:new zi,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(bI){return Promise.reject(bI)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Qt(!this.parameters.sitekey,this.auth,"argument-error"),Qt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Qt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Si()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Qt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Qt(Xt()&&!xi(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await an(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Qt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Qt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Wi{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=wr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Gi(e,t,n){var r;const i=await n.verify();try{let s;if(Qt("string"===typeof i,e,"argument-error"),Qt(n.type===qi,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Qt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return an(e,"POST","/v2/accounts/mfaEnrollment:start",on(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Qt("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Qt(n,e,"missing-multi-factor-info");const o=await function(e,t){return an(e,"POST","/v2/accounts/mfaSignIn:start",on(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return an(e,"POST","/v1/accounts:sendVerificationCode",on(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Qi{constructor(e){this.providerId=Qi.PROVIDER_ID,this.auth=$n(e)}verifyPhoneNumber(e,t){return Gi(this.auth,e,M(t))}static credential(e,t){return wr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Qi.credentialFromTaggedObject(t)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?wr._fromTokenResponse(n,r):null}}function Yi(e,t){return t?Rn(t):(Qt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Qi.PROVIDER_ID="phone",Qi.PHONE_SIGN_IN_METHOD="phone";class Ji extends lr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $i(e){return zr(e.auth,new Ji(e),e.bypassAuthState)}function Xi(e){const{auth:t,user:n}=e;return Qt(n,t,"internal-error"),jr(n,new Ji(e),e.bypassAuthState)}async function Zi(e){const{auth:t,user:n}=e;return Qt(n,t,"internal-error"),Ur(n,new Ji(e),e.bypassAuthState)}class es{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(bI){this.reject(bI)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(bI){this.reject(bI)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $i;case"linkViaPopup":case"linkViaRedirect":return Zi;case"reauthViaPopup":case"reauthViaRedirect":return Xi;default:Bt(this.auth,"internal-error")}}resolve(e){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ts=new en(2e3,1e4);class ns extends es{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qt(e,this.auth,"internal-error"),e}async onExecution(){Jt(1===this.filter.length,"Popup operations only handle one event");const e=Ii();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(qt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(qt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ts.get())};e()}}ns.currentPopupAction=null;const rs="pendingRedirect",is=new Map;class ss extends es{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=is.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=cs(t),r=ls(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(bI){e=()=>Promise.reject(bI)}is.set(this.auth._key(),e)}return this.bypassAuthState||is.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function os(e,t){return ls(e)._set(cs(t),"true")}function as(e,t){is.set(e._key(),t)}function ls(e){return Rn(e._redirectPersistence)}function cs(e){return Ln(rs,e.config.apiKey,e.name)}function us(e,t,n){return async function(e,t,n){if($e(e.app))return Promise.reject(Kt(e));const r=$n(e);Wt(e,t,Ir),await r._initializationPromise;const i=Yi(r,n);return await os(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function ds(e,t,n){return async function(e,t,n){const r=M(e);if(Wt(r.auth,t,Ir),$e(r.auth.app))return Promise.reject(Kt(r.auth));await r.auth._initializationPromise;const i=Yi(r.auth,n);await os(i,r.auth);const s=await ps(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function hs(e,t,n){return async function(e,t,n){const r=M(e);Wt(r.auth,t,Ir),await r.auth._initializationPromise;const i=Yi(r.auth,n);await Vr(!1,r,t.providerId),await os(i,r.auth);const s=await ps(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function fs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if($e(e.app))return Promise.reject(Kt(e));const r=$n(e),i=Yi(r,t),s=new ss(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function ps(e){const t=Ii("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class ms{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!vs(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(qt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gs(e))}saveEventToCache(e){this.cachedEventUids.add(gs(e)),this.lastProcessedEventTime=Date.now()}}function gs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function vs(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function ys(e){return an(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const ws=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bs=/^https?/;function _s(e){const t=$t(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!bs.test(n))return!1;if(ws.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Is=new en(3e4,6e4);function Es(){const e=Si().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ss(e){return new Promise(((t,n)=>{var r,i,s;function o(){Es(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Es(),n(qt(e,"network-request-failed"))},timeout:Is.get()})}if(null===(i=null===(r=Si().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Si().gapi)||void 0===s?void 0:s.load)){const t=tr("iframefcb");return Si()[t]=()=>{gapi.load?o():n(qt(e,"network-request-failed"))},er("".concat(Zn.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw xs=null,e}))}let xs=null;const Ts=new en(5e3,15e3),ks="__/auth/iframe",Cs="emulator/auth/iframe",Ns={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},As=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ps(e){const t=e.config;Qt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?tn(t,Cs):"https://".concat(e.config.authDomain,"/").concat(ks),r={apiKey:t.apiKey,appName:e.name,v:nt},i=As.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(A(r).slice(1))}async function Rs(e){const t=await function(e){return xs=xs||Ss(e),xs}(e),n=Si().gapi;return Qt(n,e,"internal-error"),t.open({where:document.body,url:Ps(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ns,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=qt(e,"network-request-failed"),s=Si().setTimeout((()=>{r(i)}),Ts.get());function o(){Si().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Ds={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Os{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(bI){}}}function Ls(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ds),{width:r.toString(),height:i.toString(),top:s,left:o}),c=m().toLowerCase();n&&(a=jn(c)?"_blank":n),Un(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Kn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:m())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Os(null);const d=window.open(t||"",a,u);Qt(d,e,"popup-blocked");try{d.focus()}catch(bI){}return new Os(d)}const Ms="__/auth/handler",Fs="emulator/auth/handler",Us=encodeURIComponent("fac");async function Vs(e,t,n,r,i,s){Qt(e.config.authDomain,e,"auth-domain-config-required"),Qt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nt,eventId:i};if(t instanceof Ir){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Er){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Us,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ms);return tn(t,Fs)}(e),"?").concat(A(a).slice(1)).concat(c)}const js="webStorageSupport";const zs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bi,this._completeRedirectFn=fs,this._overrideRedirectResult=as}async _openPopup(e,t,n,r){var i;Jt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ls(e,await Vs(e,t,n,$t(),r),Ii())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Si().location.href=e}(await Vs(e,t,n,$t(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Jt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Rs(e),n=new ms(e);return t.register("authEvent",(t=>{Qt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(js,{type:js},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[js];void 0!==i&&t(!!i),Bt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ys(e);for(const r of t)try{if(_s(r))return}catch(n){}Bt(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Wn()||Vn()||Kn()}};class Bs{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Yt("unexpected MultiFactorSessionType")}}}class qs extends Bs{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new qs(e)}_finalizeEnroll(e,t,n){return function(e,t){return an(e,"POST","/v2/accounts/mfaEnrollment:finalize",on(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return an(e,"POST","/v2/accounts/mfaSignIn:finalize",on(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Hs{constructor(){}static assertion(e){return qs._fromCredential(e)}}Hs.FACTOR_ID="phone";var Ks="@firebase/auth",Ws="1.7.6";class Gs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=h())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Qs;function Ys(){return window}!function(e){Zn=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=qt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Qs="Browser",Ge(new F("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Qt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Qs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gn(Qs)},c=new Jn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ge(new F("auth-internal",(e=>(e=>new Gs(e))($n(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),lt(Ks,Ws,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Qs)),lt(Ks,Ws,"esm2017");async function Js(e,t,n){var r;const{BuildInfo:i}=Ys();Jt(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Jt(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Kn()?o.ibi=i.packageName:Bn()?o.apn=i.packageName:Bt(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Vs(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function $s(e){const{cordova:t}=Ys();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Xs=20;class Zs extends ms{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInitialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function eo(e){const t=await ro()._get(io(e));return t&&await ro()._remove(io(e)),t}function to(e,t){var n,r;const i=function(e){const t=so(e),n=t.link?decodeURIComponent(t.link):void 0,r=so(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return so(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=so(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(bI){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?qt(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function no(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Xs;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function ro(){return Rn(yi)}function io(e){return Ln("authEvent",e.config.apiKey,e.name)}function so(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return P(n.join("?"))}const oo=class{constructor(){this._redirectPersistence=bi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fs,this._overrideRedirectResult=as}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Zs(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){Bt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const d=Ys();Qt("function"===typeof(null===(t=null===d||void 0===d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Qt("undefined"!==typeof(null===(n=null===d||void 0===d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Qt("function"===typeof(null===(s=null===(i=null===(r=null===d||void 0===d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qt("function"===typeof(null===(l=null===(a=null===(o=null===d||void 0===d?void 0:d.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Qt("function"===typeof(null===(u=null===(c=null===d||void 0===d?void 0:d.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),is.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:no(),postBody:null,tenantId:e.tenantId,error:qt(e,"no-auth-event")}}(e,n,r);await function(e,t){return ro()._set(io(e),t)}(e,s);const o=await Js(e,s,t);return async function(e,t,n){const{cordova:r}=Ys();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(qt(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Bn()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await $s(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Ys(),n={};Kn()?n.iosBundleId=t.packageName:Bn()?n.androidPackageName=t.packageName:Bt(e,"operation-not-supported-in-this-environment"),await ys(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Ys(),s=setTimeout((async()=>{await eo(e),t.onEvent(ao())}),500),o=async n=>{clearTimeout(s);const r=await eo(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=to(r,n.url)),t.onEvent(i||ao())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Ys().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(bI){console.error(bI)}}}};function ao(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:qt("no-auth-event")}}function lo(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function co(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return!("file:"!==lo()&&"ionic:"!==lo()&&"capacitor:"!==lo()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function uo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return _()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m();return/Edge\/\d+/.test(e)}(e)}function ho(){try{const e=self.localStorage,t=Ii();if(e)return e.setItem(t,"1"),e.removeItem(t),!uo()||E()}catch(bI){return fo()&&E()}return!1}function fo(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function po(){return("http:"===lo()||"https:"===lo()||w()||co())&&!(b()||g())&&ho()&&!fo()}function mo(){return co()&&"undefined"!==typeof document}const go={LOCAL:"local",NONE:"none",SESSION:"session"},vo=Qt,yo="persistence";async function wo(e){await e._initializationPromise;const t=bo(),n=Ln(yo,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function bo(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(bI){return null}}const _o=Qt;class Io{constructor(){this.browserResolver=Rn(zs),this.cordovaResolver=Rn(oo),this.underlyingResolver=null,this._redirectPersistence=bi,this._completeRedirectFn=fs,this._overrideRedirectResult=as}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return mo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _o(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!mo()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Eo(e){return e.unwrap()}function So(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Co(e,function(e,t){var n;const r=M(e),i=t;return Qt(t.customData.operationType,r,"argument-error"),Qt(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),hi._fromError(r,i)}(e,t))}else if(r){const e=xo(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function xo(e){const{_tokenResponse:t}=e instanceof S?e.customData:e;if(!t)return null;if(!(e instanceof S)&&"temporaryProof"in t&&"phoneNumber"in t)return Qi.credentialFromResult(e);const n=t.providerId;if(!n||n===Nt.PASSWORD)return null;let r;switch(n){case Nt.GOOGLE:r=Tr;break;case Nt.FACEBOOK:r=xr;break;case Nt.GITHUB:r=kr;break;case Nt.TWITTER:r=Ar;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Cr._create(n,o):vr._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Sr(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof S?r.credentialFromError(e):r.credentialFromResult(e)}function To(e,t){return t.catch((t=>{throw t instanceof S&&So(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,xo(r)),additionalUserInfo:ui(e),user:No.getOrCreate(n)};var r}))}async function ko(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>To(e,n.confirm(t))}}class Co{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return To(Eo(this.auth),this.resolver.resolveSignIn(e))}}class No{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=M(e);return pi.has(t)||pi.set(t,fi._fromUser(t)),pi.get(t)}(e)}static getOrCreate(e){return No.USER_MAP.has(e)||No.USER_MAP.set(e,new No(e)),No.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return To(this.auth,qr(this._delegate,e))}async linkWithPhoneNumber(e,t){return ko(this.auth,async function(e,t,n){const r=M(e);await Vr(!1,r,"phone");const i=await Gi(r.auth,t,M(n));return new Wi(i,(e=>qr(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return To(this.auth,async function(e,t,n){const r=M(e);Wt(r.auth,t,Ir);const i=Yi(r.auth,n);return new ns(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Io))}async linkWithRedirect(e){return await wo($n(this.auth)),hs(this._delegate,e,Io)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return To(this.auth,Hr(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return ko(this.auth,async function(e,t,n){const r=M(e);if($e(r.auth.app))return Promise.reject(Kt(r.auth));const i=await Gi(r.auth,t,M(n));return new Wi(i,(e=>Hr(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return To(this.auth,async function(e,t,n){const r=M(e);if($e(r.auth.app))return Promise.reject(qt(r.auth,"operation-not-supported-in-this-environment"));Wt(r.auth,t,Ir);const i=Yi(r.auth,n);return new ns(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Io))}async reauthenticateWithRedirect(e){return await wo($n(this.auth)),ds(this._delegate,e,Io)}sendEmailVerification(e){return ei(this._delegate,e)}async unlink(e){return await Fr(this._delegate,e),this}updateEmail(e){return function(e,t){const n=M(e);return $e(n.auth.app)?Promise.reject(Kt(n.auth)):ri(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return ri(M(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=M(e);if($e(n.auth.app))return Promise.reject(Kt(n.auth));await Ur(n,t)}(this._delegate,e)}updateProfile(e){return ni(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return ti(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}No.USER_MAP=new WeakMap;const Ao=Qt;class Po{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ao(n,"invalid-api-key",{appName:e.name}),Ao(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Io:void 0;this._delegate=t.initialize({options:{persistence:Do(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Ft),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?No.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){sr(this._delegate,e,t)}applyActionCode(e){return $r(this._delegate,e)}checkActionCode(e){return Xr(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await cr(M(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Jr(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return To(this._delegate,async function(e,t,n){if($e(e.app))return Promise.reject(Kt(e));const r=$n(e),i=ir(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pr),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Jr(e),t})),o=await Rr._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Zr(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=br.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Ao(po(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await $n(e)._initializationPromise,fs(e,t,!1)}(this._delegate,Io);return e?To(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){$n(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Ro(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Ro(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=$n(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Qt(t.handleCodeInApp,r,"argument-error"),t&&Yr(r,e,t)}(i,n),await ir(r,i,"getOobCode",pr)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=$n(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Yr(r,i,n),await ir(r,i,"getOobCode",fr)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){vo(Object.values(go).includes(t),e,"invalid-persistence-type"),b()?vo(t!==go.SESSION,e,"unsupported-persistence-type"):g()?vo(t===go.NONE,e,"unsupported-persistence-type"):fo()?vo(t===go.NONE||t===go.LOCAL&&E(),e,"unsupported-persistence-type"):vo(t===go.NONE||ho(),e,"unsupported-persistence-type")}(this._delegate,e),e){case go.SESSION:t=bi;break;case go.LOCAL:t=await Rn(Li)._isAvailable()?Li:yi;break;case go.NONE:t=On;break;default:return Bt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return To(this._delegate,async function(e){var t;if($e(e.app))return Promise.reject(Kt(e));const n=$n(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Rr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Pr(n,{returnSecureToken:!0}),i=await Rr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return To(this._delegate,Br(this._delegate,e))}signInWithCustomToken(e){return To(this._delegate,Kr(this._delegate,e))}signInWithEmailAndPassword(e,t){return To(this._delegate,function(e,t,n){return $e(e.app)?Promise.reject(Kt(e)):Br(M(e),_r.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Jr(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return To(this._delegate,async function(e,t,n){if($e(e.app))return Promise.reject(Kt(e));const r=M(e),i=_r.credentialWithLink(t,n||$t());return Qt(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Br(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return ko(this._delegate,async function(e,t,n){if($e(e.app))return Promise.reject(Kt(e));const r=$n(e),i=await Gi(r,t,M(n));return new Wi(i,(e=>Br(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Ao(po(),this._delegate,"operation-not-supported-in-this-environment"),To(this._delegate,async function(e,t,n){if($e(e.app))return Promise.reject(qt(e,"operation-not-supported-in-this-environment"));const r=$n(e);Wt(e,t,Ir);const i=Yi(r,n);return new ns(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Io))}async signInWithRedirect(e){return Ao(po(),this._delegate,"operation-not-supported-in-this-environment"),await wo(this._delegate),us(this._delegate,e,Io)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Xr(M(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Ro(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&No.getOrCreate(e)),error:t,complete:n}}function Do(e,t){const n=function(e,t){const n=bo();if(!n)return[];const r=Ln(yo,e,t);switch(n.getItem(r)){case go.NONE:return[On];case go.LOCAL:return[Li,bi];case go.SESSION:return[bi];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Li)||n.push(Li),"undefined"!==typeof window)for(const r of[yi,bi])n.includes(r)||n.push(r);return n.includes(On)||n.push(On),n}Po.Persistence=go;class Oo{constructor(){this.providerId="phone",this._delegate=new Qi(Eo(kt.auth()))}static credential(e,t){return Qi.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Oo.PHONE_SIGN_IN_METHOD=Qi.PHONE_SIGN_IN_METHOD,Oo.PROVIDER_ID=Qi.PROVIDER_ID;const Lo=Qt;class Mo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kt.app();var r;Lo(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Ki(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Fo;(Fo=kt).INTERNAL.registerComponent(new F("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Po(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:At,PASSWORD_RESET:Pt,RECOVER_EMAIL:Rt,REVERT_SECOND_FACTOR_ADDITION:Dt,VERIFY_AND_CHANGE_EMAIL:Ot,VERIFY_EMAIL:Lt}},EmailAuthProvider:_r,FacebookAuthProvider:xr,GithubAuthProvider:kr,GoogleAuthProvider:Tr,OAuthProvider:Sr,SAMLAuthProvider:Nr,PhoneAuthProvider:Oo,PhoneMultiFactorGenerator:Hs,RecaptchaVerifier:Mo,TwitterAuthProvider:Ar,Auth:Po,AuthCredential:lr,Error:S}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Fo.registerVersion("@firebase/auth-compat","0.5.11");var Uo,Vo,jo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},zo={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Vo=zo.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Uo=zo.Integer=r}).apply("undefined"!==typeof jo?jo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Bo,qo,Ho,Ko,Wo,Go,Qo,Yo,Jo,$o="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Xo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof $o&&$o];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function I(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var x=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,C=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=x.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(P)}};var P=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){E(n)}var t=x;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,D);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function j(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(j(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),K={};function W(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(j(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):j(e)}}}function $(e){return e in K?K[e]:K[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;_(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)j(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){D.call(this,"d")}function we(){D.call(this,"c")}d(ye,D),d(we,D);var be={},_e=null;function Ie(){return _e=_e||new ne}function Ee(e){D.call(this,be.La,e)}function Se(e){const t=Ie();re(t,new Ee(t))}function xe(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function Te(e){const t=Ie();re(t,new xe(t,e))}function ke(e,t){D.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(jI){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",d(Ee,D),be.STAT_EVENT="statevent",d(xe,D),be.Ma="timingevent",d(ke,D),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Pe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Pe=new Oe;var Fe={},Ue={};function Ve(e,t,n){e.L=1,e.v=dt(ot(t)),e.m=n,e.P=!0,je(e,null)}function je(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function Ke(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||an(e.j,e)}function Ge(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Yt(n)}nn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Ke(a),qe(a)),r.g=o}else tn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=h||7==t||Se(),Ke(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Kt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ge(this),We(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Ue){4==h&&(this.s=4,Te(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Te(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),rn(d),d.M=!0,Te(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),We(this)}else Ae(this.i,this.l,a,null),Qe(this,a);4==h&&Ge(this),this.o&&!this.J&&(4==h?an(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=I(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ge(this),We(this)}}}catch(xE){}},Le.prototype.cancel=function(){this.J=!0,Ge(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),Te(17)),Ge(this),this.s=2,We(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(It(this,t),St(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,yt)),e.i=new bt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:gt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var mt=/[#\/\?@]/g,gt=/[#\?:]/g,vt=/[#\?]/g,yt=/[#\?@]/g,wt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function It(e,t){_t(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return _t(e),t=xt(e,t),e.g.has(t)}function St(e,t,n){It(e,t),0<n.length&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function kt(){this.g=new fe}function Ct(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(bI){throw t.push(r+"type="+encodeURIComponent("_badmap")),bI}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){_t(this),this.i=null,e=xt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(xt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,Et(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(Nt,pe),Nt.prototype.g=function(){return new At(this.l,this.j)},Nt.prototype.i=function(e){return function(){return e}}({}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,jt(e),Bt(e)}function jt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(jI){a=""}e.l=a+" ["+e.Z()+"]",jt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){qt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(bI){}}}function qt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ta){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new kt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Jt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}un(e)}function Yt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Jt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function $t(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||A(),C||(k(),C=!0),N.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function Zt(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Ct(a,e,"req"+n+"_")}catch(xE){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||A(),C||(k(),C=!0),N.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function sn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(ot(t)),n.m=null,n.P=!0,je(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function an(e,t){var n=null;if(e.g==t){on(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ie(),new ke(r,n)),$t(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),un(e),Jt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Nt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function fn(){}function pn(){}function mn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yn(this)}function gn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){we.call(this),this.status=1}function yn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(BI){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(BI){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ot(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||$e(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,sn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Yt(this),sn(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),nn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Qt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&$t(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,mn.aa.N.call(this)},d(gn,ye),d(vn,we),d(yn,fn),yn.prototype.ua=function(){re(this.g,"a")},yn.prototype.ta=function(e){re(this.g,new gn(e))},yn.prototype.sa=function(e){re(this.g,new vn)},yn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Jo=Xo.createWebChannelTransport=function(){return new pn},Yo=Xo.getStatEventTarget=function(){return Ie()},Qo=Xo.Event=be,Go=Xo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Wo=Xo.ErrorCode=Re,De.COMPLETE="complete",Ko=Xo.EventType=De,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ho=Xo.WebChannel=ge,qo=Xo.FetchXmlHttpFactory=Nt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Bo=Xo.XhrIo=Mt}).apply("undefined"!==typeof $o?$o:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Zo="@firebase/firestore";class ea{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ea.UNAUTHENTICATED=new ea(null),ea.GOOGLE_CREDENTIALS=new ea("google-credentials-uid"),ea.FIRST_PARTY=new ea("first-party-uid"),ea.MOCK_USER=new ea("mock-user");let ta="10.12.5";const na=new G("@firebase/firestore");function ra(){return na.logLevel}function ia(e){if(na.logLevel<=B.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(aa);na.debug("Firestore (".concat(ta,"): ").concat(e),...i)}}function sa(e){if(na.logLevel<=B.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(aa);na.error("Firestore (".concat(ta,"): ").concat(e),...i)}}function oa(e){if(na.logLevel<=B.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(aa);na.warn("Firestore (".concat(ta,"): ").concat(e),...i)}}function aa(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function la(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(ta,") INTERNAL ASSERTION FAILED: ")+e;throw sa(t),new Error(t)}function ca(e,t){e||la()}function ua(e,t){return e}const da={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ha extends S{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class fa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class pa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class ma{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ea.UNAUTHENTICATED)))}shutdown(){}}class ga{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class va{constructor(e){this.t=e,this.currentUser=ea.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new fa;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new fa,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{ia("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ia("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new fa)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ia("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ca("string"==typeof t.accessToken),new pa(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ca(null===e||"string"==typeof e),new ea(e)}}class ya{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=ea.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wa{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ya(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(ea.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ba{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _a{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&ia("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,ia("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ia("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ia("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(ca("string"==typeof e.token),this.R=e.token,new ba(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ia(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ea{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ia(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Sa(e,t){return e<t?-1:e>t?1:0}function xa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Ta(e){return e+"\0"}class ka{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ha(da.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ha(da.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ha(da.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ha(da.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ka.fromMillis(Date.now())}static fromDate(e){return ka.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ka(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Sa(this.nanoseconds,e.nanoseconds):Sa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ca{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ca(e)}static min(){return new Ca(new ka(0,0))}static max(){return new Ca(new ka(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Na{constructor(e,t,n){void 0===t?t=0:t>e.length&&la(),void 0===n?n=e.length-t:n>e.length-t&&la(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Na.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Na?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Aa extends Na{construct(e,t,n){return new Aa(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ha(da.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Aa(e)}static emptyPath(){return new Aa([])}}const Pa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ra extends Na{construct(e,t,n){return new Ra(e,t,n)}static isValidIdentifier(e){return Pa.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ra.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ra(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ha(da.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ha(da.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ha(da.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ha(da.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ra(t)}static emptyPath(){return new Ra([])}}class Da{constructor(e){this.path=e}static fromPath(e){return new Da(Aa.fromString(e))}static fromName(e){return new Da(Aa.fromString(e).popFirst(5))}static empty(){return new Da(Aa.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Aa.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Aa.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Da(new Aa(e.slice()))}}class Oa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function La(e){return e.fields.find((e=>2===e.kind))}function Ma(e){return e.fields.filter((e=>2!==e.kind))}Oa.UNKNOWN_ID=-1;class Fa{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ua{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ua(0,za.min())}}function Va(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ca.fromTimestamp(1e9===r?new ka(n+1,0):new ka(n,r));return new za(i,Da.empty(),t)}function ja(e){return new za(e.readTime,e.key,-1)}class za{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new za(Ca.min(),Da.empty(),-1)}static max(){return new za(Ca.max(),Da.empty(),-1)}}function Ba(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Da.comparator(e.documentKey,t.documentKey),0!==n?n:Sa(e.largestBatchId,t.largestBatchId))}const qa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ha{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ka(e){if(e.code!==da.FAILED_PRECONDITION||e.message!==qa)throw e;ia("LocalStore","Unexpectedly lost primary lease")}class Wa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&la(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Wa(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Wa?t:Wa.resolve(t)}catch(e){return Wa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Wa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Wa.reject(t)}static resolve(e){return new Wa(((t,n)=>{t(e)}))}static reject(e){return new Wa(((t,n)=>{n(e)}))}static waitFor(e){return new Wa(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Wa.resolve(!1);for(const n of e)t=t.next((e=>e?Wa.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Wa(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Wa(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Ga{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new fa,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new $a(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=nl(t.target.error);this.V.reject(new $a(e,n))}}static open(e,t,n,r){try{return new Ga(t,e.transaction(r,n))}catch(e){throw new $a(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ia("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Za(t)}}class Qa{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Qa.S(m())&&sa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ia("SimpleDb","Removing database:",e),el(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!E())return!1;if(Qa.C())return!0;const e=m(),t=Qa.S(e),n=0<t&&t<10,r=Ya(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(ia("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new $a(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ha(da.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ha(da.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new $a(e,r))},r.onupgradeneeded=e=>{ia("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{ia("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=Ga.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Wa.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(ia("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Ya(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Ja{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return el(this.B.delete())}}class $a extends ha{constructor(e,t){super(da.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Xa(e){return"IndexedDbTransactionError"===e.name}class Za{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(ia("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ia("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),el(n)}add(e){return ia("SimpleDb","ADD",this.store.name,e,e),el(this.store.add(e))}get(e){return el(this.store.get(e)).next((t=>(void 0===t&&(t=null),ia("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ia("SimpleDb","DELETE",this.store.name,e),el(this.store.delete(e))}count(){return ia("SimpleDb","COUNT",this.store.name),el(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Wa(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Wa(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){ia("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new Wa(((n,r)=>{t.onerror=e=>{const t=nl(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Wa(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Ja(i),o=t(i.primaryKey,i.value,s);if(o instanceof Wa){const e=o.catch((e=>(s.done(),Wa.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>Wa.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function el(e){return new Wa(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=nl(e.target.error);n(t)}}))}let tl=!1;function nl(e){const t=Qa.S(m());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ha("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tl||(tl=!0,setTimeout((()=>{throw e}),0)),e}}return e}class rl{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){ia("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ia("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Xa(e)?ia("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Ka(e)}await this.X(6e4)}))}}class il{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return Wa.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return ia("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(ia("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=ja(t);Ba(r,n)>0&&(n=r)})),new za(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class sl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function ol(e){return null==e}function al(e){return 0===e&&1/e==-1/0}function ll(e){return"number"==typeof e&&Number.isInteger(e)&&!al(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function cl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=dl(t)),t=ul(e.get(n),t);return dl(t)}function ul(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function dl(e){return e+"\x01\x01"}function hl(e){const t=e.length;if(ca(t>=2),2===t)return ca("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Aa.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&la(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:la()}s=t+2}return new Aa(r)}sl.oe=-1;const fl=["userId","batchId"];function pl(e,t){return[e,cl(t)]}function ml(e,t,n){return[e,cl(t),n]}const gl={},vl=["prefixPath","collectionGroup","readTime","documentId"],yl=["prefixPath","collectionGroup","documentId"],wl=["collectionGroup","readTime","prefixPath","documentId"],bl=["canonicalId","targetId"],_l=["targetId","path"],Il=["path","targetId"],El=["collectionId","parent"],Sl=["indexId","uid"],xl=["uid","sequenceNumber"],Tl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kl=["indexId","uid","orderedDocumentKey"],Cl=["userId","collectionPath","documentId"],Nl=["userId","collectionPath","largestBatchId"],Al=["userId","collectionGroup","largestBatchId"],Pl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Rl=[...Pl,"documentOverlays"],Dl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ol=Dl,Ll=[...Ol,"indexConfiguration","indexState","indexEntries"],Ml=Ll,Fl=[...Ll,"globals"];class Ul extends Ha{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Vl(e,t){const n=ua(e);return Qa.F(n._e,t)}function jl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Bl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ql{constructor(e,t){this.comparator=e,this.root=t||Kl.EMPTY}insert(e,t){return new ql(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kl.BLACK,null,null))}remove(e){return new ql(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hl(this.root,e,this.comparator,!0)}}class Hl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Kl.RED,this.left=null!=r?r:Kl.EMPTY,this.right=null!=i?i:Kl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Kl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Kl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Kl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw la();if(this.right.isRed())throw la();const e=this.left.check();if(e!==this.right.check())throw la();return e+(this.isRed()?0:1)}}Kl.EMPTY=null,Kl.RED=!0,Kl.BLACK=!1,Kl.EMPTY=new class{constructor(){this.size=0}get key(){throw la()}get value(){throw la()}get color(){throw la()}get left(){throw la()}get right(){throw la()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Kl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wl{constructor(e){this.comparator=e,this.data=new ql(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gl(this.data.getIterator())}getIteratorFrom(e){return new Gl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Wl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Wl(this.comparator);return t.data=e,t}}class Gl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ql(e){return e.hasNext()?e.getNext():void 0}class Yl{constructor(e){this.fields=e,e.sort(Ra.comparator)}static empty(){return new Yl([])}unionWith(e){let t=new Wl(Ra.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Yl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Jl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $l{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Jl("Invalid base64 string: "+e):e}}(e);return new $l(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new $l(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$l.EMPTY_BYTE_STRING=new $l("");const Xl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zl(e){if(ca(!!e),"string"==typeof e){let t=0;const n=Xl.exec(e);if(ca(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ec(e.seconds),nanos:ec(e.nanos)}}function ec(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function tc(e){return"string"==typeof e?$l.fromBase64String(e):$l.fromUint8Array(e)}function nc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function rc(e){const t=e.mapValue.fields.__previous_value__;return nc(t)?rc(t):t}function ic(e){const t=Zl(e.mapValue.fields.__local_write_time__.timestampValue);return new ka(t.seconds,t.nanos)}class sc{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class oc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new oc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}const ac={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lc={nullValue:"NULL_VALUE"};function cc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nc(e)?4:Ec(e)?9007199254740991:10:la()}function uc(e,t){if(e===t)return!0;const n=cc(e);if(n!==cc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ic(e).isEqual(ic(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Zl(e.timestampValue),r=Zl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return tc(e.bytesValue).isEqual(tc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ec(e.geoPointValue.latitude)===ec(t.geoPointValue.latitude)&&ec(e.geoPointValue.longitude)===ec(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ec(e.integerValue)===ec(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ec(e.doubleValue),r=ec(t.doubleValue);return n===r?al(n)===al(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xa(e.arrayValue.values||[],t.arrayValue.values||[],uc);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jl(n)!==jl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!uc(n[i],r[i])))return!1;return!0}(e,t);default:return la()}}function dc(e,t){return void 0!==(e.values||[]).find((e=>uc(e,t)))}function hc(e,t){if(e===t)return 0;const n=cc(e),r=cc(t);if(n!==r)return Sa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ec(e.integerValue||e.doubleValue),r=ec(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fc(e.timestampValue,t.timestampValue);case 4:return fc(ic(e),ic(t));case 5:return Sa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=tc(e),r=tc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Sa(n[i],r[i]);if(0!==e)return e}return Sa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Sa(ec(e.latitude),ec(t.latitude));return 0!==n?n:Sa(ec(e.longitude),ec(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=hc(n[i],r[i]);if(e)return e}return Sa(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ac.mapValue&&t===ac.mapValue)return 0;if(e===ac.mapValue)return 1;if(t===ac.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Sa(r[o],s[o]);if(0!==e)return e;const t=hc(n[r[o]],i[s[o]]);if(0!==t)return t}return Sa(r.length,s.length)}(e.mapValue,t.mapValue);default:throw la()}}function fc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Sa(e,t);const n=Zl(e),r=Zl(t),i=Sa(n.seconds,r.seconds);return 0!==i?i:Sa(n.nanos,r.nanos)}function pc(e){return mc(e)}function mc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Zl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return tc(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Da.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=mc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(mc(e.fields[i]));return n+"}"}(e.mapValue):la()}function gc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vc(e){return!!e&&"integerValue"in e}function yc(e){return!!e&&"arrayValue"in e}function wc(e){return!!e&&"nullValue"in e}function bc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _c(e){return!!e&&"mapValue"in e}function Ic(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return zl(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Ic(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ic(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ec(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Sc(e){return"nullValue"in e?lc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?gc(oc.empty(),Da.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:la()}function xc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?gc(oc.empty(),Da.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ac:la()}function Tc(e,t){const n=hc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function kc(e,t){const n=hc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Cc{constructor(e){this.value=e}static empty(){return new Cc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!_c(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(t)}setAll(e){let t=Ra.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ic(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());_c(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return uc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];_c(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){zl(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Cc(Ic(this.value))}}function Nc(e){const t=[];return zl(e.fields,((e,n)=>{const r=new Ra([e]);if(_c(n)){const e=Nc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Yl(t)}class Ac{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Ac(e,0,Ca.min(),Ca.min(),Ca.min(),Cc.empty(),0)}static newFoundDocument(e,t,n,r){return new Ac(e,1,t,Ca.min(),n,r,0)}static newNoDocument(e,t){return new Ac(e,2,t,Ca.min(),Ca.min(),Cc.empty(),0)}static newUnknownDocument(e,t){return new Ac(e,3,t,Ca.min(),Ca.min(),Cc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ca.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ca.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ac&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ac(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Pc{constructor(e,t){this.position=e,this.inclusive=t}}function Rc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Da.comparator(Da.fromName(o.referenceValue),n.key):hc(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Dc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!uc(e.position[n],t.position[n]))return!1;return!0}class Oc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Lc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Mc{}class Fc extends Mc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Gc(e,t,n):"array-contains"===t?new $c(e,n):"in"===t?new Xc(e,n):"not-in"===t?new Zc(e,n):"array-contains-any"===t?new eu(e,n):new Fc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Qc(e,n):new Yc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(hc(t,this.value)):null!==t&&cc(this.value)===cc(t)&&this.matchesComparison(hc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return la()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Uc extends Mc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Uc(e,t)}matches(e){return Vc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vc(e){return"and"===e.op}function jc(e){return"or"===e.op}function zc(e){return Bc(e)&&Vc(e)}function Bc(e){for(const t of e.filters)if(t instanceof Uc)return!1;return!0}function qc(e){if(e instanceof Fc)return e.field.canonicalString()+e.op.toString()+pc(e.value);if(zc(e))return e.filters.map((e=>qc(e))).join(",");{const t=e.filters.map((e=>qc(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Hc(e,t){return e instanceof Fc?function(e,t){return t instanceof Fc&&e.op===t.op&&e.field.isEqual(t.field)&&uc(e.value,t.value)}(e,t):e instanceof Uc?function(e,t){return t instanceof Uc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Hc(n,t.filters[r])),!0)}(e,t):void la()}function Kc(e,t){const n=e.filters.concat(t);return Uc.create(n,e.op)}function Wc(e){return e instanceof Fc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(pc(e.value))}(e):e instanceof Uc?function(e){return e.op.toString()+" {"+e.getFilters().map(Wc).join(" ,")+"}"}(e):"Filter"}class Gc extends Fc{constructor(e,t,n){super(e,t,n),this.key=Da.fromName(n.referenceValue)}matches(e){const t=Da.comparator(e.key,this.key);return this.matchesComparison(t)}}class Qc extends Fc{constructor(e,t){super(e,"in",t),this.keys=Jc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Yc extends Fc{constructor(e,t){super(e,"not-in",t),this.keys=Jc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Da.fromName(e.referenceValue)))}class $c extends Fc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yc(t)&&dc(t.arrayValue,this.value)}}class Xc extends Fc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dc(this.value.arrayValue,t)}}class Zc extends Fc{constructor(e,t){super(e,"not-in",t)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dc(this.value.arrayValue,t)}}class eu extends Fc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>dc(this.value.arrayValue,e)))}}class tu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function nu(e){return new tu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ru(e){const t=ua(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>qc(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ol(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>pc(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>pc(e))).join(",")),t.ue=e}return t.ue}function iu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Lc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Hc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Dc(e.startAt,t.startAt)&&Dc(e.endAt,t.endAt)}function su(e){return Da.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ou(e,t){return e.filters.filter((e=>e instanceof Fc&&e.field.isEqual(t)))}function au(e,t,n){let r=lc,i=!0;for(const s of ou(e,t)){let e=lc,t=!0;switch(s.op){case"<":case"<=":e=Sc(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=lc}Tc({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Tc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function lu(e,t,n){let r=ac,i=!0;for(const s of ou(e,t)){let e=ac,t=!0;switch(s.op){case">=":case">":e=xc(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=ac}kc({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];kc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class cu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function uu(e,t,n,r,i,s,o,a){return new cu(e,t,n,r,i,s,o,a)}function du(e){return new cu(e)}function hu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function fu(e){return null!==e.collectionGroup}function pu(e){const t=ua(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Wl(Ra.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Oc(r,n))})),e.has(Ra.keyField().canonicalString())||t.ce.push(new Oc(Ra.keyField(),n))}return t.ce}function mu(e){const t=ua(e);return t.le||(t.le=gu(t,pu(e))),t.le}function gu(e,t){if("F"===e.limitType)return nu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Oc(e.field,t)}));const n=e.endAt?new Pc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Pc(e.startAt.position,e.startAt.inclusive):null;return nu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function vu(e,t){const n=e.filters.concat([t]);return new cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function yu(e,t,n){return new cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wu(e,t){return iu(mu(e),mu(t))&&e.limitType===t.limitType}function bu(e){return"".concat(ru(mu(e)),"|lt:").concat(e.limitType)}function _u(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Wc(e))).join(", "),"]")),ol(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>pc(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>pc(e))).join(",")),"Target(".concat(t,")")}(mu(e)),"; limitType=").concat(e.limitType,")")}function Iu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Da.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of pu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Rc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,pu(e),t))&&!(e.endAt&&!function(e,t,n){const r=Rc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,pu(e),t))}(e,t)}function Eu(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Su(e){return(t,n)=>{let r=!1;for(const i of pu(e)){const e=xu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function xu(e,t,n){const r=e.field.isKeyField()?Da.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?hc(r,i):la()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return la()}}class Tu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){zl(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Bl(this.inner)}size(){return this.innerSize}}const ku=new ql(Da.comparator);function Cu(){return ku}const Nu=new ql(Da.comparator);function Au(){let e=Nu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Pu(e){let t=Nu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ru(){return Ou()}function Du(){return Ou()}function Ou(){return new Tu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Lu=new ql(Da.comparator),Mu=new Wl(Da.comparator);function Fu(){let e=Mu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Uu=new Wl(Sa);function Vu(){return Uu}function ju(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:al(t)?"-0":t}}function zu(e){return{integerValue:""+e}}function Bu(e,t){return ll(t)?zu(t):ju(e,t)}class qu{constructor(){this._=void 0}}function Hu(e,t,n){return e instanceof Gu?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&nc(t)&&(t=rc(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Qu?Yu(e,t):e instanceof Ju?$u(e,t):function(e,t){const n=Wu(e,t),r=Zu(n)+Zu(e.Pe);return vc(n)&&vc(e.Pe)?zu(r):ju(e.serializer,r)}(e,t)}function Ku(e,t,n){return e instanceof Qu?Yu(e,t):e instanceof Ju?$u(e,t):n}function Wu(e,t){return e instanceof Xu?function(e){return vc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Gu extends qu{}class Qu extends qu{constructor(e){super(),this.elements=e}}function Yu(e,t){const n=ed(t);for(const r of e.elements)n.some((e=>uc(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Ju extends qu{constructor(e){super(),this.elements=e}}function $u(e,t){let n=ed(t);for(const r of e.elements)n=n.filter((e=>!uc(e,r)));return{arrayValue:{values:n}}}class Xu extends qu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Zu(e){return ec(e.integerValue||e.doubleValue)}function ed(e){return yc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class td{constructor(e,t){this.field=e,this.transform=t}}class nd{constructor(e,t){this.version=e,this.transformResults=t}}class rd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rd}static exists(e){return new rd(void 0,e)}static updateTime(e){return new rd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function id(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class sd{}function od(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new gd(e.key,rd.none()):new dd(e.key,e.data,rd.none());{const n=e.data,r=Cc.empty();let i=new Wl(Ra.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new hd(e.key,r,new Yl(i.toArray()),rd.none())}}function ad(e,t,n){e instanceof dd?function(e,t,n){const r=e.value.clone(),i=pd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof hd?function(e,t,n){if(!id(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=pd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(fd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ld(e,t,n,r){return e instanceof dd?function(e,t,n,r){if(!id(e.precondition,t))return n;const i=e.value.clone(),s=md(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof hd?function(e,t,n,r){if(!id(e.precondition,t))return n;const i=md(e.fieldTransforms,r,t),s=t.data;return s.setAll(fd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return id(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function cd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Wu(r.transform,e||null);null!=i&&(null===n&&(n=Cc.empty()),n.set(r.field,i))}return n||null}function ud(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&xa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Qu&&t instanceof Qu||e instanceof Ju&&t instanceof Ju?xa(e.elements,t.elements,uc):e instanceof Xu&&t instanceof Xu?uc(e.Pe,t.Pe):e instanceof Gu&&t instanceof Gu}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class dd extends sd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class hd extends sd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function pd(e,t,n){const r=new Map;ca(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ku(o,a,n[i]))}return r}function md(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Hu(e,s,t))}return r}class gd extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vd extends sd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ad(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ld(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ld(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Du();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=od(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Ca.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fu())}isEqual(e){return this.batchId===e.batchId&&xa(this.mutations,e.mutations,((e,t)=>ud(e,t)))&&xa(this.baseMutations,e.baseMutations,((e,t)=>ud(e,t)))}}class wd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ca(e.mutations.length===n.length);let r=Lu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new wd(e,t,n,r)}}class bd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class _d{constructor(e,t){this.count=e,this.unchangedNames=t}}var Id,Ed;function Sd(e){switch(e){default:return la();case da.CANCELLED:case da.UNKNOWN:case da.DEADLINE_EXCEEDED:case da.RESOURCE_EXHAUSTED:case da.INTERNAL:case da.UNAVAILABLE:case da.UNAUTHENTICATED:return!1;case da.INVALID_ARGUMENT:case da.NOT_FOUND:case da.ALREADY_EXISTS:case da.PERMISSION_DENIED:case da.FAILED_PRECONDITION:case da.ABORTED:case da.OUT_OF_RANGE:case da.UNIMPLEMENTED:case da.DATA_LOSS:return!0}}function xd(e){if(void 0===e)return sa("GRPC error has no .code"),da.UNKNOWN;switch(e){case Id.OK:return da.OK;case Id.CANCELLED:return da.CANCELLED;case Id.UNKNOWN:return da.UNKNOWN;case Id.DEADLINE_EXCEEDED:return da.DEADLINE_EXCEEDED;case Id.RESOURCE_EXHAUSTED:return da.RESOURCE_EXHAUSTED;case Id.INTERNAL:return da.INTERNAL;case Id.UNAVAILABLE:return da.UNAVAILABLE;case Id.UNAUTHENTICATED:return da.UNAUTHENTICATED;case Id.INVALID_ARGUMENT:return da.INVALID_ARGUMENT;case Id.NOT_FOUND:return da.NOT_FOUND;case Id.ALREADY_EXISTS:return da.ALREADY_EXISTS;case Id.PERMISSION_DENIED:return da.PERMISSION_DENIED;case Id.FAILED_PRECONDITION:return da.FAILED_PRECONDITION;case Id.ABORTED:return da.ABORTED;case Id.OUT_OF_RANGE:return da.OUT_OF_RANGE;case Id.UNIMPLEMENTED:return da.UNIMPLEMENTED;case Id.DATA_LOSS:return da.DATA_LOSS;default:return la()}}(Ed=Id||(Id={}))[Ed.OK=0]="OK",Ed[Ed.CANCELLED=1]="CANCELLED",Ed[Ed.UNKNOWN=2]="UNKNOWN",Ed[Ed.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ed[Ed.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ed[Ed.NOT_FOUND=5]="NOT_FOUND",Ed[Ed.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ed[Ed.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ed[Ed.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ed[Ed.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ed[Ed.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ed[Ed.ABORTED=10]="ABORTED",Ed[Ed.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ed[Ed.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ed[Ed.INTERNAL=13]="INTERNAL",Ed[Ed.UNAVAILABLE=14]="UNAVAILABLE",Ed[Ed.DATA_LOSS=15]="DATA_LOSS";let Td=null;function kd(){return new TextEncoder}const Cd=new Uo([4294967295,4294967295],0);function Nd(e){const t=kd().encode(e),n=new Vo;return n.update(t),new Uint8Array(n.digest())}function Ad(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Uo([n,r],0),new Uo([i,s],0)]}class Pd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Rd("Invalid padding: ".concat(t));if(n<0)throw new Rd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Rd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Rd("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=Uo.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(Uo.fromNumber(n)));return 1===r.compare(Cd)&&(r=new Uo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Nd(e),[n,r]=Ad(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Pd(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Nd(e),[n,r]=Ad(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Rd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Dd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Od.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Dd(Ca.min(),r,new ql(Sa),Cu(),Fu())}}class Od{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Od(n,t,Fu(),Fu(),Fu())}}class Ld{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class Md{constructor(e,t){this.targetId=e,this.me=t}}class Fd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$l.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Ud{constructor(){this.fe=0,this.ge=zd(),this.pe=$l.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Fu(),t=Fu(),n=Fu();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:la()}})),new Od(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=zd()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ca(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Vd{constructor(e){this.Le=e,this.Be=new Map,this.ke=Cu(),this.qe=jd(),this.Qe=new ql(Sa)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:la()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(su(i))if(0===n){const e=new Da(i.path);this.Ue(t,e,Ac.newNoDocument(e,Ca.min()))}else ca(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Td||Td.et(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=tc(n).toUint8Array()}catch(e){if(e instanceof Jl)return oa("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Pd(s,r,i)}catch(e){return oa(e instanceof Rd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&su(i.target)){const t=new Da(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Ac.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=Fu();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new Dd(e,t,this.Qe,this.ke,n);return this.ke=Cu(),this.qe=jd(),this.Qe=new ql(Sa),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ud,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Wl(Sa),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ia("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ud),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function jd(){return new ql(Da.comparator)}function zd(){return new ql(Da.comparator)}const Bd={asc:"ASCENDING",desc:"DESCENDING"},qd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hd={and:"AND",or:"OR"};class Kd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wd(e,t){return e.useProto3Json||ol(t)?t:{value:t}}function Gd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Yd(e,t){return Gd(e,t.toTimestamp())}function Jd(e){return ca(!!e),Ca.fromTimestamp(function(e){const t=Zl(e);return new ka(t.seconds,t.nanos)}(e))}function $d(e,t){return Xd(e,t).canonicalString()}function Xd(e,t){const n=function(e){return new Aa(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Zd(e){const t=Aa.fromString(e);return ca(_h(t)),t}function eh(e,t){return $d(e.databaseId,t.path)}function th(e,t){const n=Zd(t);if(n.get(1)!==e.databaseId.projectId)throw new ha(da.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ha(da.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Da(sh(n))}function nh(e,t){return $d(e.databaseId,t)}function rh(e){const t=Zd(e);return 4===t.length?Aa.emptyPath():sh(t)}function ih(e){return new Aa(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sh(e){return ca(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function oh(e,t,n){return{name:eh(e,t),fields:n.value.mapValue.fields}}function ah(e,t,n){const r=th(e,t.name),i=Jd(t.updateTime),s=t.createTime?Jd(t.createTime):Ca.min(),o=new Cc({mapValue:{fields:t.fields}}),a=Ac.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function lh(e,t){let n;if(t instanceof dd)n={update:oh(e,t.key,t.value)};else if(t instanceof gd)n={delete:eh(e,t.key)};else if(t instanceof hd)n={update:oh(e,t.key,t.data),updateMask:bh(t.fieldMask)};else{if(!(t instanceof vd))return la();n={verify:eh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Gu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Qu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ju)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xu)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw la()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Yd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:la()}(e,t.precondition)),n}function ch(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?rd.updateTime(Jd(e.updateTime)):void 0!==e.exists?rd.exists(e.exists):rd.none()}(t.currentDocument):rd.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)ca("REQUEST_TIME"===t.setToServerValue),n=new Gu;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Qu(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Ju(e)}else"increment"in t?n=new Xu(e,t.increment):la();const r=Ra.fromServerFormat(t.fieldPath);return new td(r,n)}(e,t))):[];if(t.update){t.update.name;const i=th(e,t.update.name),s=new Cc({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Yl(t.map((e=>Ra.fromServerFormat(e))))}(t.updateMask);return new hd(i,s,e,n,r)}return new dd(i,s,n,r)}if(t.delete){const r=th(e,t.delete);return new gd(r,n)}if(t.verify){const r=th(e,t.verify);return new vd(r,n)}return la()}function uh(e,t){return{documents:[nh(e,t.path)]}}function dh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nh(e,i);const s=function(e){if(0!==e.length)return wh(Uc.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:vh(e.field),direction:ph(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Wd(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function hh(e){let t=rh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ca(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=fh(e);return t instanceof Uc&&zc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Oc(yh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ol(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Pc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Pc(n,t)}(n.endAt)),uu(t,i,o,s,a,"F",l,c)}function fh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yh(e.unaryFilter.field);return Fc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=yh(e.unaryFilter.field);return Fc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=yh(e.unaryFilter.field);return Fc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=yh(e.unaryFilter.field);return Fc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return la()}}(e):void 0!==e.fieldFilter?function(e){return Fc.create(yh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return la()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Uc.create(e.compositeFilter.filters.map((e=>fh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return la()}}(e.compositeFilter.op))}(e):la()}function ph(e){return Bd[e]}function mh(e){return qd[e]}function gh(e){return Hd[e]}function vh(e){return{fieldPath:e.canonicalString()}}function yh(e){return Ra.fromServerFormat(e.fieldPath)}function wh(e){return e instanceof Fc?function(e){if("=="===e.op){if(bc(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NAN"}};if(wc(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bc(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NOT_NAN"}};if(wc(e.value))return{unaryFilter:{field:vh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vh(e.field),op:mh(e.op),value:e.value}}}(e):e instanceof Uc?function(e){const t=e.getFilters().map((e=>wh(e)));return 1===t.length?t[0]:{compositeFilter:{op:gh(e.op),filters:t}}}(e):la()}function bh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function _h(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ih{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ca.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ca.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$l.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Ih(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Eh{constructor(e){this.ct=e}}function Sh(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:xh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:eh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Gd(e,t.version.toTimestamp()),createTime:Gd(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Th(t.version)};else{if(!t.isUnknownDocument())return la();r.unknownDocument={path:n.path.toArray(),version:Th(t.version)}}return r}function xh(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Th(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function kh(e){const t=new ka(e.seconds,e.nanoseconds);return Ca.fromTimestamp(t)}function Ch(e,t){const n=(t.baseMutations||[]).map((t=>ch(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>ch(e.ct,t))),i=ka.fromMillis(t.localWriteTimeMs);return new yd(t.batchId,i,n,r)}function Nh(e){const t=kh(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?kh(e.lastLimboFreeSnapshotVersion):Ca.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return ca(1===e.documents.length),mu(du(rh(e.documents[0])))}(e.query):function(e){return mu(hh(e))}(e.query),new Ih(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,$l.fromBase64String(e.resumeToken))}function Ah(e,t){const n=Th(t.snapshotVersion),r=Th(t.lastLimboFreeSnapshotVersion);let i;i=su(t.target)?uh(e.ct,t.target):dh(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ru(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ph(e){const t=hh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?yu(t,t.limit,"L"):t}function Rh(e,t){return new bd(t.largestBatchId,ch(e.ct,t.overlayMutation))}function Dh(e,t){const n=t.path.lastSegment();return[e,cl(t.path.popLast()),n]}function Oh(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Th(r.readTime),documentKey:cl(r.documentKey.path),largestBatchId:r.largestBatchId}}class Lh{getBundleMetadata(e,t){return Mh(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:kh(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Mh(e).put(function(e){return{bundleId:e.id,createTime:Th(Jd(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Fh(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Ph(e.bundledQuery),readTime:kh(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Fh(e).put(function(e){return{name:e.name,readTime:Th(Jd(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Mh(e){return Vl(e,"bundles")}function Fh(e){return Vl(e,"namedQueries")}class Uh{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Uh(e,n)}getOverlay(e,t){return Vh(e).get(Dh(this.userId,t)).next((e=>e?Rh(this.serializer,e):null))}getOverlays(e,t){const n=Ru();return Wa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new bd(t,i);r.push(this.ht(e,s))})),Wa.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(cl(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Vh(e).j("collectionPathOverlayIndex",r))})),Wa.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Ru(),i=cl(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Vh(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Rh(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Ru();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vh(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Rh(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Vh(e).put(function(e,t,n){const[r,i,s]=Dh(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:lh(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Vh(e){return Vl(e,"documentOverlays")}class jh{Pt(e){return Vl(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?$l.fromUint8Array(t):$l.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class zh{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ec(e.integerValue));else if("doubleValue"in e){const n=ec(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),al(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Zl(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(tc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Ec(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):la()}Vt(e,t){this.dt(t,25),this.bt(e,t)}bt(e,t){t.Rt(e)}wt(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}St(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Da.fromName(e).path.forEach((e=>{this.dt(t,60),this.bt(e,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}function Bh(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function qh(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Bh(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}zh.Dt=new zh;class Hh{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.vt(n.value),n=t.next();this.Ft()}Mt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.xt(n.value),n=t.next();this.Ot()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.vt(e);else if(e<2048)this.vt(960|e>>>6),this.vt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.vt(480|e>>>12),this.vt(128|63&e>>>6),this.vt(128|63&e);else{const e=t.codePointAt(0);this.vt(240|e>>>18),this.vt(128|63&e>>>12),this.vt(128|63&e>>>6),this.vt(128|63&e)}}this.Ft()}Lt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.xt(e);else if(e<2048)this.xt(960|e>>>6),this.xt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.xt(480|e>>>12),this.xt(128|63&e>>>6),this.xt(128|63&e);else{const e=t.codePointAt(0);this.xt(240|e>>>18),this.xt(128|63&e>>>12),this.xt(128|63&e>>>6),this.xt(128|63&e)}}this.Ot()}Bt(e){const t=this.kt(e),n=qh(t);this.qt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Qt(e){const t=this.kt(e),n=qh(t);this.qt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}vt(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(t)}xt(e){const t=255&e;0===t?(this.Wt(0),this.Wt(255)):255===t?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Kh{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}}class Wh{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}}class Gh{constructor(){this.zt=new Hh,this.jt=new Kh(this.zt),this.Ht=new Wh(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return 0===e?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}}class Qh{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Yt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Qh(this.indexId,this.documentKey,this.arrayValue,n)}}function Yh(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Jh(e.arrayValue,t.arrayValue),0!==n?n:(n=Jh(e.directionalValue,t.directionalValue),0!==n?n:Da.comparator(e.documentKey,t.documentKey)))}function Jh(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class $h{constructor(e){this.Zt=new Wl(((e,t)=>Ra.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const t of e.filters){const e=t;e.isInequality()?this.Zt=this.Zt.add(e):this.en.push(e)}}get tn(){return this.Zt.size>1}nn(e){if(ca(e.collectionGroup===this.collectionId),this.tn)return!1;const t=La(e);if(void 0!==t&&!this.rn(t))return!1;const n=Ma(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.rn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Zt.size>0){const e=this.Zt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.sn(e,t)||!this.on(this.Xt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Xt.length||!this.on(this.Xt[s++],e))return!1}return!0}_n(){if(this.tn)return null;let e=new Wl(Ra.comparator);const t=[];for(const n of this.en)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Fa(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Fa(n.field,0))}for(const n of this.Xt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Fa(n.field,"asc"===n.dir?0:1)));return new Oa(Oa.UNKNOWN_ID,this.collectionId,t,Ua.empty())}rn(e){for(const t of this.en)if(this.sn(t,e))return!0;return!1}sn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}on(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Xh(e){var t,n;if(ca(e instanceof Fc||e instanceof Uc),e instanceof Fc){if(e instanceof Xc){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Fc.create(e.field,"==",t))))||[];return Uc.create(r,"or")}return e}const r=e.filters.map((e=>Xh(e)));return Uc.create(r,e.op)}function Zh(e){if(0===e.getFilters().length)return[];const t=rf(Xh(e));return ca(nf(t)),ef(t)||tf(t)?[t]:t.getFilters()}function ef(e){return e instanceof Fc}function tf(e){return e instanceof Uc&&zc(e)}function nf(e){return ef(e)||tf(e)||function(e){if(e instanceof Uc&&jc(e)){for(const t of e.getFilters())if(!ef(t)&&!tf(t))return!1;return!0}return!1}(e)}function rf(e){if(ca(e instanceof Fc||e instanceof Uc),e instanceof Fc)return e;if(1===e.filters.length)return rf(e.filters[0]);const t=e.filters.map((e=>rf(e)));let n=Uc.create(t,e.op);return n=af(n),nf(n)?n:(ca(n instanceof Uc),ca(Vc(n)),ca(n.filters.length>1),n.filters.reduce(((e,t)=>sf(e,t))))}function sf(e,t){let n;return ca(e instanceof Fc||e instanceof Uc),ca(t instanceof Fc||t instanceof Uc),n=e instanceof Fc?t instanceof Fc?function(e,t){return Uc.create([e,t],"and")}(e,t):of(e,t):t instanceof Fc?of(t,e):function(e,t){if(ca(e.filters.length>0&&t.filters.length>0),Vc(e)&&Vc(t))return Kc(e,t.getFilters());const n=jc(e)?e:t,r=jc(e)?t:e,i=n.filters.map((e=>sf(e,r)));return Uc.create(i,"or")}(e,t),af(n)}function of(e,t){if(Vc(t))return Kc(t,e.getFilters());{const n=t.filters.map((t=>sf(e,t)));return Uc.create(n,"or")}}function af(e){if(ca(e instanceof Fc||e instanceof Uc),e instanceof Fc)return e;const t=e.getFilters();if(1===t.length)return af(t[0]);if(Bc(e))return e;const n=t.map((e=>af(e))),r=[];return n.forEach((t=>{t instanceof Fc?r.push(t):t instanceof Uc&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Uc.create(r,e.op)}class lf{constructor(){this.an=new cf}addToCollectionParentIndex(e,t){return this.an.add(t),Wa.resolve()}getCollectionParents(e,t){return Wa.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return Wa.resolve()}deleteFieldIndex(e,t){return Wa.resolve()}deleteAllFieldIndexes(e){return Wa.resolve()}createTargetIndexes(e,t){return Wa.resolve()}getDocumentsMatchingTarget(e,t){return Wa.resolve(null)}getIndexType(e,t){return Wa.resolve(0)}getFieldIndexes(e,t){return Wa.resolve([])}getNextCollectionGroupToUpdate(e){return Wa.resolve(null)}getMinOffset(e,t){return Wa.resolve(za.min())}getMinOffsetFromCollectionGroup(e,t){return Wa.resolve(za.min())}updateCollectionGroup(e,t,n){return Wa.resolve()}updateIndexEntries(e,t){return Wa.resolve()}}class cf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wl(Aa.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Wl(Aa.comparator)).toArray()}}const uf=new Uint8Array(0);class df{constructor(e,t){this.databaseId=t,this.un=new cf,this.cn=new Tu((e=>ru(e)),((e,t)=>iu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.un.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.un.add(t)}));const i={collectionId:n,parent:cl(r)};return hf(e).put(i)}return Wa.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Ta(t),""],!1,!0);return hf(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(hl(r.parent))}return n}))}addFieldIndex(e,t){const n=pf(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=mf(e);return i.next((e=>{n.put(Oh(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=pf(e),r=mf(e),i=ff(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=pf(e),n=ff(e),r=mf(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return Wa.forEach(this.ln(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new $h(t)._n();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=ff(e);let r=!0;const i=new Map;return Wa.forEach(this.ln(t),(t=>this.hn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Fu();const r=[];return Wa.forEach(i,((i,s)=>{ia("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(ru(t)));const o=function(e,t){const n=La(t);if(void 0===n)return null;for(const r of ou(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Ma(t))for(const t of ou(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Ma(t)){const t=0===i.kind?au(e,i.fieldPath,e.startAt):lu(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Pc(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Ma(t)){const t=0===i.kind?lu(e,i.fieldPath,e.endAt):au(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Pc(n,r)}(s,i),u=this.Pn(i,s,l),d=this.Pn(i,s,c),h=this.In(i,s,a),f=this.Tn(i.indexId,o,u,l.inclusive,d,c.inclusive,h);return Wa.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=Da.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Wa.resolve(null)}))}ln(e){let t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:Zh(Uc.create(e.filters,"and")).map((t=>nu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.cn.set(e,t),t)}Tn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.En(t[u/l]):uf,d=this.dn(e,a,n[u%l],r),h=this.An(e,a,i[u%l],s),f=o.map((t=>this.dn(e,a,t,!0)));c.push(...this.createRange(d,h,f))}return c}dn(e,t,n,r){const i=new Qh(e,Da.empty(),t,n);return r?i:i.Yt()}An(e,t,n,r){const i=new Qh(e,Da.empty(),t,n);return r?i.Yt():i}hn(e,t){const n=new $h(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.nn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.ln(t);return Wa.forEach(r,(t=>this.hn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Wl(Ra.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}Rn(e,t){const n=new Gh;for(const r of Ma(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Jt(r.kind);zh.Dt.It(e,i)}return n.Gt()}En(e){const t=new Gh;return zh.Dt.It(e,t.Jt(0)),t.Gt()}Vn(e,t){const n=new Gh;return zh.Dt.It(gc(this.databaseId,t),n.Jt(function(e){const t=Ma(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Gt()}In(e,t,n){if(null===n)return[];let r=[];r.push(new Gh);let i=0;for(const s of Ma(e)){const e=n[i++];for(const n of r)if(this.mn(t,s.fieldPath)&&yc(e))r=this.fn(r,s,e);else{const t=n.Jt(s.kind);zh.Dt.It(e,t)}}return this.gn(r)}Pn(e,t,n){return this.In(e,t,n.position)}gn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Gt();return t}fn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Gh;n.seed(e.Gt()),zh.Dt.It(s,n.Jt(t.kind)),i.push(n)}return i}mn(e,t){return!!e.filters.find((e=>e instanceof Fc&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=pf(e),r=mf(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return Wa.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Ua(t.sequenceNumber,new za(kh(t.readTime),new Da(hl(t.documentKey)),t.largestBatchId)):Ua.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Fa(Ra.fromServerFormat(t),n)}));return new Oa(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Sa(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=pf(e),i=mf(e);return this.pn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Wa.forEach(t,(t=>i.put(Oh(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Wa.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Wa.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Wa.forEach(i,(n=>this.yn(e,t,n).next((t=>{const i=this.wn(r,n);return t.isEqual(i)?Wa.resolve():this.Sn(e,r,n,t,i)})))))))}))}bn(e,t,n,r){return ff(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Vn(n,t.key),documentKey:t.key.path.toArray()})}Dn(e,t,n,r){return ff(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Vn(n,t.key),t.key.path.toArray()])}yn(e,t,n){const r=ff(e);let i=new Wl(Yh);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Vn(n,t)])},((e,r)=>{i=i.add(new Qh(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}wn(e,t){let n=new Wl(Yh);const r=this.Rn(t,e);if(null==r)return n;const i=La(t);if(null!=i){const s=e.data.field(i.fieldPath);if(yc(s))for(const i of s.arrayValue.values||[])n=n.add(new Qh(t.indexId,e.key,this.En(i),r))}else n=n.add(new Qh(t.indexId,e.key,uf,r));return n}Sn(e,t,n,r,i){ia("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Ql(s),l=Ql(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Ql(o)):t?(i(a),a=Ql(s)):(a=Ql(s),l=Ql(o))}}(r,i,Yh,(r=>{s.push(this.bn(e,t,n,r))}),(r=>{s.push(this.Dn(e,t,n,r))})),Wa.waitFor(s)}pn(e){let t=1;return mf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Yh(e,t))).filter(((e,t,n)=>!t||0!==Yh(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Yh(s,e),i=Yh(s,t);if(0===n)r[0]=e.Yt();else if(n>0&&i<0)r.push(s),r.push(s.Yt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,uf,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,uf,[]];i.push(IDBKeyRange.bound(e,t))}return i}Cn(e,t){return Yh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gf)}getMinOffset(e,t){return Wa.mapArray(this.ln(t),(t=>this.hn(e,t).next((e=>e||la())))).next(gf)}}function hf(e){return Vl(e,"collectionParents")}function ff(e){return Vl(e,"indexEntries")}function pf(e){return Vl(e,"indexConfiguration")}function mf(e){return Vl(e,"indexState")}function gf(e){ca(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Ba(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new za(t.readTime,t.documentKey,n)}const vf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class yf{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new yf(e,yf.DEFAULT_COLLECTION_PERCENTILE,yf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{ca(1===a)})));const c=[];for(const u of n.mutations){const e=ml(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Wa.waitFor(s).next((()=>c))}function bf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw la();t=e.noDocument}return JSON.stringify(t).length}yf.DEFAULT_COLLECTION_PERCENTILE=10,yf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yf.DEFAULT=new yf(41943040,yf.DEFAULT_COLLECTION_PERCENTILE,yf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yf.DISABLED=new yf(-1,0,0);class _f{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.vn={}}static lt(e,t,n,r){ca(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new _f(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ef(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Sf(e),s=Ef(e);return s.add({}).next((o=>{ca("number"==typeof o);const a=new yd(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>lh(e.ct,t))),i=n.mutations.map((t=>lh(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Wl(((e,t)=>Sa(e.canonicalString(),t.canonicalString())));for(const e of r){const t=ml(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,gl))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.vn[o]=a.keys()})),Wa.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Ef(e).get(t).next((e=>e?(ca(e.userId===this.userId),Ch(this.serializer,e)):null))}Fn(e,t){return this.vn[t]?Wa.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Ef(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(ca(t.batchId>=n),i=Ch(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ef(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ef(e).U("userMutationsIndex",t).next((e=>e.map((e=>Ch(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=pl(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Sf(e).J({range:r},((n,r,s)=>{const[o,a,l]=n,c=hl(a);if(o===this.userId&&t.path.isEqual(c))return Ef(e).get(l).next((e=>{if(!e)throw la();ca(e.userId===this.userId),i.push(Ch(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Wl(Sa);const r=[];return t.forEach((t=>{const i=pl(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Sf(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,l=hl(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Wa.waitFor(r).next((()=>this.Mn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=pl(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Wl(Sa);return Sf(e).J({range:s},((e,t,i)=>{const[s,a,l]=e,c=hl(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Mn(e,o)))}Mn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Ef(e).get(t).next((e=>{if(null===e)throw la();ca(e.userId===this.userId),n.push(Ch(this.serializer,e))})))})),Wa.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return wf(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.xn(t.batchId)})),Wa.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Wa.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Sf(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=hl(e[1]);r.push(t)}else n.done()})).next((()=>{ca(0===r.length)}))}))}containsKey(e,t){return If(e,this.userId,t)}On(e){return xf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function If(e,t,n){const r=pl(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Sf(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Ef(e){return Vl(e,"mutations")}function Sf(e){return Vl(e,"documentMutations")}function xf(e){return Vl(e,"mutationQueues")}class Tf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new Tf(0)}static Bn(){return new Tf(-1)}}class kf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.kn(e).next((t=>{const n=new Tf(t.highestTargetId);return t.highestTargetId=n.next(),this.qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.kn(e).next((e=>Ca.fromTimestamp(new ka(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.kn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.kn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.qn(e,r))))}addTargetData(e,t){return this.Qn(e,t).next((()=>this.kn(e).next((n=>(n.targetCount+=1,this.Kn(t,n),this.qn(e,n))))))}updateTargetData(e,t){return this.Qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Cf(e).delete(t.targetId))).next((()=>this.kn(e))).next((t=>(ca(t.targetCount>0),t.targetCount-=1,this.qn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Cf(e).J(((s,o)=>{const a=Nh(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Wa.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Cf(e).J(((e,n)=>{const r=Nh(n);t(r)}))}kn(e){return Nf(e).get("targetGlobalKey").next((e=>(ca(null!==e),e)))}qn(e,t){return Nf(e).put("targetGlobalKey",t)}Qn(e,t){return Cf(e).put(Ah(this.serializer,t))}Kn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.kn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=ru(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Cf(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Nh(n);iu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Af(e);return t.forEach((t=>{const s=cl(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Wa.waitFor(r)}removeMatchingKeys(e,t,n){const r=Af(e);return Wa.forEach(t,(t=>{const i=cl(t.path);return Wa.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Af(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Af(e);let i=Fu();return r.J({range:n,H:!0},((e,t,n)=>{const r=hl(e[1]),s=new Da(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=cl(t.path),r=IDBKeyRange.bound([n],[Ta(n)],!1,!0);let i=0;return Af(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return Cf(e).get(t).next((e=>e?Nh(e):null))}}function Cf(e){return Vl(e,"targets")}function Nf(e){return Vl(e,"targetGlobal")}function Af(e){return Vl(e,"targetDocuments")}function Pf(e,t){let[n,r]=e,[i,s]=t;const o=Sa(n,i);return 0===o?Sa(r,s):o}class Rf{constructor(e){this.$n=e,this.buffer=new Wl(Pf),this.Un=0}Wn(){return++this.Un}Gn(e){const t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Pf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Df{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.zn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return null!==this.zn}jn(e){ia("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.zn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Xa(e)?ia("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Ka(e)}await this.jn(3e5)}))}}class Of{constructor(e,t){this.Hn=e,this.params=t}calculateTargetCount(e,t){return this.Hn.Jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Wa.resolve(sl.oe);const n=new Rf(t);return this.Hn.forEachTarget(e,(e=>n.Gn(e.sequenceNumber))).next((()=>this.Hn.Yn(e,(e=>n.Gn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Hn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Hn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ia("LruGarbageCollector","Garbage collection skipped; disabled"),Wa.resolve(vf)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ia("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),vf):this.Zn(e,t)))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(ia("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),ra()<=B.DEBUG&&ia("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Wa.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Lf(e,t){return new Of(e,t)}class Mf{constructor(e,t){this.db=e,this.garbageCollector=Lf(this,t)}Jn(e){const t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Xn(e){let t=0;return this.Yn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Yn(e,t){return this.er(e,((e,n)=>t(n)))}addReference(e,t,n){return Ff(e,n)}removeReference(e,t,n){return Ff(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ff(e,t)}tr(e,t){return function(e,t){let n=!1;return xf(e).Y((r=>If(e,r,t).next((e=>(e&&(n=!0),Wa.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.er(e,((s,o)=>{if(o<=t){const t=this.tr(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Ca.min()),Af(e).delete(function(e){return[0,cl(e.path)]}(s)))))}));r.push(t)}})).next((()=>Wa.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ff(e,t)}er(e,t){const n=Af(e);let r,i=sl.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==sl.oe&&t(new Da(hl(r)),i),i=l,r=a):i=sl.oe})).next((()=>{i!==sl.oe&&t(new Da(hl(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ff(e,t){return Af(e).put(function(e,t){return{targetId:0,path:cl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Uf{constructor(){this.changes=new Tu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ac.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Wa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return qf(e).put(n)}removeEntry(e,t,n){return qf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],xh(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.nr(e,n))))}getEntry(e,t){let n=Ac.newInvalidDocument(t);return qf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hf(t))},((e,r)=>{n=this.rr(t,r)})).next((()=>n))}ir(e,t){let n={size:0,document:Ac.newInvalidDocument(t)};return qf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hf(t))},((e,r)=>{n={document:this.rr(t,r),size:bf(r)}})).next((()=>n))}getEntries(e,t){let n=Cu();return this.sr(e,t,((e,t)=>{const r=this.rr(e,t);n=n.insert(e,r)})).next((()=>n))}_r(e,t){let n=Cu(),r=new ql(Da.comparator);return this.sr(e,t,((e,t)=>{const i=this.rr(e,t);n=n.insert(e,i),r=r.insert(e,bf(t))})).next((()=>({documents:n,ar:r})))}sr(e,t,n){if(t.isEmpty())return Wa.resolve();let r=new Wl(Wf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Hf(r.first()),Hf(r.last())),s=r.getIterator();let o=s.getNext();return qf(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Da.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Wf(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(Hf(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),xh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qf(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Cu();for(const i of e){const e=this.rr(Da.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Iu(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Cu();const s=Kf(t,n),o=Kf(t,za.max());return qf(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.rr(Da.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new zf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Bf(e).get("remoteDocumentGlobalKey").next((e=>(ca(!!e),e)))}nr(e,t){return Bf(e).put("remoteDocumentGlobalKey",t)}rr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=ah(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Da.fromSegments(t.noDocument.path),r=kh(t.noDocument.readTime);n=Ac.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return la();{const e=Da.fromSegments(t.unknownDocument.path),r=kh(t.unknownDocument.version);n=Ac.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ka(e[0],e[1]);return Ca.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Ca.min()))return e}return Ac.newInvalidDocument(e)}}function jf(e){return new Vf(e)}class zf extends Uf{constructor(e,t){super(),this.ur=e,this.trackRemovals=t,this.cr=new Tu((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Wl(((e,t)=>Sa(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.cr.get(i);if(t.push(this.ur.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Sh(this.ur.serializer,s);r=r.add(i.path.popLast());const l=bf(a);n+=l-o.size,t.push(this.ur.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Sh(this.ur.serializer,s.convertToNoDocument(Ca.min()));t.push(this.ur.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ur.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ur.updateMetadata(e,n)),Wa.waitFor(t)}getFromCache(e,t){return this.ur.ir(e,t).next((e=>(this.cr.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ur._r(e,t).next((e=>{let{documents:t,ar:n}=e;return n.forEach(((e,n)=>{this.cr.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Bf(e){return Vl(e,"remoteDocumentGlobal")}function qf(e){return Vl(e,"remoteDocumentsV14")}function Hf(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Kf(e,t){const n=t.documentKey.path.toArray();return[e,xh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Wf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Sa(n[s],r[s]),i)return i;return i=Sa(n.length,r.length),i||(i=Sa(n[n.length-2],r[r.length-2]),i||Sa(n[n.length-1],r[r.length-1]))}class Gf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qf{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&ld(n.mutation,e,Yl.empty(),ka.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Fu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fu();const r=Ru();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Au();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Ru();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Fu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Cu();const s=Ou(),o=Ou();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof hd)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),ld(o.mutation,t,o.mutation.getFieldMask(),ka.now())):s.set(t.key,Yl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Gf(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Ou();let r=new ql(((e,t)=>e-t)),i=Fu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Yl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Fu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Du();l.forEach((e=>{if(!i.has(e)){const r=od(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Wa.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Da.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Wa.resolve(Ru());let o=-1,a=i;return s.next((t=>Wa.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Wa.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Fu()))).next((e=>({batchId:o,changes:Pu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Da(t)).next((e=>{let t=Au();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Au();return this.indexManager.getCollectionParents(e,i).next((o=>Wa.forEach(o,(o=>{const a=function(e,t){return new cu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ac.newInvalidDocument(r)))}));let n=Au();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&ld(s.mutation,r,Yl.empty(),ka.now()),Iu(t,r)&&(n=n.insert(e,r))})),n}))}}class Yf{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return Wa.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Jd(e.createTime)}}(t)),Wa.resolve()}getNamedQuery(e,t){return Wa.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,function(e){return{name:e.name,query:Ph(e.bundledQuery),readTime:Jd(e.readTime)}}(t)),Wa.resolve()}}class Jf{constructor(){this.overlays=new ql(Da.comparator),this.Pr=new Map}getOverlay(e,t){return Wa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ru();return Wa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Wa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Pr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Pr.delete(n)),Wa.resolve()}getOverlaysForCollection(e,t,n){const r=Ru(),i=t.length+1,s=new Da(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Wa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ql(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ru(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ru(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Wa.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new bd(t,n));let i=this.Pr.get(t);void 0===i&&(i=Fu(),this.Pr.set(t,i)),this.Pr.set(t,i.add(n.key))}}class $f{constructor(){this.sessionToken=$l.EMPTY_BYTE_STRING}getSessionToken(e){return Wa.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Wa.resolve()}}class Xf{constructor(){this.Ir=new Wl(Zf.Tr),this.Er=new Wl(Zf.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const n=new Zf(e,t);this.Ir=this.Ir.add(n),this.Er=this.Er.add(n)}Ar(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Rr(new Zf(e,t))}Vr(e,t){e.forEach((e=>this.removeReference(e,t)))}mr(e){const t=new Da(new Aa([])),n=new Zf(t,e),r=new Zf(t,e+1),i=[];return this.Er.forEachInRange([n,r],(e=>{this.Rr(e),i.push(e.key)})),i}gr(){this.Ir.forEach((e=>this.Rr(e)))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const t=new Da(new Aa([])),n=new Zf(t,e),r=new Zf(t,e+1);let i=Fu();return this.Er.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Zf(e,0),n=this.Ir.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Zf{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return Da.comparator(e.key,t.key)||Sa(e.yr,t.yr)}static dr(e,t){return Sa(e.yr,t.yr)||Da.comparator(e.key,t.key)}}class ep{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new Wl(Zf.Tr)}checkEmpty(e){return Wa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new yd(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Sr=this.Sr.add(new Zf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Wa.resolve(s)}lookupMutationBatch(e,t){return Wa.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Dr(n),i=r<0?0:r;return Wa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Wa.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return Wa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Zf(t,0),r=new Zf(t,Number.POSITIVE_INFINITY),i=[];return this.Sr.forEachInRange([n,r],(e=>{const t=this.br(e.yr);i.push(t)})),Wa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Wl(Sa);return t.forEach((e=>{const t=new Zf(e,0),r=new Zf(e,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([t,r],(e=>{n=n.add(e.yr)}))})),Wa.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Da.isDocumentKey(i)||(i=i.child(""));const s=new Zf(new Da(i),0);let o=new Wl(Sa);return this.Sr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.yr)),!0)}),s),Wa.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach((e=>{const n=this.br(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){ca(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Sr;return Wa.forEach(t.mutations,(r=>{const i=new Zf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Sr=n}))}xn(e){}containsKey(e,t){const n=new Zf(t,0),r=this.Sr.firstAfterOrEqual(n);return Wa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Wa.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tp{constructor(e){this.Fr=e,this.docs=new ql(Da.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Fr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Wa.resolve(n?n.document.mutableCopy():Ac.newInvalidDocument(t))}getEntries(e,t){let n=Cu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ac.newInvalidDocument(e))})),Wa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Cu();const s=t.path,o=new Da(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ba(ja(o),n)<=0||(r.has(o.key)||Iu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Wa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){la()}Mr(e,t){return Wa.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new np(this)}getSize(e){return Wa.resolve(this.size)}}class np extends Uf{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ur.addEntry(e,r)):this.ur.removeEntry(n)})),Wa.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class rp{constructor(e){this.persistence=e,this.Or=new Tu((e=>ru(e)),iu),this.lastRemoteSnapshotVersion=Ca.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new Xf,this.targetCount=0,this.Br=Tf.Ln()}forEachTarget(e,t){return this.Or.forEach(((e,n)=>t(n))),Wa.resolve()}getLastRemoteSnapshotVersion(e){return Wa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Wa.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Wa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Nr&&(this.Nr=t),Wa.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Tf(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,Wa.resolve()}updateTargetData(e,t){return this.Qn(t),Wa.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,Wa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Or.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Or.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Wa.waitFor(i).next((()=>r))}getTargetCount(e){return Wa.resolve(this.targetCount)}getTargetData(e,t){const n=this.Or.get(t)||null;return Wa.resolve(n)}addMatchingKeys(e,t,n){return this.Lr.Ar(t,n),Wa.resolve()}removeMatchingKeys(e,t,n){this.Lr.Vr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Wa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),Wa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Lr.pr(t);return Wa.resolve(n)}containsKey(e,t){return Wa.resolve(this.Lr.containsKey(t))}}class ip{constructor(e,t){this.kr={},this.overlays={},this.qr=new sl(0),this.Qr=!1,this.Qr=!0,this.Kr=new $f,this.referenceDelegate=e(this),this.$r=new rp(this),this.indexManager=new lf,this.remoteDocumentCache=function(e){return new tp(e)}((e=>this.referenceDelegate.Ur(e))),this.serializer=new Eh(t),this.Wr=new Yf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Jf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.kr[e.toKey()];return n||(n=new ep(t,this.referenceDelegate),this.kr[e.toKey()]=n),n}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,n){ia("MemoryPersistence","Starting transaction:",e);const r=new sp(this.qr.next());return this.referenceDelegate.Gr(),n(r).next((e=>this.referenceDelegate.zr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}jr(e,t){return Wa.or(Object.values(this.kr).map((n=>()=>n.containsKey(e,t))))}}class sp extends Ha{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.Hr=new Xf,this.Jr=null}static Yr(e){return new op(e)}get Zr(){if(this.Jr)return this.Jr;throw la()}addReference(e,t,n){return this.Hr.addReference(n,t),this.Zr.delete(n.toString()),Wa.resolve()}removeReference(e,t,n){return this.Hr.removeReference(n,t),this.Zr.add(n.toString()),Wa.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),Wa.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach((e=>this.Zr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Zr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Gr(){this.Jr=new Set}zr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wa.forEach(this.Zr,(n=>{const r=Da.fromPath(n);return this.Xr(e,r).next((e=>{e||t.removeEntry(r,Ca.min())}))})).next((()=>(this.Jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Xr(e,t).next((e=>{e?this.Zr.delete(t.toString()):this.Zr.add(t.toString())}))}Ur(e){return 0}Xr(e,t){return Wa.or([()=>Wa.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}}class ap{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Ga("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fl,{unique:!0}),e.createObjectStore("documentMutations")}(e),lp(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Wa.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),lp(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ca.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",fl,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Wa.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.ti(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ni(i))))),n<7&&r>=7&&(s=s.next((()=>this.ri(i)))),n<8&&r>=8&&(s=s.next((()=>this.ii(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.si(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Cl});t.createIndex("collectionPathOverlayIndex",Nl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Al,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:vl});t.createIndex("documentKeyIndex",yl),t.createIndex("collectionGroupIndex",wl)}(e))).next((()=>this.oi(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this._i(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Sl}).createIndex("sequenceNumberIndex",xl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Tl}).createIndex("documentKeyIndex",kl,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),n<17&&r>=17&&(s=s.next((()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)}))),s}ni(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=bf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ti(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>Wa.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>Wa.forEach(n,(n=>{ca(n.userId===t.userId);const r=Ch(this.serializer,n);return wf(e,t.userId,r).next((()=>{}))}))))}))))}ri(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new Aa(n),o=function(e){return[0,cl(e)]}(s);r.push(t.get(o).next((n=>n?Wa.resolve():(n=>t.put({targetId:0,path:cl(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Wa.waitFor(r)))}))}ii(e,t){e.createObjectStore("collectionParents",{keyPath:El});const n=t.store("collectionParents"),r=new cf,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:cl(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new Aa(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=hl(r);return i(o.popLast())}))))}si(e){const t=e.store("targets");return t.J(((e,n)=>{const r=Nh(n),i=Ah(this.serializer,r);return t.put(i)}))}oi(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Da(Aa.fromString(e.document.name).popFirst(5)):e.noDocument?Da.fromSegments(e.noDocument.path):e.unknownDocument?Da.fromSegments(e.unknownDocument.path):la()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Wa.waitFor(r)))}_i(e,t){const n=t.store("mutations"),r=jf(this.serializer),i=new ip(op.Yr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Fu();Ch(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Wa.forEach(n,((e,n)=>{const s=new ea(n),o=Uh.lt(this.serializer,s),a=i.getIndexManager(s),l=_f.lt(s,this.serializer,a,i.referenceDelegate);return new Qf(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Ul(t,sl.oe),e).next()}))}))}}function lp(e){e.createObjectStore("targetDocuments",{keyPath:_l}).createIndex("documentTargetsIndex",Il,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bl,{unique:!0}),e.createObjectStore("targetGlobal")}const cp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class up{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ai=i,this.window=s,this.document=o,this.ui=l,this.ci=c,this.li=u,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=e=>Promise.resolve(),!up.D())throw new ha(da.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mf(this,r),this.di=t+"main",this.serializer=new Eh(a),this.Ai=new Qa(this.di,this.li,new ap(this.serializer)),this.Kr=new jh,this.$r=new kf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=jf(this.serializer),this.Wr=new Lh,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,!1===c&&sa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ha(da.FAILED_PRECONDITION,cp);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.$r.getHighestSequenceNumber(e)))})).then((e=>{this.qr=new sl(e,this.ui)})).then((()=>{this.Qr=!0})).catch((e=>(this.Ai&&this.Ai.close(),Promise.reject(e))))}pi(e){return this.Ei=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget((async()=>{this.started&&await this.Vi()})))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>hp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.yi(e).next((e=>{e||(this.isPrimary=!1,this.ai.enqueueRetryable((()=>this.Ei(!1))))}))})).next((()=>this.wi(e))).next((t=>this.isPrimary&&!t?this.Si(e).next((()=>!1)):!!t&&this.bi(e).next((()=>!0)))))).catch((e=>{if(Xa(e))return ia("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ia("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ai.enqueueRetryable((()=>this.Ei(e))),this.isPrimary=e}))}yi(e){return dp(e).get("owner").next((e=>Wa.resolve(this.Di(e))))}Ci(e){return hp(e).delete(this.clientId)}async vi(){if(this.isPrimary&&!this.Fi(this.Ti,18e5)){this.Ti=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Vl(e,"clientMetadata");return t.U().next((e=>{const n=this.Mi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Wa.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ri)for(const t of e)this.Ri.removeItem(this.xi(t.clientId))}}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Vi().then((()=>this.vi())).then((()=>this.gi()))))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?Wa.resolve(!0):dp(e).get("owner").next((t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)){if(this.Di(t)&&this.networkEnabled)return!0;if(!this.Di(t)){if(!t.allowTabSynchronization)throw new ha(da.FAILED_PRECONDITION,cp);return!1}}return!(!this.networkEnabled||!this.inForeground)||hp(e).U().next((e=>void 0===this.Mi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&ia("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.Qr=!1,this.Ni(),this.Ii&&(this.Ii.cancel(),this.Ii=null),this.Li(),this.Bi(),await this.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Ul(e,sl.oe);return this.Si(t).next((()=>this.Ci(t)))})),this.Ai.close(),this.ki()}Mi(e,t){return e.filter((e=>this.Fi(e.updateTimeMs,t)&&!this.Oi(e.clientId)))}qi(){return this.runTransaction("getActiveClients","readonly",(e=>hp(e).U().next((e=>this.Mi(e,18e5).map((e=>e.clientId))))))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,t){return _f.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new df(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Uh.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,t,n){ia("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?Fl:16===e?Ml:15===e?Ll:14===e?Ol:13===e?Dl:12===e?Rl:11===e?Pl:void la()}(this.li);let s;return this.Ai.runTransaction(e,r,i,(r=>(s=new Ul(r,this.qr?this.qr.next():sl.oe),"readwrite-primary"===t?this.yi(s).next((e=>!!e||this.wi(s))).next((t=>{if(!t)throw sa("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ai.enqueueRetryable((()=>this.Ei(!1))),new ha(da.FAILED_PRECONDITION,qa);return n(s)})).next((e=>this.bi(s).next((()=>e)))):this.Qi(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Qi(e){return dp(e).get("owner").next((e=>{if(null!==e&&this.Fi(e.leaseTimestampMs,5e3)&&!this.Oi(e.ownerId)&&!this.Di(e)&&!(this.ci||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ha(da.FAILED_PRECONDITION,cp)}))}bi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dp(e).put("owner",t)}static D(){return Qa.D()}Si(e){const t=dp(e);return t.get("owner").next((e=>this.Di(e)?(ia("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Wa.resolve()))}Fi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(sa("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Pi=()=>{this.ai.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Vi())))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground="visible"===this.document.visibilityState)}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.hi=()=>{this.Ni();const e=/(?:Version|Mobile)\/1[456]/;I()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var t;try{const n=null!==(null===(t=this.Ri)||void 0===t?void 0:t.getItem(this.xi(e)));return ia("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return sa("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(bI){sa("Failed to set zombie client id.",bI)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch(bI){}}xi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function dp(e){return Vl(e,"owner")}function hp(e){return Vl(e,"clientMetadata")}function fp(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class pp{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ki=n,this.$i=r}static Ui(e,t){let n=Fu(),r=Fu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new pp(e,t.fromCache,n,r)}}class mp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gp{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=I()?8:Ya(m())>0?6:4}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Yi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new mp;return this.Zi(e,t,n).next((r=>{if(i.result=r,this.Gi)return this.Xi(e,t,n,r.size)}))})).next((()=>i.result))}Xi(e,t,n,r){return n.documentReadCount<this.zi?(ra()<=B.DEBUG&&ia("QueryEngine","SDK will not create cache indexes for query:",_u(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),Wa.resolve()):(ra()<=B.DEBUG&&ia("QueryEngine","Query:",_u(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ji*r?(ra()<=B.DEBUG&&ia("QueryEngine","The SDK decides to create cache indexes for query:",_u(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mu(t))):Wa.resolve())}Ji(e,t){if(hu(t))return Wa.resolve(null);let n=mu(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=yu(t,null,"F"),n=mu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Fu(...r);return this.Hi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.es(t,r);return this.ts(t,s,i,n.readTime)?this.Ji(e,yu(t,null,"F")):this.ns(e,s,t,n)}))))})))))}Yi(e,t,n,r){return hu(t)||r.isEqual(Ca.min())?Wa.resolve(null):this.Hi.getDocuments(e,n).next((i=>{const s=this.es(t,i);return this.ts(t,s,n,r)?Wa.resolve(null):(ra()<=B.DEBUG&&ia("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_u(t)),this.ns(e,s,t,Va(r,-1)).next((e=>e)))}))}es(e,t){let n=new Wl(Su(e));return t.forEach(((t,r)=>{Iu(e,r)&&(n=n.add(r))})),n}ts(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Zi(e,t,n){return ra()<=B.DEBUG&&ia("QueryEngine","Using full collection scan to execute query:",_u(t)),this.Hi.getDocumentsMatchingQuery(e,t,za.min(),n)}ns(e,t,n,r){return this.Hi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class vp{constructor(e,t,n,r){this.persistence=e,this.rs=t,this.serializer=r,this.ss=new ql(Sa),this.os=new Tu((e=>ru(e)),iu),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(n)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qf(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ss)))}}function yp(e,t,n,r){return new vp(e,t,n,r)}async function wp(e,t){const n=ua(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.cs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Fu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ls:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function bp(e){const t=ua(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.$r.getLastRemoteSnapshotVersion(e)))}function _p(e,t,n){let r=Fu(),i=Fu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Cu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ca.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ia("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{hs:r,Ps:i}}))}function Ip(e,t){const n=ua(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ep(e,t){const n=ua(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.$r.getTargetData(e,t).next((i=>i?(r=i,Wa.resolve(r)):n.$r.allocateTargetId(e).next((i=>(r=new Ih(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.$r.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ss=n.ss.insert(e.targetId,e),n.os.set(t,e.targetId)),e}))}async function Sp(e,t,n){const r=ua(e),i=r.ss.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Xa(e))throw e;ia("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ss=r.ss.remove(t),r.os.delete(i.target)}function xp(e,t,n){const r=ua(e);let i=Ca.min(),s=Fu();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ua(e),i=r.os.get(n);return void 0!==i?Wa.resolve(r.ss.get(i)):r.$r.getTargetData(t,n)}(r,e,mu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.$r.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.rs.getDocumentsMatchingQuery(e,t,n?i:Ca.min(),n?s:Fu()))).next((e=>(Cp(r,Eu(t),e),{documents:e,Is:s})))))}function Tp(e,t){const n=ua(e),r=ua(n.$r),i=n.ss.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function kp(e,t){const n=ua(e),r=n._s.get(t)||Ca.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.us.getAllFromCollectionGroup(e,t,Va(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Cp(n,t,e),e)))}function Cp(e,t,n){let r=e._s.get(t)||Ca.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e._s.set(t,r)}async function Np(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fu();const r=await Ep(e,mu(Ph(t.bundledQuery))),i=ua(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Jd(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Wr.saveNamedQuery(e,t);const o=r.withResumeToken($l.EMPTY_BYTE_STRING,s);return i.ss=i.ss.insert(o.targetId,o),i.$r.updateTargetData(e,o).next((()=>i.$r.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.$r.addMatchingKeys(e,n,r.targetId))).next((()=>i.Wr.saveNamedQuery(e,t)))}))}function Ap(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Pp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Rp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Dp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static As(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ha(r.error.code,r.error.message))),s?new Dp(e,t,r.state,i):(sa("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Op{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static As(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new ha(n.error.code,n.error.message))),i?new Op(e,n.state,r):(sa("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static As(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Vu();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=ll(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Lp(e,i):(sa("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Mp{constructor(e,t){this.clientId=e,this.onlineState=t}static As(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Mp(t.clientId,t.onlineState):(sa("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Fp{constructor(){this.activeTargetIds=Vu()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Up{constructor(e,t,n,r,i){this.window=e,this.ai=t,this.persistenceKey=n,this.gs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new ql(Sa),this.started=!1,this.Ss=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.bs=Ap(this.persistenceKey,this.gs),this.Ds=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ws=this.ws.insert(this.gs,new Fp),this.Cs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.vs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Fs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Ms=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.xs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.qi();for(const n of e){if(n===this.gs)continue;const e=this.getItem(Ap(this.persistenceKey,n));if(e){const t=Lp.As(n,e);t&&(this.ws=this.ws.insert(t.clientId,t))}}this.Os();const t=this.storage.getItem(this.Ms);if(t){const e=this.Ns(t);e&&this.Ls(e)}for(const n of this.Ss)this.ys(n);this.Ss=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let t=!1;return this.ws.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,t,n){this.ks(e,t,n),this.qs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Rp(this.persistenceKey,e));if(n){const r=Op.As(e,n);r&&(t=r.state)}}return this.Qs.Vs(e),this.Os(),t}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rp(this.persistenceKey,e))}updateQueryState(e,t,n){this.Ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.qs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ia("SharedClientState","READ",e,t),t}setItem(e,t){ia("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ia("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){const t=e;if(t.storageArea===this.storage){if(ia("SharedClientState","EVENT",t.key,t.newValue),t.key===this.bs)return void sa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Cs.test(t.key)){if(null==t.newValue){const e=this.Ws(t.key);return this.Gs(e,null)}{const e=this.zs(t.key,t.newValue);if(e)return this.Gs(e.clientId,e)}}else if(this.vs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(this.Fs.test(t.key)){if(null!==t.newValue){const e=this.Js(t.key,t.newValue);if(e)return this.Ys(e)}}else if(t.key===this.Ms){if(null!==t.newValue){const e=this.Ns(t.newValue);if(e)return this.Ls(e)}}else if(t.key===this.Ds){const e=function(e){let t=sl.oe;if(null!=e)try{const n=JSON.parse(e);ca("number"==typeof n),t=n}catch(e){sa("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==sl.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.xs){const e=this.Zs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Xs(e))))}}else this.Ss.push(t)}))}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,t,n){const r=new Dp(this.currentUser,e,t,n),i=Pp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Rs())}qs(e){const t=Pp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}$s(e){const t={clientId:this.gs,onlineState:e};this.storage.setItem(this.Ms,JSON.stringify(t))}Ks(e,t,n){const r=Rp(this.persistenceKey,e),i=new Op(e,t,n);this.setItem(r,i.Rs())}Us(e){const t=JSON.stringify(Array.from(e));this.setItem(this.xs,t)}Ws(e){const t=this.Cs.exec(e);return t?t[1]:null}zs(e,t){const n=this.Ws(e);return Lp.As(n,t)}js(e,t){const n=this.vs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Dp.As(new ea(i),r,t)}Js(e,t){const n=this.Fs.exec(e),r=Number(n[1]);return Op.As(r,t)}Ns(e){return Mp.As(e)}Zs(e){return JSON.parse(e)}async Hs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.eo(e.batchId,e.state,e.error);ia("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,t){const n=t?this.ws.insert(e,t):this.ws.remove(e),r=this.Bs(this.ws),i=this.Bs(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.ro(s,o).then((()=>{this.ws=n}))}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let t=Vu();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Vp{constructor(){this.io=new Fp,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,n){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new Fp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jp{oo(e){}shutdown(){}}class zp{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){ia("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){ia("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Bp=null;function qp(){return null===Bp?Bp=268435456+Math.round(2147483648*Math.random()):Bp++,"0x"+Bp.toString(16)}const Hp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kp{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}const Wp="WebChannelConnection";class Gp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.bo=t+"://"+e.host,this.Do="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get vo(){return!1}Fo(e,t,n,r,i){const s=qp(),o=this.Mo(e,t.toUriEncodedString());ia("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(a,r,i),this.Oo(e,o,a,n).then((t=>(ia("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw oa("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}No(e,t,n,r,i,s){return this.Fo(e,t,n,r,i)}xo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ta,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Mo(e,t){const n=Hp[e];return"".concat(this.bo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,n,r){const i=qp();return new Promise(((s,o)=>{const a=new Bo;a.setWithCredentials(!0),a.listenOnce(Ko.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Wo.NO_ERROR:const t=a.getResponseJson();ia(Wp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Wo.TIMEOUT:ia(Wp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ha(da.DEADLINE_EXCEEDED,"Request time out"));break;case Wo.HTTP_ERROR:const n=a.getStatus();if(ia(Wp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(da).indexOf(t)>=0?t:da.UNKNOWN}(t.status);o(new ha(e,t.message))}else o(new ha(da.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ha(da.UNAVAILABLE,"Connection failed."));break;default:la()}}finally{ia(Wp,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);ia(Wp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Lo(e,t,n){const r=qp(),i=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Jo(),o=Yo(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new qo({})),this.xo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");ia(Wp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const f=new Kp({Po:t=>{h?ia(Wp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(ia(Wp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),ia(Wp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Io:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ho.EventType.OPEN,(()=>{h||(ia(Wp,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.po())})),p(u,Ho.EventType.CLOSE,(()=>{h||(h=!0,ia(Wp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(u,Ho.EventType.ERROR,(t=>{h||(h=!0,oa(Wp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new ha(da.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ho.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];ca(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ia(Wp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Id[e];if(void 0!==t)return xd(t)}(t),i=o.message;void 0===n&&(n=da.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.wo(new ha(n,i)),u.close()}else ia(Wp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.So(i)}})),p(o,Qo.STAT_EVENT,(t=>{t.stat===Go.PROXY?ia(Wp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Go.NOPROXY&&ia(Wp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.yo()}),0),f}}function Qp(){return"undefined"!=typeof window?window:null}function Yp(){return"undefined"!=typeof document?document:null}function Jp(e){return new Kd(e,!0)}class $p{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ai=e,this.timerId=t,this.Bo=n,this.ko=r,this.qo=i,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const t=Math.floor(this.Qo+this.Go()),n=Math.max(0,Date.now()-this.$o),r=Math.max(0,t-n);r>0&&ia("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Qo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Ko=this.ai.enqueueAfterDelay(this.timerId,r,(()=>(this.$o=Date.now(),e()))),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){null!==this.Ko&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){null!==this.Ko&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}class Xp{constructor(e,t,n,r,i,s,o,a){this.ai=e,this.jo=n,this.Ho=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new $p(e,t)}t_(){return 1===this.state||5===this.state||this.n_()}n_(){return 2===this.state||3===this.state}start(){this.Xo=0,4!==this.state?this.auth():this.r_()}async stop(){this.t_()&&await this.close(0)}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&null===this.Yo&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,(()=>this.o_())))}__(e){this.a_(),this.stream.send(e)}async o_(){if(this.n_())return this.close(0)}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}async close(e,t){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,4!==e?this.e_.reset():t&&t.code===da.RESOURCE_EXHAUSTED?(sa(t.toString()),sa("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):t&&t.code===da.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Vo(t)}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Jo===t&&this.h_(n,r)}),(t=>{e((()=>{const e=new ha(da.UNKNOWN,"Fetching auth token failed: "+t.message);return this.P_(e)}))}))}h_(e,t){const n=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To((()=>{n((()=>this.listener.To()))})),this.stream.Ao((()=>{n((()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,(()=>(this.n_()&&(this.state=3),Promise.resolve()))),this.listener.Ao())))})),this.stream.Vo((e=>{n((()=>this.P_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.Xo?this.T_(e):this.onNext(e)))}))}r_(){this.state=5,this.e_.Wo((async()=>{this.state=0,this.start()}))}P_(e){return ia("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget((()=>this.Jo===e?t():(ia("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Zp extends Xp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:la()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ca(void 0===t||"string"==typeof t),$l.fromBase64String(t||"")):(ca(void 0===t||t instanceof Buffer||t instanceof Uint8Array),$l.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?da.UNKNOWN:xd(e.code);return new ha(t,e.message||"")}(o);n=new Fd(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=th(e,r.document.name),s=Jd(r.document.updateTime),o=r.document.createTime?Jd(r.document.createTime):Ca.min(),a=new Cc({mapValue:{fields:r.document.fields}}),l=Ac.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ld(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=th(e,r.document),s=r.readTime?Jd(r.readTime):Ca.min(),o=Ac.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ld([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=th(e,r.document),s=r.removedTargetIds||[];n=new Ld([],s,i,null)}else{if(!("filter"in t))return la();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new _d(r,i),o=e.targetId;n=new Md(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ca.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ca.min():t.readTime?Jd(t.readTime):Ca.min()}(e);return this.listener.E_(t,n)}d_(e){const t={};t.database=ih(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=su(r)?{documents:uh(e,r)}:{query:dh(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Qd(e,t.resumeToken);const r=Wd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ca.min())>0){n.readTime=Gd(e,t.snapshotVersion.toTimestamp());const r=Wd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return la()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.__(t)}A_(e){const t={};t.database=ih(this.serializer),t.removeTarget=e,this.__(t)}}class em extends Xp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return ca(!!e.streamToken),this.lastStreamToken=e.streamToken,ca(!e.writeResults||0===e.writeResults.length),this.listener.m_()}onNext(e){ca(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const t=function(e,t){return e&&e.length>0?(ca(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Jd(e.updateTime):Jd(t);return n.isEqual(Ca.min())&&(n=Jd(t)),new nd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Jd(e.commitTime);return this.listener.f_(n,t)}g_(){const e={};e.database=ih(this.serializer),this.__(e)}V_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>lh(this.serializer,e)))};this.__(t)}}class tm extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.p_=!1}y_(){if(this.p_)throw new ha(da.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,n,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Fo(e,Xd(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===da.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ha(da.UNKNOWN,e.toString())}))}No(e,t,n,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.No(e,Xd(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===da.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ha(da.UNKNOWN,e.toString())}))}terminate(){this.p_=!0,this.connection.terminate()}}class nm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){0===this.w_&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}F_(e){"Online"===this.state?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.M_(),this.w_=0,"Online"===e&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.b_?(sa(t),this.b_=!1):ia("OnlineStateTracker",t)}M_(){null!==this.S_&&(this.S_.cancel(),this.S_=null)}}class rm{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=i,this.B_.oo((e=>{n.enqueueAndForget((async()=>{hm(this)&&(ia("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ua(e);t.N_.add(4),await sm(t),t.k_.set("Unknown"),t.N_.delete(4),await im(t)}(this))}))})),this.k_=new nm(n,r)}}async function im(e){if(hm(e))for(const t of e.L_)await t(!0)}async function sm(e){for(const t of e.L_)await t(!1)}function om(e,t){const n=ua(e);n.O_.has(t.targetId)||(n.O_.set(t.targetId,t),dm(n)?um(n):Pm(n).n_()&&lm(n,t))}function am(e,t){const n=ua(e),r=Pm(n);n.O_.delete(t),r.n_()&&cm(n,t),0===n.O_.size&&(r.n_()?r.s_():hm(n)&&n.k_.set("Unknown"))}function lm(e,t){if(e.q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ca.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Pm(e).d_(t)}function cm(e,t){e.q_.xe(t),Pm(e).A_(t)}function um(e){e.q_=new Vd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.O_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Pm(e).start(),e.k_.D_()}function dm(e){return hm(e)&&!Pm(e).t_()&&e.O_.size>0}function hm(e){return 0===ua(e).N_.size}function fm(e){e.q_=void 0}async function pm(e){e.k_.set("Online")}async function mm(e){e.O_.forEach(((t,n)=>{lm(e,t)}))}async function gm(e,t){fm(e),dm(e)?(e.k_.F_(t),um(e)):e.k_.set("Unknown")}async function vm(e,t,n){if(e.k_.set("Online"),t instanceof Fd&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.O_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.O_.delete(r),e.q_.removeTarget(r))}(e,t)}catch(n){ia("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ym(e,n)}else if(t instanceof Ld?e.q_.Ke(t):t instanceof Md?e.q_.He(t):e.q_.We(t),!n.isEqual(Ca.min()))try{const t=await bp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.q_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.O_.get(r);i&&e.O_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.O_.get(t);if(!r)return;e.O_.set(t,r.withResumeToken($l.EMPTY_BYTE_STRING,r.snapshotVersion)),cm(e,t);const i=new Ih(r.target,t,n,r.sequenceNumber);lm(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ia("RemoteStore","Failed to raise snapshot:",t),await ym(e,t)}}async function ym(e,t,n){if(!Xa(t))throw t;e.N_.add(1),await sm(e),e.k_.set("Offline"),n||(n=()=>bp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ia("RemoteStore","Retrying IndexedDB access"),await n(),e.N_.delete(1),await im(e)}))}function wm(e,t){return t().catch((n=>ym(e,n,t)))}async function bm(e){const t=ua(e),n=Rm(t);let r=t.x_.length>0?t.x_[t.x_.length-1].batchId:-1;for(;_m(t);)try{const e=await Ip(t.localStore,r);if(null===e){0===t.x_.length&&n.s_();break}r=e.batchId,Im(t,e)}catch(e){await ym(t,e)}Em(t)&&Sm(t)}function _m(e){return hm(e)&&e.x_.length<10}function Im(e,t){e.x_.push(t);const n=Rm(e);n.n_()&&n.R_&&n.V_(t.mutations)}function Em(e){return hm(e)&&!Rm(e).t_()&&e.x_.length>0}function Sm(e){Rm(e).start()}async function xm(e){Rm(e).g_()}async function Tm(e){const t=Rm(e);for(const n of e.x_)t.V_(n.mutations)}async function km(e,t,n){const r=e.x_.shift(),i=wd.from(r,t,n);await wm(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await bm(e)}async function Cm(e,t){t&&Rm(e).R_&&await async function(e,t){if(function(e){return Sd(e)&&e!==da.ABORTED}(t.code)){const n=e.x_.shift();Rm(e).i_(),await wm(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await bm(e)}}(e,t),Em(e)&&Sm(e)}async function Nm(e,t){const n=ua(e);n.asyncQueue.verifyOperationInProgress(),ia("RemoteStore","RemoteStore received new credentials");const r=hm(n);n.N_.add(3),await sm(n),r&&n.k_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.N_.delete(3),await im(n)}async function Am(e,t){const n=ua(e);t?(n.N_.delete(2),await im(n)):t||(n.N_.add(2),await sm(n),n.k_.set("Unknown"))}function Pm(e){return e.Q_||(e.Q_=function(e,t,n){const r=ua(e);return r.y_(),new Zp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{To:pm.bind(null,e),Ao:mm.bind(null,e),Vo:gm.bind(null,e),E_:vm.bind(null,e)}),e.L_.push((async t=>{t?(e.Q_.i_(),dm(e)?um(e):e.k_.set("Unknown")):(await e.Q_.stop(),fm(e))}))),e.Q_}function Rm(e){return e.K_||(e.K_=function(e,t,n){const r=ua(e);return r.y_(),new em(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{To:()=>Promise.resolve(),Ao:xm.bind(null,e),Vo:Cm.bind(null,e),m_:Tm.bind(null,e),f_:km.bind(null,e)}),e.L_.push((async t=>{t?(e.K_.i_(),await bm(e)):(await e.K_.stop(),e.x_.length>0&&(ia("RemoteStore","Stopping write stream with ".concat(e.x_.length," pending writes")),e.x_=[]))}))),e.K_}class Dm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Dm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ha(da.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Om(e,t){if(sa("AsyncQueue","".concat(t,": ").concat(e)),Xa(e))return new ha(da.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Lm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Da.comparator(t.key,n.key):(e,t)=>Da.comparator(e.key,t.key),this.keyedMap=Au(),this.sortedSet=new ql(this.comparator)}static emptySet(e){return new Lm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Lm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Lm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Mm{constructor(){this.U_=new ql(Da.comparator)}track(e){const t=e.doc.key,n=this.U_.get(t);n?0!==e.type&&3===n.type?this.U_=this.U_.insert(t,e):3===e.type&&1!==n.type?this.U_=this.U_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.U_=this.U_.remove(t):1===e.type&&2===n.type?this.U_=this.U_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):la():this.U_=this.U_.insert(t,e)}W_(){const e=[];return this.U_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Fm{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Fm(e,t,Lm.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Um{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some((e=>e.H_()))}}class Vm{constructor(){this.queries=jm(),this.onlineState="Unknown",this.J_=new Set}terminate(){!function(e,t){const n=ua(e),r=n.queries;n.queries=jm(),r.forEach(((e,n)=>{for(const r of n.z_)r.onError(t)}))}(this,new ha(da.ABORTED,"Firestore shutting down"))}}function jm(){return new Tu((e=>bu(e)),wu)}async function zm(e,t){const n=ua(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.j_()&&t.H_()&&(r=2):(s=new Um,r=t.H_()?0:1);try{switch(r){case 0:s.G_=await n.onListen(i,!0);break;case 1:s.G_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Om(e,"Initialization of query '".concat(_u(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.z_.push(t),t.Y_(n.onlineState),s.G_&&t.Z_(s.G_)&&Km(n)}async function Bm(e,t){const n=ua(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.z_.indexOf(t);e>=0&&(s.z_.splice(e,1),0===s.z_.length?i=t.H_()?0:1:!s.j_()&&t.H_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qm(e,t){const n=ua(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.z_)e.Z_(i)&&(r=!0);t.G_=i}}r&&Km(n)}function Hm(e,t,n){const r=ua(e),i=r.queries.get(t);if(i)for(const s of i.z_)s.onError(n);r.queries.delete(t)}function Km(e){e.J_.forEach((e=>{e.next()}))}var Wm,Gm;(Gm=Wm||(Wm={})).X_="default",Gm.Cache="cache";class Qm{constructor(e,t,n){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=n||{}}Z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Fm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){if(!e.fromCache)return!0;if(!this.H_())return!0;const n="Offline"!==t;return(!this.options.oa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ra(e){if(e.docChanges.length>0)return!0;const t=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}sa(e){e=Fm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==Wm.Cache}}class Ym{constructor(e,t){this._a=e,this.byteLength=t}aa(){return"metadata"in this._a}}class Jm{constructor(e){this.serializer=e}Ts(e){return th(this.serializer,e)}Es(e){return e.metadata.exists?ah(this.serializer,e.document,!1):Ac.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return Jd(e)}}class $m{constructor(e,t,n){this.ua=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Xm(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++t;const n=Aa.fromString(e._a.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}la(e){const t=new Map,n=new Jm(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ts(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Fu()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ua(e);let s=Fu(),o=Cu();for(const c of n){const e=t.Ts(c.metadata.name);c.document&&(s=s.add(e));const n=t.Es(c);n.setReadTime(t.ds(c.metadata.readTime)),o=o.insert(e,n)}const a=i.us.newChangeBuffer({trackRemovals:!0}),l=await Ep(i,function(e){return mu(du(Aa.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>_p(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.$r.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.$r.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.hs,t.Ps))).next((()=>t.hs))))))}(this.localStore,new Jm(this.serializer),this.documents,this.ua.id),t=this.la(this.documents);for(const n of this.queries)await Np(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ha:this.collectionGroups,Pa:e}}}function Xm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Zm{constructor(e){this.key=e}}class eg{constructor(e){this.key=e}}class tg{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=Fu(),this.mutatedKeys=Fu(),this.da=Su(e),this.Aa=new Lm(this.da)}get Ra(){return this.Ia}Va(e,t){const n=t?t.ma:new Mm,r=t?t.Aa:this.Aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Iu(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.fa(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.da(u,a)>0||l&&this.da(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Aa:s,ma:n,ts:o,mutatedKeys:i}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const s=e.ma.W_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return la()}};return n(e)-n(t)}(e.type,t.type)||this.da(e.doc,t.doc))),this.ga(n),r=null!=r&&r;const o=t&&!r?this.pa():[],a=0===this.Ea.size&&this.current&&!r?1:0,l=a!==this.Ta;return this.Ta=a,0!==s.length||l?{snapshot:new Fm(this.query,e.Aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ya:o}:{ya:o}}Y_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Mm,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach((e=>this.Ia=this.Ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Ia=this.Ia.delete(e))),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=Fu(),this.Aa.forEach((e=>{this.wa(e.key)&&(this.Ea=this.Ea.add(e.key))}));const t=[];return e.forEach((e=>{this.Ea.has(e)||t.push(new eg(e))})),this.Ea.forEach((n=>{e.has(n)||t.push(new Zm(n))})),t}Sa(e){this.Ia=e.Is,this.Ea=Fu();const t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return Fm.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,0===this.Ta,this.hasCachedResults)}}class ng{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class rg{constructor(e){this.key=e,this.Da=!1}}class ig{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.va=new Tu((e=>bu(e)),wu),this.Fa=new Map,this.Ma=new Set,this.xa=new ql(Da.comparator),this.Oa=new Map,this.Na=new Xf,this.La={},this.Ba=new Map,this.ka=Tf.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return!0===this.qa}}async function sg(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Og(e);let i;const s=r.va.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ba()):i=await ag(r,t,n,!0),i}async function og(e,t){const n=Og(e);await ag(n,t,!0,!1)}async function ag(e,t,n,r){const i=await Ep(e.localStore,mu(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await lg(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&om(e.remoteStore,i),a}async function lg(e,t,n,r,i){e.Qa=(t,n,r)=>async function(e,t,n,r){let i=t.view.Va(n);i.ts&&(i=await xp(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Va(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return bg(e,t.targetId,a.ya),a.snapshot}(e,t,n,r);const s=await xp(e.localStore,t,!0),o=new tg(t,s.Is),a=o.Va(s.documents),l=Od.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);bg(e,n,c.ya);const u=new ng(t,n,o);return e.va.set(t,u),e.Fa.has(n)?e.Fa.get(n).push(t):e.Fa.set(n,[t]),c.snapshot}async function cg(e,t,n){const r=ua(e),i=r.va.get(t),s=r.Fa.get(i.targetId);if(s.length>1)return r.Fa.set(i.targetId,s.filter((e=>!wu(e,t)))),void r.va.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&am(r.remoteStore,i.targetId),yg(r,i.targetId)})).catch(Ka)):(yg(r,i.targetId),await Sp(r.localStore,i.targetId,!0))}async function ug(e,t){const n=ua(e),r=n.va.get(t),i=n.Fa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),am(n.remoteStore,r.targetId))}async function dg(e,t){const n=ua(e);try{const e=await function(e,t){const n=ua(e),r=t.snapshotVersion;let i=n.ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.us.newChangeBuffer({trackRemovals:!0});i=n.ss;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.$r.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.$r.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken($l.EMPTY_BYTE_STRING,Ca.min()).withLastLimboFreeSnapshotVersion(Ca.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.$r.updateTargetData(e,c))}));let a=Cu(),l=Fu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(_p(e,s,t.documentUpdates).next((e=>{a=e.hs,l=e.Ps}))),!r.isEqual(Ca.min())){const t=n.$r.getLastRemoteSnapshotVersion(e).next((t=>n.$r.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Wa.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ss=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Oa.get(t);r&&(ca(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Da=!0:e.modifiedDocuments.size>0?ca(r.Da):e.removedDocuments.size>0&&(ca(r.Da),r.Da=!1))})),await Eg(n,e,t)}catch(e){await Ka(e)}}function hg(e,t,n){const r=ua(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.va.forEach(((n,r)=>{const i=r.view.Y_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ua(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.z_)i.Y_(t)&&(r=!0)})),r&&Km(n)}(r.eventManager,t),e.length&&r.Ca.E_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function fg(e,t,n){const r=ua(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Oa.get(t),s=i&&i.key;if(s){let e=new ql(Da.comparator);e=e.insert(s,Ac.newNoDocument(s,Ca.min()));const n=Fu().add(s),i=new Dd(Ca.min(),new Map,new ql(Sa),e,n);await dg(r,i),r.xa=r.xa.remove(s),r.Oa.delete(t),Ig(r)}else await Sp(r.localStore,t,!1).then((()=>yg(r,t,n))).catch(Ka)}async function pg(e,t){const n=ua(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ua(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.us.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Wa.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);ca(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Fu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);vg(n,r,null),gg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Eg(n,e)}catch(e){await Ka(e)}}async function mg(e,t,n){const r=ua(e);try{const e=await function(e,t){const n=ua(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(ca(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);vg(r,t,n),gg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Eg(r,e)}catch(n){await Ka(n)}}function gg(e,t){(e.Ba.get(t)||[]).forEach((e=>{e.resolve()})),e.Ba.delete(t)}function vg(e,t,n){const r=ua(e);let i=r.La[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.La[r.currentUser.toKey()]=i}}function yg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Fa.get(t))e.va.delete(r),n&&e.Ca.Ka(r,n);e.Fa.delete(t),e.isPrimaryClient&&e.Na.mr(t).forEach((t=>{e.Na.containsKey(t)||wg(e,t)}))}function wg(e,t){e.Ma.delete(t.path.canonicalString());const n=e.xa.get(t);null!==n&&(am(e.remoteStore,n),e.xa=e.xa.remove(t),e.Oa.delete(n),Ig(e))}function bg(e,t,n){for(const r of n)r instanceof Zm?(e.Na.addReference(r.key,t),_g(e,r)):r instanceof eg?(ia("SyncEngine","Document no longer in limbo: "+r.key),e.Na.removeReference(r.key,t),e.Na.containsKey(r.key)||wg(e,r.key)):la()}function _g(e,t){const n=t.key,r=n.path.canonicalString();e.xa.get(n)||e.Ma.has(r)||(ia("SyncEngine","New document in limbo: "+n),e.Ma.add(r),Ig(e))}function Ig(e){for(;e.Ma.size>0&&e.xa.size<e.maxConcurrentLimboResolutions;){const t=e.Ma.values().next().value;e.Ma.delete(t);const n=new Da(Aa.fromString(t)),r=e.ka.next();e.Oa.set(r,new rg(n)),e.xa=e.xa.insert(n,r),om(e.remoteStore,new Ih(mu(du(n.path)),r,"TargetPurposeLimboResolution",sl.oe))}}async function Eg(e,t,n){const r=ua(e),i=[],s=[],o=[];r.va.isEmpty()||(r.va.forEach(((e,a)=>{o.push(r.Qa(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=pp.Ui(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Ca.E_(i),await async function(e,t){const n=ua(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Wa.forEach(t,(t=>Wa.forEach(t.Ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Wa.forEach(t.$i,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Xa(e))throw e;ia("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ss.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ss=n.ss.insert(e,i)}}}(r.localStore,s))}async function Sg(e,t){const n=ua(e);if(!n.currentUser.isEqual(t)){ia("SyncEngine","User change. New user:",t.toKey());const e=await wp(n.localStore,t);n.currentUser=t,function(e,t){e.Ba.forEach((e=>{e.forEach((e=>{e.reject(new ha(da.CANCELLED,t))}))})),e.Ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Eg(n,e.ls)}}function xg(e,t){const n=ua(e),r=n.Oa.get(t);if(r&&r.Da)return Fu().add(r.key);{let e=Fu();const r=n.Fa.get(t);if(!r)return e;for(const t of r){const r=n.va.get(t);e=e.unionWith(r.view.Ra)}return e}}async function Tg(e,t){const n=ua(e),r=await xp(n.localStore,t.query,!0),i=t.view.Sa(r);return n.isPrimaryClient&&bg(n,t.targetId,i.ya),i}async function kg(e,t){const n=ua(e);return kp(n.localStore,t).then((e=>Eg(n,e)))}async function Cg(e,t,n,r){const i=ua(e),s=await function(e,t){const n=ua(e),r=ua(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Fn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Wa.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await bm(i.remoteStore):"acknowledged"===n||"rejected"===n?(vg(i,t,r||null),gg(i,t),function(e,t){ua(ua(e).mutationQueue).xn(t)}(i.localStore,t)):la(),await Eg(i,s)):ia("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Ng(e,t,n){const r=ua(e),i=[],s=[];for(const o of t){let e;const t=r.Fa.get(o);if(t&&0!==t.length){e=await Ep(r.localStore,mu(t[0]));for(const e of t){const t=r.va.get(e),n=await Tg(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Tp(r.localStore,o);e=await Ep(r.localStore,t),await lg(r,Ag(t),o,!1,e.resumeToken)}i.push(e)}return r.Ca.E_(s),i}function Ag(e){return uu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Pg(e){return function(e){return ua(ua(e).persistence).qi()}(ua(e).localStore)}async function Rg(e,t,n,r){const i=ua(e);if(i.qa)return void ia("SyncEngine","Ignoring unexpected query state notification.");const s=i.Fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await kp(i.localStore,Eu(s[0])),r=Dd.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,$l.EMPTY_BYTE_STRING);await Eg(i,e,r);break}case"rejected":await Sp(i.localStore,t,!0),yg(i,t,r);break;default:la()}}async function Dg(e,t,n){const r=Og(e);if(r.qa){for(const e of t){if(r.Fa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){ia("SyncEngine","Adding an already active target "+e);continue}const t=await Tp(r.localStore,e),n=await Ep(r.localStore,t);await lg(r,Ag(t),n.targetId,!1,n.resumeToken),om(r.remoteStore,n)}for(const e of n)r.Fa.has(e)&&await Sp(r.localStore,e,!1).then((()=>{am(r.remoteStore,e),yg(r,e)})).catch(Ka)}}function Og(e){const t=ua(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fg.bind(null,t),t.Ca.E_=qm.bind(null,t.eventManager),t.Ca.Ka=Hm.bind(null,t.eventManager),t}function Lg(e){const t=ua(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mg.bind(null,t),t}class Mg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Jp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return yp(this.persistence,new gp,e.initialUser,this.serializer)}createPersistence(e){return new ip(op.Yr,this.serializer)}createSharedClientState(e){return new Vp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fg extends Mg{constructor(e,t,n){super(),this.Ua=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ua.initialize(this,e),await Lg(this.Ua.syncEngine),await bm(this.Ua.remoteStore),await this.persistence.pi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return yp(this.persistence,new gp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Df(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new il(t,this.persistence);return new rl(e.asyncQueue,n)}createPersistence(e){const t=fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?yf.withCacheSize(this.cacheSizeBytes):yf.DEFAULT;return new up(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Qp(),Yp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Vp}}class Ug extends Fg{constructor(e,t){super(e,t,!1),this.Ua=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ua.syncEngine;this.sharedClientState instanceof Up&&(this.sharedClientState.syncEngine={eo:Cg.bind(null,t),no:Rg.bind(null,t),ro:Dg.bind(null,t),qi:Pg.bind(null,t),Xs:kg.bind(null,t)},await this.sharedClientState.start()),await this.persistence.pi((async e=>{await async function(e,t){const n=ua(e);if(Og(n),Lg(n),!0===t&&!0!==n.qa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Ng(n,e.toArray());n.qa=!0,await Am(n.remoteStore,!0);for(const r of t)om(n.remoteStore,r)}else if(!1===t&&!1!==n.qa){const e=[];let t=Promise.resolve();n.Fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(yg(n,i),Sp(n.localStore,i,!0)))),am(n.remoteStore,i)})),await t,await Ng(n,e),function(e){const t=ua(e);t.Oa.forEach(((e,n)=>{am(t.remoteStore,n)})),t.Na.gr(),t.Oa=new Map,t.xa=new ql(Da.comparator)}(n),n.qa=!1,await Am(n.remoteStore,!1)}}(this.Ua.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Qp();if(!Up.D(t))throw new ha(da.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=fp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Up(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Vg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>hg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Sg.bind(null,this.syncEngine),await Am(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Vm}createDatastore(e){const t=Jp(e.databaseInfo.databaseId),n=function(e){return new Gp(e)}(e.databaseInfo);return function(e,t,n,r){return new tm(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new rm(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>hg(this.syncEngine,e,0)),zp.D()?new zp:new jp)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new ig(e,t,n,r,i,s);return o&&(a.qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ua(e);ia("RemoteStore","RemoteStore shutting down."),t.N_.add(5),await sm(t),t.B_.shutdown(),t.k_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function jg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class zg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):sa("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Bg{constructor(e,t){this.za=e,this.serializer=t,this.metadata=new fa,this.buffer=new Uint8Array,this.ja=new TextDecoder("utf-8"),this.Ha().then((e=>{e&&e.aa()?this.metadata.resolve(e._a.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e._a))))}),(e=>this.metadata.reject(e)))}close(){return this.za.cancel()}async getMetadata(){return this.metadata.promise}async $a(){return await this.getMetadata(),this.Ha()}async Ha(){const e=await this.Ja();if(null===e)return null;const t=this.ja.decode(e),n=Number(t);isNaN(n)&&this.Ya("length string (".concat(t,") is not valid number"));const r=await this.Za(n);return new Ym(JSON.parse(r),e.length+n)}Xa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ja(){for(;this.Xa()<0&&!await this.eu(););if(0===this.buffer.length)return null;const e=this.Xa();e<0&&this.Ya("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Za(e){for(;this.buffer.length<e;)await this.eu()&&this.Ya("Reached the end of bundle when more is expected.");const t=this.ja.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ya(e){throw this.za.cancel(),new Error("Invalid bundle format: ".concat(e))}async eu(){const e=await this.za.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class qg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ha(da.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=ua(e),r={documents:t.map((e=>eh(n.serializer,e)))},i=await n.No("BatchGetDocuments",n.serializer.databaseId,Aa.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){ca(!!t.found),t.found.name,t.found.updateTime;const n=th(e,t.found.name),r=Jd(t.found.updateTime),i=t.found.createTime?Jd(t.found.createTime):Ca.min(),s=new Cc({mapValue:{fields:t.found.fields}});return Ac.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){ca(!!t.missing),ca(!!t.readTime);const n=th(e,t.missing),r=Jd(t.readTime);return Ac.newNoDocument(n,r)}(e,t):la()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());ca(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new gd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Da.fromPath(t);this.mutations.push(new vd(n,this.precondition(n)))})),await async function(e,t){const n=ua(e),r={writes:t.map((e=>lh(n.serializer,e)))};await n.Fo("Commit",n.serializer.databaseId,Aa.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw la();t=Ca.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ha(da.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ca.min())?rd.exists(!1):rd.updateTime(t):rd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ca.min()))throw new ha(da.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rd.updateTime(t)}return rd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Hg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.tu=n.maxAttempts,this.e_=new $p(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){this.e_.Wo((async()=>{const e=new qg(this.datastore),t=this.iu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.su(e)}))))})).catch((e=>{this.su(e)}))}))}iu(e){try{const t=this.updateFunction(e);return!ol(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget((()=>(this.ru(),Promise.resolve())))):this.deferred.reject(e)}ou(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Sd(t)}return!1}}class Kg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ea.UNAUTHENTICATED,this.clientId=Ea.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{ia("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ia("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ha(da.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Om(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Wg(e,t){e.asyncQueue.verifyOperationInProgress(),ia("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await wp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Gg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Yg(e);ia("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Nm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Nm(t.remoteStore,n))),e._onlineComponents=t}function Qg(e){return"FirebaseError"===e.name?e.code===da.FAILED_PRECONDITION||e.code===da.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Yg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ia("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Qg(n))throw n;oa("Error using user provided cache. Falling back to memory cache: "+n),await Wg(e,new Mg)}}else ia("FirestoreClient","Using default OfflineComponentProvider"),await Wg(e,new Mg);return e._offlineComponents}async function Jg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ia("FirestoreClient","Using user provided OnlineComponentProvider"),await Gg(e,e._uninitializedComponentsProvider._online)):(ia("FirestoreClient","Using default OnlineComponentProvider"),await Gg(e,new Vg))),e._onlineComponents}function $g(e){return Yg(e).then((e=>e.persistence))}function Xg(e){return Yg(e).then((e=>e.localStore))}function Zg(e){return Jg(e).then((e=>e.remoteStore))}function ev(e){return Jg(e).then((e=>e.syncEngine))}function tv(e){return Jg(e).then((e=>e.datastore))}async function nv(e){const t=await Jg(e),n=t.eventManager;return n.onListen=sg.bind(null,t.syncEngine),n.onUnlisten=cg.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=og.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ug.bind(null,t.syncEngine),n}function rv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new fa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new zg({next:s=>{t.enqueueAndForget((()=>Bm(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new ha(da.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new ha(da.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Qm(du(n.path),s,{includeMetadataChanges:!0,oa:!0});return zm(e,o)}(await nv(e),e.asyncQueue,t,n,r))),r.promise}function iv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new fa;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new zg({next:n=>{t.enqueueAndForget((()=>Bm(e,o))),n.fromCache&&"server"===r.source?i.reject(new ha(da.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Qm(n,s,{includeMetadataChanges:!0,oa:!0});return zm(e,o)}(await nv(e),e.asyncQueue,t,n,r))),r.promise}function sv(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?kd().encode(e):e,function(e,t){return new Bg(e,t)}(function(e,t){if(e instanceof Uint8Array)return jg(e,t);if(e instanceof ArrayBuffer)return jg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Jp(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ua(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ua(e),r=Jd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Wr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Xm(r));const i=new $m(r,e.localStore,t.serializer);let s=await t.$a();for(;s;){const e=await i.ca(s);e&&n._updateProgress(e),s=await t.$a()}const o=await i.complete();return await Eg(e,o.Pa,void 0),await function(e,t){const n=ua(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Wr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ha)}catch(e){return oa("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await ev(e),i,r)}))}function ov(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const av=new Map;function lv(e,t,n){if(!n)throw new ha(da.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function cv(e,t,n,r){if(!0===t&&!0===r)throw new ha(da.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function uv(e){if(!Da.isDocumentKey(e))throw new ha(da.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function dv(e){if(Da.isDocumentKey(e))throw new ha(da.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":la()}function fv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ha(da.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hv(e);throw new ha(da.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function pv(e,t){if(t<=0)throw new ha(da.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class mv{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ha(da.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ha(da.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ov(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ha(da.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ha(da.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ha(da.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ha(da.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ha(da.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ma;switch(e.type){case"firstParty":return new wa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ha(da.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=av.get(e);t&&(ia("ComponentProvider","Removing Datastore"),av.delete(e),t.terminate())}(this),Promise.resolve()}}function vv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=fv(e,gv))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ea.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ha(da.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ea(s)}e._authCredentials=new ga(new pa(t,n))}}class yv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new yv(this.firestore,e,this._query)}}class wv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wv(this.firestore,e,this._key)}}class bv extends yv{constructor(e,t,n){super(e,t,du(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wv(this.firestore,null,new Da(e))}withConverter(e){return new bv(this.firestore,e,this._path)}}function _v(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=M(e),lv("collection","path",t),e instanceof gv){const n=Aa.fromString(t,...r);return dv(n),new bv(e,null,n)}{if(!(e instanceof wv||e instanceof bv))throw new ha(da.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Aa.fromString(t,...r));return dv(n),new bv(e.firestore,null,n)}}function Iv(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=M(e),1===arguments.length&&(t=Ea.newId()),lv("doc","path",t),e instanceof gv){const n=Aa.fromString(t,...r);return uv(n),new wv(e,null,new Da(n))}{if(!(e instanceof wv||e instanceof bv))throw new ha(da.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Aa.fromString(t,...r));return uv(n),new wv(e.firestore,e instanceof bv?e.converter:null,new Da(n))}}function Ev(e,t){return e=M(e),t=M(t),(e instanceof wv||e instanceof bv)&&(t instanceof wv||t instanceof bv)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Sv(e,t){return e=M(e),t=M(t),e instanceof yv&&t instanceof yv&&e.firestore===t.firestore&&wu(e._query,t._query)&&e.converter===t.converter}class xv{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new $p(this,"async_queue_retry"),this.Tu=()=>{const e=Yp();e&&ia("AsyncQueue","Visibility state changed to "+e.visibilityState),this.e_.zo()};const e=Yp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const t=Yp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise((()=>{}));const t=new fa;return this.du((()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.au.push(e),this.Au())))}async Au(){if(0!==this.au.length){try{await this.au[0](),this.au.shift(),this.e_.reset()}catch(bI){if(!Xa(bI))throw bI;ia("AsyncQueue","Operation failed with retryable error: "+bI)}this.au.length>0&&this.e_.Wo((()=>this.Au()))}}du(e){const t=this._u.then((()=>(this.hu=!0,e().catch((e=>{this.lu=e,this.hu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw sa("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.hu=!1,e))))));return this._u=t,t}enqueueAfterDelay(e,t,n){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);const r=Dm.createAndSchedule(this,e,t,n,(e=>this.Ru(e)));return this.cu.push(r),r}Eu(){this.lu&&la()}verifyOperationInProgress(){}async Vu(){let e;do{e=this._u,await e}while(e!==this._u)}mu(e){for(const t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then((()=>{this.cu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.cu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Vu()}))}gu(e){this.Iu.push(e)}Ru(e){const t=this.cu.indexOf(e);this.cu.splice(t,1)}}function Tv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class kv{constructor(){this._progressObserver={},this._taskCompletionResolver=new fa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cv extends gv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new xv,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Av(this),this._firestoreClient.terminate()}}function Nv(e){return e._firestoreClient||Av(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Av(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new sc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ov(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Kg(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Pv(e,t,n){const r=new fa;return e.asyncQueue.enqueue((async()=>{try{await Wg(e,n),await Gg(e,t),r.resolve()}catch(e){const n=e;if(!Qg(n))throw n;oa("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Rv(e){return function(e){const t=new fa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ua(e);hm(n.remoteStore)||ia("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ua(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ba.get(e)||[];r.push(t),n.Ba.set(e,r)}catch(e){const n=Om(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ev(e),t))),t.promise}(Nv(e=fv(e,Cv)))}function Dv(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await $g(e),n=await Zg(e);return t.setNetworkEnabled(!0),function(e){const t=ua(e);return t.N_.delete(0),im(t)}(n)}))}(Nv(e=fv(e,Cv)))}function Ov(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await $g(e),n=await Zg(e);return t.setNetworkEnabled(!1),async function(e){const t=ua(e);t.N_.add(0),await sm(t),t.k_.set("Offline")}(n)}))}(Nv(e=fv(e,Cv)))}function Lv(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ua(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Wr.getNamedQuery(e,t)))}(await Xg(e),t)))}(Nv(e=fv(e,Cv)),t).then((t=>t?new yv(e,null,t.query):null))}function Mv(e){if(e._initialized||e._terminated)throw new ha(da.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fv($l.fromBase64String(e))}catch(e){throw new ha(da.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Fv($l.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Uv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ha(da.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ra(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vv{constructor(e){this._methodName=e}}class jv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ha(da.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ha(da.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Sa(this._lat,e._lat)||Sa(this._long,e._long)}}const zv=/^__.*__$/;class Bv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new hd(e,this.data,this.fieldMask,t,this.fieldTransforms):new dd(e,this.data,t,this.fieldTransforms)}}class qv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new hd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw la()}}class Kv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new Kv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.wu({path:n,bu:!1});return r.Du(e),r}Cu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.wu({path:n,bu:!1});return r.pu(),r}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return dy(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(0===e.length)throw this.Fu("Document fields must not be empty");if(Hv(this.yu)&&zv.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class Wv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Jp(e)}Ou(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Kv({yu:e,methodName:t,xu:n,path:Ra.emptyPath(),bu:!1,Mu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gv(e){const t=e._freezeSettings(),n=Jp(e._databaseId);return new Wv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qv(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Ou(s.merge||s.mergeFields?2:0,t,n,i);ay("Data must be an object, but it was:",o,r);const a=sy(r,o);let l,c;if(s.merge)l=new Yl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ly(t,r,n);if(!o.contains(i))throw new ha(da.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));hy(e,i)||e.push(i)}l=new Yl(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Bv(new Cc(a),l,c)}class Yv extends Vv{_toFieldTransform(e){if(2!==e.yu)throw 1===e.yu?e.Fu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Fu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yv}}function Jv(e,t,n){return new Kv({yu:3,xu:t.settings.xu,methodName:e._methodName,bu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class $v extends Vv{_toFieldTransform(e){return new td(e.path,new Gu)}isEqual(e){return e instanceof $v}}class Xv extends Vv{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=Jv(this,e,!0),n=this.Nu.map((e=>iy(e,t))),r=new Qu(n);return new td(e.path,r)}isEqual(e){return e instanceof Xv&&C(this.Nu,e.Nu)}}class Zv extends Vv{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=Jv(this,e,!0),n=this.Nu.map((e=>iy(e,t))),r=new Ju(n);return new td(e.path,r)}isEqual(e){return e instanceof Zv&&C(this.Nu,e.Nu)}}class ey extends Vv{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Xu(e.serializer,Bu(e.serializer,this.Lu));return new td(e.path,t)}isEqual(e){return e instanceof ey&&this.Lu===e.Lu}}function ty(e,t,n,r){const i=e.Ou(1,t,n);ay("Data must be an object, but it was:",i,r);const s=[],o=Cc.empty();zl(r,((e,r)=>{const a=uy(t,e,n);r=M(r);const l=i.Cu(a);if(r instanceof Yv)s.push(a);else{const e=iy(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Yl(s);return new qv(o,a,i.fieldTransforms)}function ny(e,t,n,r,i,s){const o=e.Ou(1,t,n),a=[ly(t,r,n)],l=[i];if(s.length%2!=0)throw new ha(da.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(ly(t,s[h])),l.push(s[h+1]);const c=[],u=Cc.empty();for(let h=a.length-1;h>=0;--h)if(!hy(c,a[h])){const e=a[h];let t=l[h];t=M(t);const n=o.Cu(e);if(t instanceof Yv)c.push(e);else{const r=iy(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Yl(c);return new qv(u,d,o.fieldTransforms)}function ry(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return iy(n,e.Ou(r?4:3,t))}function iy(e,t){if(oy(e=M(e)))return ay("Unsupported field value:",t,e),sy(e,t);if(e instanceof Vv)return function(e,t){if(!Hv(t.yu))throw t.Fu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Fu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.bu&&4!==t.yu)throw t.Fu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=iy(i,t.vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=M(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Bu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ka.fromDate(e);return{timestampValue:Gd(t.serializer,n)}}if(e instanceof ka){const n=new ka(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Gd(t.serializer,n)}}if(e instanceof jv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fv)return{bytesValue:Qd(t.serializer,e._byteString)};if(e instanceof wv){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:$d(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fu("Unsupported field value: ".concat(hv(e)))}(e,t)}function sy(e,t){const n={};return Bl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zl(e,((e,r)=>{const i=iy(r,t.Su(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function oy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ka||e instanceof jv||e instanceof Fv||e instanceof wv||e instanceof Vv)}function ay(e,t,n){if(!oy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=hv(n);throw"an object"===r?t.Fu(e+" a custom object"):t.Fu(e+" "+r)}}function ly(e,t,n){if((t=M(t))instanceof Uv)return t._internalPath;if("string"==typeof t)return uy(e,t);throw dy("Field path arguments must be of type string or ",e,!1,void 0,n)}const cy=new RegExp("[~\\*/\\[\\]]");function uy(e,t,n){if(t.search(cy)>=0)throw dy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Uv(...t.split("."))._internalPath}catch(tI){throw dy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function dy(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new ha(da.INVALID_ARGUMENT,a+e+l)}function hy(e,t){return e.some((e=>e.isEqual(t)))}class fy{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new py(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(my("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class py extends fy{data(){return super.data()}}function my(e,t){return"string"==typeof t?uy(e,t):t instanceof Uv?t._internalPath:t._delegate._internalPath}function gy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ha(da.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vy{}class yy extends vy{}function wy(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof vy&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof _y)).length,n=e.filter((e=>e instanceof by)).length;if(t>1||t>0&&n>0)throw new ha(da.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class by extends yy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new by(e,t,n)}_apply(e){const t=this._parse(e);return Ny(e._query,t),new yv(e.firestore,e.converter,vu(e._query,t))}_parse(e){const t=Gv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ha(da.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Cy(o,s);const t=[];for(const n of o)t.push(ky(r,e,n));a={arrayValue:{values:t}}}else a=ky(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Cy(o,s),a=ry(n,t,o,"in"===s||"not-in"===s);return Fc.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class _y extends vy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _y(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Uc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ny(n,i),n=vu(n,i)}(e._query,t),new yv(e.firestore,e.converter,vu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Iy extends yy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Iy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ha(da.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ha(da.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oc(t,n)}(e._query,this._field,this._direction);return new yv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new cu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Ey extends yy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Ey(e,t,n)}_apply(e){return new yv(e.firestore,e.converter,yu(e._query,this._limit,this._limitType))}}class Sy extends yy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Sy(e,t,n)}_apply(e){const t=Ty(e,this.type,this._docOrFields,this._inclusive);return new yv(e.firestore,e.converter,function(e,t){return new cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class xy extends yy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new xy(e,t,n)}_apply(e){const t=Ty(e,this.type,this._docOrFields,this._inclusive);return new yv(e.firestore,e.converter,function(e,t){return new cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Ty(e,t,n,r){if(n[0]=M(n[0]),n[0]instanceof fy)return function(e,t,n,r,i){if(!r)throw new ha(da.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of pu(e))if(o.field.isKeyField())s.push(gc(t,r.key));else{const e=r.data.field(o.field);if(nc(e))throw new ha(da.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new ha(da.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Pc(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Gv(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new ha(da.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new ha(da.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!fu(e)&&-1!==s.indexOf("/"))throw new ha(da.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Aa.fromString(s));if(!Da.isDocumentKey(n))throw new ha(da.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Da(n);a.push(gc(t,i))}else{const e=ry(n,r,s);a.push(e)}}return new Pc(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function ky(e,t,n){if("string"==typeof(n=M(n))){if(""===n)throw new ha(da.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fu(t)&&-1!==n.indexOf("/"))throw new ha(da.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Aa.fromString(n));if(!Da.isDocumentKey(r))throw new ha(da.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return gc(e,new Da(r))}if(n instanceof wv)return gc(e,n._key);throw new ha(da.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(hv(n),"."))}function Cy(e,t){if(!Array.isArray(e)||0===e.length)throw new ha(da.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ny(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ha(da.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ha(da.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Ay{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(cc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ec(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw la()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return zl(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new jv(ec(e.latitude),ec(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=rc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){const t=Zl(e);return new ka(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Aa.fromString(e);ca(_h(n));const r=new oc(n.get(1),n.get(3)),i=new Da(n.popFirst(5));return r.isEqual(t)||sa("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Py(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ry extends Ay{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wv(this.firestore,null,t)}}class Dy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oy extends fy{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ly(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(my("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ly extends Oy{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class My{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Dy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ly(this._firestore,this._userDataWriter,n.key,n,new Dy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ha(da.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ly(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Dy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ly(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Dy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Fy(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Fy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return la()}}function Uy(e,t){return e instanceof Oy&&t instanceof Oy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof My&&t instanceof My&&e._firestore===t._firestore&&Sv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Vy extends Ay{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wv(this.firestore,null,t)}}function jy(e){e=fv(e,wv);const t=fv(e.firestore,Cv),n=Nv(t),r=new Vy(t);return function(e,t){const n=new fa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ua(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new ha(da.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Om(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Xg(e),t,n))),n.promise}(n,e._key).then((n=>new Oy(t,r,e._key,n,new Dy(null!==n&&n.hasLocalMutations,!0),e.converter)))}function zy(e){e=fv(e,yv);const t=fv(e.firestore,Cv),n=Nv(t),r=new Vy(t);return function(e,t){const n=new fa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await xp(e,t,!0),i=new tg(t,r.Is),s=i.Va(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Om(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Xg(e),t,n))),n.promise}(n,e._query).then((n=>new My(t,r,e,n)))}function By(e,t,n){e=fv(e,wv);const r=fv(e.firestore,Cv),i=Py(e.converter,t,n);return Wy(r,[Qv(Gv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,rd.none())])}function qy(e,t,n){e=fv(e,wv);const r=fv(e.firestore,Cv),i=Gv(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=M(t))||t instanceof Uv?ny(i,"updateDoc",e._key,t,n,a):ty(i,"updateDoc",e._key,t),Wy(r,[s.toMutation(e._key,rd.exists(!0))])}function Hy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=M(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Tv(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Tv(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof wv)d=fv(e.firestore,Cv),h=du(e._key.path),u={next:t=>{n[l]&&n[l](Gy(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=fv(e,yv);d=fv(t.firestore,Cv),h=t._query;const r=new Vy(d);u={next:e=>{n[l]&&n[l](new My(d,r,t,e))},error:n[l+1],complete:n[l+2]},gy(e._query)}return function(e,t,n,r){const i=new zg(r),s=new Qm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>zm(await nv(e),s))),()=>{i.Ga(),e.asyncQueue.enqueueAndForget((async()=>Bm(await nv(e),s)))}}(Nv(d),h,c,u)}function Ky(e,t){return function(e,t){const n=new zg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ua(e).J_.add(t),t.next()}(await nv(e),n))),()=>{n.Ga(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ua(e).J_.delete(t)}(await nv(e),n)))}}(Nv(e=fv(e,Cv)),Tv(t)?t:{next:t})}function Wy(e,t){return function(e,t){const n=new fa;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Lg(e);try{const e=await function(e,t){const n=ua(e),r=ka.now(),i=t.reduce(((e,t)=>e.add(t.key)),Fu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Cu(),l=Fu();return n.us.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=cd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new hd(e.key,t,Nc(t.value.mapValue),rd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Pu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.La[e.currentUser.toKey()];r||(r=new ql(Sa)),r=r.insert(t,n),e.La[e.currentUser.toKey()]=r}(r,e.batchId,n),await Eg(r,e.changes),await bm(r.remoteStore)}catch(e){const t=Om(e,"Failed to persist write");n.reject(t)}}(await ev(e),t,n))),n.promise}(Nv(e),t)}function Gy(e,t,n){const r=n.docs.get(t._key),i=new Vy(e);return new Oy(e,i,t._key,r,new Dy(n.hasPendingWrites,n.fromCache),t.converter)}const Qy={maxAttempts:5};class Yy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gv(e)}set(e,t,n){this._verifyNotCommitted();const r=Jy(e,this._firestore),i=Py(r.converter,t,n),s=Qv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,rd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Jy(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=M(t))||t instanceof Uv?ny(this._dataReader,"WriteBatch.update",r._key,t,n,o):ty(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,rd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Jy(e,this._firestore);return this._mutations=this._mutations.concat(new gd(t._key,rd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ha(da.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jy(e,t){if((e=M(e)).firestore!==t)throw new ha(da.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class $y extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Gv(e)}get(e){const t=Jy(e,this._firestore),n=new Ry(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return la();const r=e[0];if(r.isFoundDocument())return new fy(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new fy(this._firestore,n,t._key,null,t.converter);throw la()}))}set(e,t,n){const r=Jy(e,this._firestore),i=Py(r.converter,t,n),s=Qv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Jy(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=M(t))||t instanceof Uv?ny(this._dataReader,"Transaction.update",r._key,t,n,o):ty(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Jy(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Jy(e,this._firestore),n=new Vy(this._firestore);return super.get(e).then((e=>new Oy(this._firestore,n,t._key,e._document,new Dy(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ta=e}(nt),Ge(new F("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Cv(new va(e.getProvider("auth-internal")),new _a(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ha(da.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),lt(Zo,"4.6.5",e),lt(Zo,"4.6.5","esm2017")}();function Xy(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ha("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Zy(){if("undefined"===typeof Uint8Array)throw new ha("unimplemented","Uint8Arrays are not available in this environment.")}function ew(){if("undefined"==typeof atob)throw new ha("unimplemented","Blobs are unavailable in Firestore in this environment.")}class tw{constructor(e){this._delegate=e}static fromBase64String(e){return ew(),new tw(Fv.fromBase64String(e))}static fromUint8Array(e){return Zy(),new tw(Fv.fromUint8Array(e))}toBase64(){return ew(),this._delegate.toBase64()}toUint8Array(){return Zy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function nw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class rw{enableIndexedDbPersistence(e,t){return function(e,t){Mv(e=fv(e,Cv));const n=Nv(e);if(n._uninitializedComponentsProvider)throw new ha(da.FAILED_PRECONDITION,"SDK cache is already specified.");oa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Vg;return Pv(n,i,new Fg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Mv(e=fv(e,Cv));const t=Nv(e);if(t._uninitializedComponentsProvider)throw new ha(da.FAILED_PRECONDITION,"SDK cache is already specified.");oa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Vg;return Pv(t,r,new Ug(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new ha(da.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new fa;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Qa.D())return Promise.resolve();const t=e+"main";await Qa.delete(t)}(fp(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class iw{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof oc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||oa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vv(this._delegate,e,t,n)}enableNetwork(){return Dv(this._delegate)}disableNetwork(){return Ov(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,cv("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Rv(this._delegate)}onSnapshotsInSync(e){return Ky(this._delegate,e)}get app(){if(!this._appCompat)throw new ha("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yw(this,_v(this._delegate,e))}catch(bI){throw uw(bI,"collection()","Firestore.collection()")}}doc(e){try{return new cw(this,Iv(this._delegate,e))}catch(bI){throw uw(bI,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new mw(this,function(e,t){if(e=fv(e,gv),lv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ha(da.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new yv(e,null,function(e){return new cu(Aa.emptyPath(),e)}(t))}(this._delegate,e))}catch(bI){throw uw(bI,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=fv(e,Cv);const r=Object.assign(Object.assign({},Qy),n);return function(e){if(e.maxAttempts<1)throw new ha(da.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new fa;return e.asyncQueue.enqueueAndForget((async()=>{const i=await tv(e);new Hg(e.asyncQueue,i,n,t,r).nu()})),r.promise}(Nv(e),(n=>t(new $y(e,n))),r)}(this._delegate,(t=>e(new ow(this,t))))}batch(){return Nv(this._delegate),new aw(new Yy(this._delegate,(e=>Wy(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Nv(e=fv(e,Cv)),r=new kv;return sv(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Lv(this._delegate,e).then((e=>e?new mw(this,e):null))}}class sw extends Ay{constructor(e){super(),this.firestore=e}convertBytes(e){return new tw(new Fv(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return cw.forKey(t,this.firestore,null)}}class ow{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sw(e)}get(e){const t=ww(e);return this._delegate.get(t).then((e=>new fw(this._firestore,new Oy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=ww(e);return n?(Xy("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=ww(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=ww(e);return this._delegate.delete(t),this}}class aw{constructor(e){this._delegate=e}set(e,t,n){const r=ww(e);return n?(Xy("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=ww(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=ww(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class lw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Ly(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new pw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=lw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new lw(e,new sw(e),t),r.set(t,i)),i}}lw.INSTANCES=new WeakMap;class cw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new ha("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new cw(t,new wv(t._delegate,n,new Da(e)))}static forKey(e,t,n){return new cw(t,new wv(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new yw(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yw(this.firestore,_v(this._delegate,e))}catch(bI){throw uw(bI,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=M(e))instanceof wv&&Ev(this._delegate,e)}set(e,t){t=Xy("DocumentReference.set",t);try{return t?By(this._delegate,e,t):By(this._delegate,e)}catch(bI){throw uw(bI,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?qy(this._delegate,e):qy(this._delegate,e,t,...r)}catch(bI){throw uw(bI,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return Wy(fv(e.firestore,Cv),[new gd(e._key,rd.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=dw(t),i=hw(t,(e=>new fw(this.firestore,new Oy(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Hy(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?jy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fv(e,wv);const t=fv(e.firestore,Cv);return rv(Nv(t),e._key,{source:"server"}).then((n=>Gy(t,e,n)))}(this._delegate):function(e){e=fv(e,wv);const t=fv(e.firestore,Cv);return rv(Nv(t),e._key).then((n=>Gy(t,e,n)))}(this._delegate),t.then((e=>new fw(this.firestore,new Oy(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new cw(this.firestore,e?this._delegate.withConverter(lw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function uw(e,t,n){return e.message=e.message.replace(t,n),e}function dw(e){for(const t of e)if("object"===typeof t&&!nw(t))return t;return{}}function hw(e,t){var n,r;let i;return i=nw(e[0])?e[0]:nw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class fw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new cw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Uy(this._delegate,e._delegate)}}class pw extends fw{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e){e||la()}(void 0!==t),t}}class mw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sw(e)}where(e,t,n){try{return new mw(this.firestore,wy(this._delegate,function(e,t,n){const r=t,i=my("where",e);return by._create(i,r,n)}(e,t,n)))}catch(bI){throw uw(bI,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new mw(this.firestore,wy(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=my("orderBy",e);return Iy._create(n,t)}(e,t)))}catch(bI){throw uw(bI,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new mw(this.firestore,wy(this._delegate,function(e){return pv("limit",e),Ey._create("limit",e,"F")}(e)))}catch(bI){throw uw(bI,"limit()","Query.limit()")}}limitToLast(e){try{return new mw(this.firestore,wy(this._delegate,function(e){return pv("limitToLast",e),Ey._create("limitToLast",e,"L")}(e)))}catch(bI){throw uw(bI,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new mw(this.firestore,wy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sy._create("startAt",t,!0)}(...arguments)))}catch(bI){throw uw(bI,"startAt()","Query.startAt()")}}startAfter(){try{return new mw(this.firestore,wy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sy._create("startAfter",t,!1)}(...arguments)))}catch(bI){throw uw(bI,"startAfter()","Query.startAfter()")}}endBefore(){try{return new mw(this.firestore,wy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xy._create("endBefore",t,!1)}(...arguments)))}catch(bI){throw uw(bI,"endBefore()","Query.endBefore()")}}endAt(){try{return new mw(this.firestore,wy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xy._create("endAt",t,!0)}(...arguments)))}catch(bI){throw uw(bI,"endAt()","Query.endAt()")}}isEqual(e){return Sv(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?zy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fv(e,yv);const t=fv(e.firestore,Cv),n=Nv(t),r=new Vy(t);return iv(n,e._query,{source:"server"}).then((n=>new My(t,r,e,n)))}(this._delegate):function(e){e=fv(e,yv);const t=fv(e.firestore,Cv),n=Nv(t),r=new Vy(t);return gy(e._query),iv(n,e._query).then((n=>new My(t,r,e,n)))}(this._delegate),t.then((e=>new vw(this.firestore,new My(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=dw(t),i=hw(t,(e=>new vw(this.firestore,new My(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Hy(this._delegate,r,i)}withConverter(e){return new mw(this.firestore,e?this._delegate.withConverter(lw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class gw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new pw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vw{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new mw(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new pw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new gw(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new pw(this._firestore,n))}))}isEqual(e){return Uy(this._delegate,e._delegate)}}class yw extends mw{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new cw(this.firestore,e):null}doc(e){try{return new cw(this.firestore,void 0===e?Iv(this._delegate):Iv(this._delegate,e))}catch(bI){throw uw(bI,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=fv(e.firestore,Cv),r=Iv(e),i=Py(e.converter,t);return Wy(n,[Qv(Gv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,rd.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new cw(this.firestore,e)))}isEqual(e){return Ev(this._delegate,e._delegate)}withConverter(e){return new yw(this.firestore,e?this._delegate.withConverter(lw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ww(e){return fv(e,wv)}class bw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Uv(...t)}static documentId(){return new bw(Ra.keyField().canonicalString())}isEqual(e){return(e=M(e))instanceof Uv&&this._delegate._internalPath.isEqual(e._internalPath)}}class _w{constructor(e){this._delegate=e}static serverTimestamp(){const e=new $v("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new _w(e)}static delete(){const e=new Yv("deleteField");return e._methodName="FieldValue.delete",new _w(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Xv("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new _w(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zv("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new _w(e)}static increment(e){const t=function(e){return new ey("increment",e)}(e);return t._methodName="FieldValue.increment",new _w(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Iw={Firestore:iw,GeoPoint:jv,Timestamp:ka,Blob:tw,Transaction:ow,WriteBatch:aw,DocumentReference:cw,DocumentSnapshot:fw,Query:mw,QueryDocumentSnapshot:pw,QuerySnapshot:vw,CollectionReference:yw,FieldPath:bw,FieldValue:_w,setLogLevel:function(e){!function(e){na.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new F("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Iw)))}(e,((e,t)=>new iw(e,t,new rw))),e.registerVersion("@firebase/firestore-compat","0.3.34")}(kt);kt.initializeApp({apiKey:"AIzaSyBeP5VS1OEvSOA8jxbz88n64TnSd9DAYEI",authDomain:"synergy-blog-9b33b.firebaseapp.com",projectId:"synergy-blog-9b33b",storageBucket:"synergy-blog-9b33b.appspot.com",messagingSenderId:"261067500212",appId:"1:261067500212:web:a2f6a201546fe4837e85e1"}),window.firebase=kt;const Ew=new window.firebaseui.auth.AuthUI(kt.auth()),Sw=()=>kt.auth().signOut(),xw=kt.firestore(),Tw=xw.collection("posts"),kw=e=>Tw.doc(e.id).set(e),Cw=async e=>Tw.doc(e).get().then((e=>e.data())),Nw=async(e,t)=>Tw.doc(e).collection("comments").add(t),Aw=async e=>Tw.doc(e).delete(),Pw=xw.collection("subscriptions"),Rw=async(e,t)=>Pw.doc(e).update({subscriptions:kt.firestore.FieldValue.arrayUnion(t)}),Dw=async(e,t)=>Pw.doc(e).update({subscriptions:kt.firestore.FieldValue.arrayRemove(t)});var Ow=n(579);const Lw=(0,t.createContext)(null);function Mw(e){let{children:n}=e;const[r,i]=(0,t.useState)(!1),[s,o]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(e=>{kt.auth().onAuthStateChanged(e)})((e=>{var t;o(null!==(t=null===e||void 0===e?void 0:e.multiFactor.user)&&void 0!==t?t:null),i(!0)}))}),[]),r?(0,Ow.jsx)(Lw.Provider,{value:s,children:n}):null}function Fw(){return(0,t.useContext)(Lw)}const Uw=function(e,t){};function Vw(e){var n;const r=null!==(n=e.errorComponent)&&void 0!==n?n:zw;return(0,Ow.jsx)(jw,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:n=>{let{error:i,reset:s}=n;return i?t.createElement(r,{error:i,reset:s}):e.children}})}class jw extends t.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(e){return{resetKey:e.getResetKey()}}static getDerivedStateFromError(e){return{error:e}}reset(){this.setState({error:null})}componentDidUpdate(e,t){t.error&&t.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function zw(e){let{error:n}=e;const[r,i]=t.useState(!1);return(0,Ow.jsxs)("div",{style:{padding:".5rem",maxWidth:"100%"},children:[(0,Ow.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[(0,Ow.jsx)("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),(0,Ow.jsx)("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>i((e=>!e)),children:r?"Hide Error":"Show Error"})]}),(0,Ow.jsx)("div",{style:{height:".25rem"}}),r?(0,Ow.jsx)("div",{children:(0,Ow.jsx)("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:n.message?(0,Ow.jsx)("code",{children:n.message}):null})}):null]})}var Bw=n(443);function qw(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const Hw=t.createContext(null);function Kw(){return"undefined"===typeof document?Hw:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Hw,Hw)}function Ww(e){var n;const r=t.useContext(Kw());return Uw(!((null===(n=null==e?void 0:e.warn)||void 0===n||n)&&!r),"useRouter must be used inside a <RouterProvider> component!"),r}function Gw(e){const t=Ww({warn:void 0===(null==e?void 0:e.router)});return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return(0,Bw.useSyncExternalStoreWithSelector)(e.subscribe,(()=>e.state),(()=>e.state),t,qw)}(((null==e?void 0:e.router)||t).__store,null==e?void 0:e.select)}function Qw(e){return e[e.length-1]}function Yw(e,t){return function(e){return"function"===typeof e}(e)?e(t):e}function Jw(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}function $w(e,t){if(e===t)return e;const n=t,r=eb(e)&&eb(n);if(r||Xw(e)&&Xw(n)){const t=r?e:Object.keys(e),i=t.length,s=r?n:Object.keys(n),o=s.length,a=r?[]:{};let l=0;for(let c=0;c<o;c++){const i=r?c:s[c];(!r&&t.includes(i)||r)&&void 0===e[i]&&void 0===n[i]?(a[i]=void 0,l++):(a[i]=$w(e[i],n[i]),a[i]===e[i]&&void 0!==e[i]&&l++)}return i===o&&l===i?e:a}return n}function Xw(e){if(!Zw(e))return!1;const t=e.constructor;if("undefined"===typeof t)return!0;const n=t.prototype;return!!Zw(n)&&!!n.hasOwnProperty("isPrototypeOf")}function Zw(e){return"[object Object]"===Object.prototype.toString.call(e)}function eb(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function tb(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(typeof e!==typeof t)return!1;if(Xw(e)&&Xw(t)){const r=Object.keys(e).filter((t=>void 0!==e[t])),i=Object.keys(t).filter((e=>void 0!==t[e]));return!(!n&&r.length!==i.length)&&!i.some((r=>!(r in e)||!tb(e[r],t[r],n)))}return!(!Array.isArray(e)||!Array.isArray(t))&&(e.length===t.length&&!e.some(((e,r)=>!tb(e,t[r],n))))}const nb="undefined"!==typeof window?t.useLayoutEffect:t.useEffect;function rb(e){let t,n;const r=new Promise(((e,r)=>{t=e,n=r}));return r.status="pending",r.resolve=n=>{r.status="resolved",r.value=n,t(n),null==e||e(n)},r.reject=e=>{r.status="rejected",n(e)},r}function ib(e){const n=t.useRef({value:e,prev:null}),r=n.current.value;return e!==r&&(n.current={value:e,prev:r}),n.current.prev}function sb(e){return ob(e.filter((e=>void 0!==e)).join("/"))}function ob(e){return e.replace(/\/{2,}/g,"/")}function ab(e){return"/"===e?e:e.replace(/^\/{1,}/,"")}function lb(e){return"/"===e?e:e.replace(/\/{1,}$/,"")}function cb(e,t){return e.endsWith("/")&&"/"!==e&&e!=="".concat(t,"/")?e.slice(0,-1):e}function ub(e){if(!e)return[];const t=[];if("/"===(e=ob(e)).slice(0,1)&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),!e)return t;const n=e.split("/").filter(Boolean);return t.push(...n.map((e=>"$"===e||"*"===e?{type:"wildcard",value:e}:"$"===e.charAt(0)?{type:"param",value:e}:{type:"pathname",value:decodeURIComponent(e)}))),"/"===e.slice(-1)&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),t}function db(e){let{path:t,params:n,leaveWildcards:r,leaveParams:i}=e;const s=ub(t),o={};for(const[a,l]of Object.entries(n)){const e="string"===typeof l;["*","_splat"].includes(a)?o[a]=e?encodeURI(l):l:o[a]=e?encodeURIComponent(l):l}return sb(s.map((e=>{if("wildcard"===e.type){const t=o._splat;return r?"".concat(e.value).concat(null!==t&&void 0!==t?t:""):t}if("param"===e.type){var t;if(i){const t=o[e.value];return"".concat(e.value).concat(null!==t&&void 0!==t?t:"")}return null!==(t=o[e.value.substring(1)])&&void 0!==t?t:"undefined"}return e.value})))}function hb(e,t,n){const r=function(e,t,n){var r;t=fb(e,t);const i=fb(e,"".concat(null!==(r=n.to)&&void 0!==r?r:"$")),s=ub(t),o=ub(i);t.startsWith("/")||s.unshift({type:"pathname",value:"/"});i.startsWith("/")||o.unshift({type:"pathname",value:"/"});const a={},l=(()=>{for(let e=0;e<Math.max(s.length,o.length);e++){const t=s[e],r=o[e],i=e>=s.length-1,l=e>=o.length-1;if(r){if("wildcard"===r.type){if(null==t?void 0:t.value){const t=decodeURI(sb(s.slice(e).map((e=>e.value))));return a["*"]=t,a._splat=t,!0}return!1}if("pathname"===r.type){if("/"===r.value&&!(null==t?void 0:t.value))return!0;if(t)if(n.caseSensitive){if(r.value!==t.value)return!1}else if(r.value.toLowerCase()!==t.value.toLowerCase())return!1}if(!t)return!1;if("param"===r.type){if("/"===t.value)return!1;"$"!==t.value.charAt(0)&&(a[r.value.substring(1)]=decodeURIComponent(t.value))}}if(!i&&l)return a["**"]=sb(s.slice(e+1).map((e=>e.value))),!!n.fuzzy&&"/"!==(null==r?void 0:r.value)}return!0})();return l?a:void 0}(e,t,n);if(!n.to||r)return null!==r&&void 0!==r?r:{}}function fb(e,t){switch(!0){case"/"===e:return t;case t===e:return"";case t.length<e.length:case"/"!==t[e.length]:return t;case t.startsWith(e):return t.slice(e.length);default:return t}}function pb(){const e=Ww(),n=t.useRef({router:e,mounted:!1}),r=Gw({select:e=>Jw(e,["isLoading","location","resolvedLocation","isTransitioning"])}),[i,s]=t.useTransition(),o=Gw({select:e=>e.matches.some((e=>"pending"===e.status))}),a=ib(r.isLoading),l=r.isLoading||i||o,c=ib(l);return e.isServer||(e.startReactTransition=s),t.useEffect((()=>{const t=e.history.subscribe(e.load),n=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0});return lb(e.latestLocation.href)!==lb(n.href)&&e.commitLocation({...n,replace:!0}),()=>{t()}}),[e,e.history]),nb((()=>{var t;if((null==(t=window.__TSR__)?void 0:t.dehydrated)||n.current.router===e&&n.current.mounted)return;n.current={router:e,mounted:!0};(async()=>{try{await e.load()}catch(t){console.error(t)}})()}),[e]),nb((()=>{if(a&&!r.isLoading){const t=e.state.location,n=e.state.resolvedLocation,r=n.href!==t.href;e.emit({type:"onLoad",fromLocation:n,toLocation:t,pathChanged:r})}}),[a,e,r.isLoading]),nb((()=>{if(c&&!l){const t=e.state.location,n=e.state.resolvedLocation,r=n.href!==t.href;if(e.emit({type:"onResolved",fromLocation:n,toLocation:t,pathChanged:r}),e.__store.setState((e=>({...e,status:"idle",resolvedLocation:e.location}))),document.querySelector&&""!==e.state.location.hash){const t=document.getElementById(e.state.location.hash);t&&t.scrollIntoView()}}}),[l,c,e]),null}const mb=t.createContext(void 0);var gb=!0,vb="Invariant failed";function yb(e,t){if(!e){if(gb)throw new Error(vb);var n="function"===typeof t?t():t,r=n?"".concat(vb,": ").concat(n):vb;throw new Error(r)}}function wb(e){return!!(null==e?void 0:e.isNotFound)}function bb(e){const t=Gw({select:e=>"not-found-".concat(e.location.pathname,"-").concat(e.status)});return(0,Ow.jsx)(Vw,{getResetKey:()=>t,onCatch:(t,n)=>{var r;if(!wb(t))throw t;null==(r=e.onCatch)||r.call(e,t,n)},errorComponent:t=>{let{error:n}=t;var r;return null==(r=e.fallback)?void 0:r.call(e,n)},children:e.children})}function _b(){return(0,Ow.jsx)("p",{children:"Not Found"})}function Ib(e){if(e.isRedirect=!0,e.statusCode=e.statusCode||e.code||301,e.headers=e.headers||{},e.throw)throw e;return e}function Eb(e){return!!(null==e?void 0:e.isRedirect)}function Sb(e){return!!(null==e?void 0:e.isRedirect)&&e.href}function xb(e){return!("object"!==typeof e||!e||!("data"in e))&&(!(!("__isServerError"in e)||!e.__isServerError)&&(!("object"!==typeof e.data||!e.data)&&!0===e.__isServerError))}function Tb(e){if("name"in e&&"message"in e){const t=new Error(e.message);return t.name=e.name,t}return e.data}function kb(e){return(0,Ow.jsx)(Ow.Fragment,{children:e.children})}function Cb(e,t,n){return t.options.notFoundComponent?(0,Ow.jsx)(t.options.notFoundComponent,{data:n}):e.options.defaultNotFoundComponent?(0,Ow.jsx)(e.options.defaultNotFoundComponent,{data:n}):(0,Ow.jsx)(_b,{})}const Nb="__root__",Ab=t.memo((function(e){var n,r,i,s,o,a;let{matchId:l}=e;var c,u;const d=Ww(),h=Gw({select:e=>{var t;return null==(t=e.matches.find((e=>e.id===l)))?void 0:t.routeId}});yb(h,'Could not find routeId for matchId "'.concat(l,'". Please file an issue!'));const f=d.routesById[h],p=null!==(n=f.options.pendingComponent)&&void 0!==n?n:d.options.defaultPendingComponent,m=p?(0,Ow.jsx)(p,{}):null,g=null!==(r=f.options.errorComponent)&&void 0!==r?r:d.options.defaultErrorComponent,v=null!==(i=f.options.onCatch)&&void 0!==i?i:d.options.defaultOnCatch,y=f.isRoot?null!==(s=f.options.notFoundComponent)&&void 0!==s?s:null==(c=d.options.notFoundRoute)?void 0:c.options.component:f.options.notFoundComponent,w=f.isRoot&&!f.options.wrapInSuspense||!(null!==(o=null!==(a=f.options.wrapInSuspense)&&void 0!==a?a:p)&&void 0!==o?o:null==(u=f.options.errorComponent)?void 0:u.preload)?kb:t.Suspense,b=g?Vw:kb,_=y?bb:kb,I=Gw({select:e=>e.loadedAt});return(0,Ow.jsx)(mb.Provider,{value:l,children:(0,Ow.jsx)(w,{fallback:m,children:(0,Ow.jsx)(b,{getResetKey:()=>I,errorComponent:g||zw,onCatch:(e,t)=>{if(wb(e))throw e;Uw(!1,"Error in route match: ".concat(l)),null==v||v(e,t)},children:(0,Ow.jsx)(_,{fallback:e=>{if(!y||e.routeId&&e.routeId!==h||!e.routeId&&!f.isRoot)throw e;return t.createElement(y,e)},children:(0,Ow.jsx)(Pb,{matchId:l})})})})})})),Pb=t.memo((function(e){var n;let{matchId:r}=e;var i,s;const o=Ww(),a=Gw({select:e=>{var t;return null==(t=e.matches.find((e=>e.id===r)))?void 0:t.routeId}}),l=o.routesById[a],c=Gw({select:e=>e.matches.findIndex((e=>e.id===r))}),u=Gw({select:e=>Jw(e.matches[c],["id","status","error","loadPromise","minPendingPromise"])}),d=t.useMemo((()=>{var e;const t=null!==(e=l.options.component)&&void 0!==e?e:o.options.defaultComponent;return t?(0,Ow.jsx)(t,{},a):(0,Ow.jsx)(Rb,{})}),[a,l.options.component,o.options.defaultComponent]);t.useEffect((()=>{if("pending"===u.status){var e;const t=null!==(e=l.options.pendingMinMs)&&void 0!==e?e:o.options.defaultPendingMinMs;if(t&&!u.minPendingPromise&&!o.isServer){const e=rb();o.updateMatch(u.id,(t=>({...t,minPendingPromise:e})));const n=setTimeout((()=>{e.resolve(),o.updateMatch(u.id,(e=>({...e,minPendingPromise:void 0})))}),t);return()=>clearTimeout(n)}}}),[u.id,u.loadPromise,u.minPendingPromise,u.status,l.options.pendingMinMs,o]);const h=(null!==(n=l.options.errorComponent)&&void 0!==n?n:o.options.defaultErrorComponent)||zw;if("notFound"===u.status){let e;if(xb(u.error)){var f;e=(null!==(f=null==(i=o.options.errorSerializer)?void 0:i.deserialize)&&void 0!==f?f:Tb)(u.error.data)}else e=u.error;return yb(wb(e),"Expected a notFound error"),Cb(o,l,e)}if("redirected"===u.status)throw yb(Eb(u.error),"Expected a redirect error"),u.loadPromise;if("error"===u.status){if(o.isServer)return(0,Ow.jsx)(h,{error:u.error,info:{componentStack:""}});if(xb(u.error)){var p;throw(null!==(p=null==(s=o.options.errorSerializer)?void 0:s.deserialize)&&void 0!==p?p:Tb)(u.error.data)}throw u.error}if("pending"===u.status)throw u.loadPromise;return(0,Ow.jsxs)(Ow.Fragment,{children:[d,o.AfterEachMatch?(0,Ow.jsx)(o.AfterEachMatch,{match:u,matchIndex:c}):null]})})),Rb=t.memo((function(){const e=Ww(),n=t.useContext(mb),r=Gw({select:e=>{var t;return null==(t=e.matches.find((e=>e.id===n)))?void 0:t.routeId}}),i=e.routesById[r],{parentGlobalNotFound:s}=Gw({select:e=>{const t=e.matches.find((e=>e.id===n));return yb(t,'Could not find parent match for matchId "'.concat(n,'"')),{parentGlobalNotFound:t.globalNotFound}}}),o=Gw({select:e=>{var t;const r=e.matches,i=r.findIndex((e=>e.id===n));return null==(t=r[i+1])?void 0:t.id}});if(s)return Cb(e,i,void 0);if(!o)return null;const a=(0,Ow.jsx)(Ab,{matchId:o}),l=e.options.defaultPendingComponent?(0,Ow.jsx)(e.options.defaultPendingComponent,{}):null;return n===Nb?(0,Ow.jsx)(t.Suspense,{fallback:l,children:a}):a}));function Db(){const e=Ww(),n=e.options.defaultPendingComponent?(0,Ow.jsx)(e.options.defaultPendingComponent,{}):null,r=(0,Ow.jsxs)(t.Suspense,{fallback:n,children:[(0,Ow.jsx)(pb,{}),(0,Ow.jsx)(Ob,{})]});return e.options.InnerWrap?(0,Ow.jsx)(e.options.InnerWrap,{children:r}):r}function Ob(){const e=Gw({select:e=>{var t;return null==(t=e.matches[0])?void 0:t.id}}),t=Gw({select:e=>e.loadedAt});return(0,Ow.jsx)(mb.Provider,{value:e,children:(0,Ow.jsx)(Vw,{getResetKey:()=>t,errorComponent:zw,onCatch:e=>{Uw(!1,"The following error wasn't caught by any route! At the very least, consider setting an 'errorComponent' in your RootRoute!"),Uw(!1,e.message||e.toString())},children:e?(0,Ow.jsx)(Ab,{matchId:e}):null})})}function Lb(e){let{router:t,children:n,...r}=e;t.update({...t.options,...r,context:{...t.options.context,...r.context}});const i=Kw(),s=(0,Ow.jsx)(i.Provider,{value:t,children:n});return t.options.Wrap?(0,Ow.jsx)(t.options.Wrap,{children:s}):s}function Mb(e){let{router:t,...n}=e;return(0,Ow.jsx)(Lb,{router:t,...n,children:(0,Ow.jsx)(Db,{})})}function Fb(e){const n=t.useContext(mb),r=Gw({select:t=>{var r;const i=t.matches.find((t=>e.from?e.from===t.routeId:t.id===n));if(yb(!((null===(r=e.shouldThrow)||void 0===r||r)&&!i),"Could not find ".concat(e.from?'an active match from "'.concat(e.from,'"'):"a nearest match!")),void 0!==i)return e.select?e.select(i):i}});return r}function Ub(e){return Fb({...e,select:t=>e.select?e.select(t.params):t.params})}function Vb(e){const{navigate:n}=Ww();return t.useCallback((e=>n({...e})),[n])}class jb{constructor(e){this.init=e=>{var t,n;this.originalIndex=e.originalIndex;const r=this.options,i=!(null==r?void 0:r.path)&&!(null==r?void 0:r.id);this.parentRoute=null==(n=null==(t=this.options)?void 0:t.getParentRoute)?void 0:n.call(t),i?this.path=Nb:yb(this.parentRoute,"Child Route instances must pass a 'getParentRoute: () => ParentRoute' option that returns a Route instance.");let s=i?Nb:r.path;s&&"/"!==s&&(s=ab(s));const o=(null==r?void 0:r.id)||s;let a=i?Nb:sb([this.parentRoute.id===Nb?"":this.parentRoute.id,o]);s===Nb&&(s="/"),a!==Nb&&(a=sb(["/",a]));const l=a===Nb?"/":sb([this.parentRoute.fullPath,s]);this.path=s,this.id=a,this.fullPath=l,this.to=l},this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.useMatch=e=>Fb({...e,from:this.id}),this.useRouteContext=e=>Fb({...e,from:this.id,select:t=>(null==e?void 0:e.select)?e.select(t.context):t.context}),this.useSearch=e=>function(e){return Fb({...e,select:t=>e.select?e.select(t.search):t.search})}({...e,from:this.id}),this.useParams=e=>Ub({...e,from:this.id}),this.useLoaderDeps=e=>function(e){return Fb({...e,select:t=>"function"===typeof e.select?e.select(t.loaderDeps):t.loaderDeps})}({...e,from:this.id}),this.useLoaderData=e=>function(e){return Fb({...e,select:t=>"function"===typeof e.select?e.select(t.loaderData):t.loaderData})}({...e,from:this.id}),this.useNavigate=()=>Vb(this.id),this.options=e||{},this.isRoot=!(null==e?void 0:e.getParentRoute),yb(!((null==e?void 0:e.id)&&(null==e?void 0:e.path)),"Route cannot have both an 'id' and a 'path' option."),this.$$typeof=Symbol.for("react.memo")}addChildren(e){return this.children=Array.isArray(e)?e:Object.values(e),this}}function zb(e){return new jb(e)}function Bb(){return e=>function(e){return new qb(e)}(e)}class qb extends jb{constructor(e){super(e)}addChildren(e){return super.addChildren(e)}}const Hb="pushstate",Kb="popstate",Wb="beforeunload",Gb=e=>(e.preventDefault(),e.returnValue=""),Qb=()=>{removeEventListener(Wb,Gb,{capture:!0})};function Yb(e){let t=e.getLocation();const n=new Set;let r=[];const i=()=>{t=e.getLocation(),n.forEach((e=>e()))},s=async(t,n)=>{var s,o;if(!(null!==(s=null==n?void 0:n.ignoreBlocker)&&void 0!==s&&s)&&"undefined"!==typeof document&&r.length)for(const a of r){if(!await a())return void(null==(o=e.onBlocked)||o.call(e,i))}t()};return{get location(){return t},subscribers:n,subscribe:e=>(n.add(e),()=>{n.delete(e)}),push:(t,n,r)=>{n=Jb(n),s((()=>{e.pushState(t,n),i()}),r)},replace:(t,n,r)=>{n=Jb(n),s((()=>{e.replaceState(t,n),i()}),r)},go:(t,n)=>{s((()=>{e.go(t),i()}),n)},back:t=>{s((()=>{e.back(),i()}),t)},forward:t=>{s((()=>{e.forward(),i()}),t)},createHref:t=>e.createHref(t),block:e=>(r.push(e),1===r.length&&addEventListener(Wb,Gb,{capture:!0}),()=>{r=r.filter((t=>t!==e)),r.length||Qb()}),flush:()=>{var t;return null==(t=e.flush)?void 0:t.call(e)},destroy:()=>{var t;return null==(t=e.destroy)?void 0:t.call(e)},notify:i}}function Jb(e){return e||(e={}),{...e,key:Zb()}}function $b(e){var t,n,r;const i=null!==(t=null==e?void 0:e.window)&&void 0!==t?t:"undefined"!==typeof document?window:void 0,s=i.history.pushState,o=i.history.replaceState,a=null!==(n=null==e?void 0:e.createHref)&&void 0!==n?n:e=>e,l=null!==(r=null==e?void 0:e.parseLocation)&&void 0!==r?r:()=>Xb("".concat(i.location.pathname).concat(i.location.search).concat(i.location.hash),i.history.state);let c,u=l();let d,h;const f=()=>{if(!d)return;(d.isPush?s:o).call(i.history,d.state,"",d.href),d=void 0,h=void 0,c=void 0},p=(e,t,n)=>{const r=a(t);h||(c=u),u=Xb(t,n),d={href:r,state:n,isPush:(null==d?void 0:d.isPush)||"push"===e},h||(h=Promise.resolve().then((()=>f())))},m=()=>{u=l(),g.notify()},g=Yb({getLocation:()=>u,pushState:(e,t)=>p("push",e,t),replaceState:(e,t)=>p("replace",e,t),back:()=>i.history.back(),forward:()=>i.history.forward(),go:e=>i.history.go(e),createHref:e=>a(e),flush:f,destroy:()=>{i.history.pushState=s,i.history.replaceState=o,i.removeEventListener(Hb,m),i.removeEventListener(Kb,m)},onBlocked:e=>{c&&u!==c&&(u=c,e())}});return i.addEventListener(Hb,m),i.addEventListener(Kb,m),i.history.pushState=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=s.apply(i.history,t);return m(),r},i.history.replaceState=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=o.apply(i.history,t);return m(),r},g}function Xb(e,t){const n=e.indexOf("#"),r=e.indexOf("?");return{href:e,pathname:e.substring(0,n>0?r>0?Math.min(n,r):n:r>0?r:e.length),hash:n>-1?e.substring(n):"",search:r>-1?e.slice(r,-1===n?void 0:n):"",state:t||{}}}function Zb(){return(Math.random()+1).toString(36).substring(7)}class e_{constructor(e,t){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=e=>{var t,n;this.listeners.add(e);const r=null==(n=null==(t=this.options)?void 0:t.onSubscribe)?void 0:n.call(t,e,this);return()=>{this.listeners.delete(e),null==r||r()}},this.setState=e=>{var t,n,r;const i=this.state;this.state=(null==(t=this.options)?void 0:t.updateFn)?this.options.updateFn(i)(e):e(i),null==(r=null==(n=this.options)?void 0:n.onUpdate)||r.call(n),this._flush()},this._flush=()=>{if(this._batching)return;const e=++this._flushing;this.listeners.forEach((t=>{this._flushing===e&&t()}))},this.batch=e=>{if(this._batching)return e();this._batching=!0,e(),this._batching=!1,this._flush()},this.state=e,this.options=t}}function t_(e){if(!e)return"";const t=decodeURIComponent(e);return"false"!==t&&("true"===t||(0*+t===0&&+t+""===t?+t:t))}const n_=(r_=JSON.parse,e=>{"?"===e.substring(0,1)&&(e=e.substring(1));const t=function(e,t){let n,r;const i={},s=(t?e.substr(t.length):e).split("&");for(;n=s.shift();){const e=n.indexOf("=");if(-1!==e){r=n.slice(0,e);const t=n.slice(e+1);void 0!==i[r]?i[r]=[].concat(i[r],t_(t)):i[r]=t_(t)}else r=n,i[r]=""}return i}(e);for(const r in t){const e=t[r];if("string"===typeof e)try{t[r]=r_(e)}catch(n){}}return t});var r_;const i_=function(e,t){return n=>{n={...n},Object.keys(n).forEach((r=>{const i=n[r];"undefined"===typeof i||void 0===i?delete n[r]:n[r]=function(n){if("object"===typeof n&&null!==n)try{return e(n)}catch(r){}else if("string"===typeof n&&"function"===typeof t)try{return t(n),e(n)}catch(r){}return n}(i)}));const r=function(e,t){let n,r,i,s="";for(n in e)if(void 0!==(i=e[n]))if(Array.isArray(i))for(r=0;r<i.length;r++)s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i[r]);else s&&(s+="&"),s+=encodeURIComponent(n)+"="+encodeURIComponent(i);return(t||"")+s}(n).toString();return r?"?".concat(r):""}}(JSON.stringify,JSON.parse);const s_=["component","errorComponent","pendingComponent","notFoundComponent"];class o_{constructor(e){var t,n,r,i=this;this.tempLocationKey="".concat(Math.round(1e7*Math.random())),this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.subscribers=new Set,this.startReactTransition=e=>e(),this.update=e=>{var t;e.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const n=this.options;var r;(this.options={...this.options,...e},this.isServer=null!==(t=this.options.isServer)&&void 0!==t?t:"undefined"===typeof document,(!this.basepath||e.basepath&&e.basepath!==n.basepath)&&(void 0===e.basepath||""===e.basepath||"/"===e.basepath?this.basepath="/":this.basepath="/".concat(lb(ab(e.basepath)))),!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=null!==(r=this.options.history)&&void 0!==r?r:this.isServer?function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initialEntries:["/"]};const n=t.initialEntries;let r=null!==(e=t.initialIndex)&&void 0!==e?e:n.length-1,i={key:Zb()};return Yb({getLocation:()=>Xb(n[r],i),pushState:(e,t)=>{i=t,n.splice,r<n.length-1&&n.splice(r+1),n.push(e),r=Math.max(n.length-1,0)},replaceState:(e,t)=>{i=t,n[r]=e},back:()=>{i=Jb(i),r=Math.max(r-1,0)},forward:()=>{i=Jb(i),r=Math.min(r+1,n.length-1)},go:e=>{i=Jb(i),r=Math.min(Math.max(r+e,0),n.length-1)},createHref:e=>e})}({initialEntries:[this.basepath||"/"]}):$b(),this.latestLocation=this.parseLocation());this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new e_(function(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...e},location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter((e=>!["redirected"].includes(e.status)))}}}))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const e=this.options.notFoundRoute;e&&(e.init({originalIndex:99999999999}),this.routesById[e.id]=e);const t=e=>{e.forEach(((e,n)=>{e.init({originalIndex:n});if(yb(!this.routesById[e.id],"Duplicate routes found with id: ".concat(String(e.id))),this.routesById[e.id]=e,!e.isRoot&&e.path){const t=lb(e.fullPath);this.routesByPath[t]&&!e.fullPath.endsWith("/")||(this.routesByPath[t]=e)}const r=e.children;(null==r?void 0:r.length)&&t(r)}))};t([this.routeTree]);const n=[];Object.values(this.routesById).forEach(((e,t)=>{var r;if(e.isRoot||!e.path)return;const i=ab(e.fullPath),s=ub(i);for(;s.length>1&&"/"===(null==(r=s[0])?void 0:r.value);)s.shift();const o=s.map((e=>"/"===e.value?.75:"param"===e.type?.5:"wildcard"===e.type?.25:1));n.push({child:e,trimmed:i,parsed:s,index:t,scores:o})})),this.flatRoutes=n.sort(((e,t)=>{const n=Math.min(e.scores.length,t.scores.length);for(let r=0;r<n;r++)if(e.scores[r]!==t.scores[r])return t.scores[r]-e.scores[r];if(e.scores.length!==t.scores.length)return t.scores.length-e.scores.length;for(let r=0;r<n;r++)if(e.parsed[r].value!==t.parsed[r].value)return e.parsed[r].value>t.parsed[r].value?1:-1;return e.index-t.index})).map(((e,t)=>(e.child.rank=t,e.child)))},this.subscribe=(e,t)=>{const n={eventType:e,fn:t};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=e=>{this.subscribers.forEach((t=>{t.eventType===e.type&&t.fn(e)}))},this.parseLocation=e=>{const t=t=>{var n;let{pathname:r,search:i,hash:s,state:o}=t;const a=this.options.parseSearch(i),l=this.options.stringifySearch(a);return{pathname:r,searchStr:l,search:$w(null==e?void 0:e.search,a),hash:null!==(n=s.split("#").reverse()[0])&&void 0!==n?n:"",href:"".concat(r).concat(l).concat(s),state:$w(null==e?void 0:e.state,o)}},n=t(this.history.location),{__tempLocation:r,__tempKey:i}=n.state;if(r&&(!i||i===this.tempLocationKey)){const e=t(r);return e.state.key=n.state.key,delete e.state.__tempLocation,{...e,maskedLocation:n}}return n},this.resolvePathWithBase=(e,t)=>{const n=function(e){let{basepath:t,base:n,to:r,trailingSlash:i="never"}=e;var s,o;n=fb(t,n),r=fb(t,r);let a=ub(n);const l=ub(r);a.length>1&&"/"===(null==(s=Qw(a))?void 0:s.value)&&a.pop(),l.forEach(((e,t)=>{"/"===e.value?t?t===l.length-1&&a.push(e):a=[e]:".."===e.value?a.pop():"."===e.value||a.push(e)})),a.length>1&&("/"===(null==(o=Qw(a))?void 0:o.value)?"never"===i&&a.pop():"always"===i&&a.push({type:"pathname",value:"/"}));const c=sb([t,...a.map((e=>e.value))]);return ob(c)}({basepath:this.basepath,base:e,to:ob(t),trailingSlash:this.options.trailingSlash});return n},this.matchRoutes=(e,t,n)=>{let r={};const i=this.flatRoutes.find((t=>{var n;const i=hb(this.basepath,lb(e),{to:t.fullPath,caseSensitive:null!==(n=t.options.caseSensitive)&&void 0!==n?n:this.options.caseSensitive,fuzzy:!0});return!!i&&(r=i,!0)}));let s=i||this.routesById[Nb];const o=[s];let a=!1;for((i?"/"!==i.path&&r["**"]:lb(e))&&(this.options.notFoundRoute?o.push(this.options.notFoundRoute):a=!0);s.parentRoute;)s=s.parentRoute,o.unshift(s);const l=(()=>{if(a){if("root"!==this.options.notFoundMode)for(let e=o.length-1;e>=0;e--){const t=o[e];if(t.children)return t.id}return Nb}})(),c=o.map((e=>{var t,i;let s;const o=null!==(t=null==(i=e.options.params)?void 0:i.parse)&&void 0!==t?t:e.options.parseParams;if(o)try{const e=o(r);Object.assign(r,e)}catch(a){if(s=new l_(a.message,{cause:a}),null==n?void 0:n.throwOnError)throw s;return s}})),u=[];return o.forEach(((e,i)=>{var s,o,a,d,h,f,p,m,g,v,y;const w=u[i-1],[b,_]=(r=>{const i=null!==(r=null==w?void 0:w.search)&&void 0!==r?r:t;try{var s;const t="object"===typeof e.options.validateSearch?e.options.validateSearch.parse:e.options.validateSearch,n=null!==(s=null==t?void 0:t(i))&&void 0!==s?s:{};return[{...i,...n},void 0]}catch(o){const e=new a_(o.message,{cause:o});if(null==n?void 0:n.throwOnError)throw e;return[i,e]}})(),I=null!==(s=null==(a=(o=e.options).loaderDeps)?void 0:a.call(o,{search:b}))&&void 0!==s?s:"",E=I?JSON.stringify(I):"",S=db({path:e.fullPath,params:r}),x=db({path:e.id,params:r,leaveWildcards:!0})+E,T=this.getMatch(x),k=this.state.matches.find((e=>e.id===x))?"stay":"enter";let C;if(T)C={...T,cause:k,params:r};else{const t=e.options.loader||e.options.beforeLoad||e.lazyFn?"pending":"success";C={id:x,index:i,routeId:e.id,params:r,pathname:sb([this.basepath,S]),updatedAt:Date.now(),search:{},searchError:void 0,status:t,isFetching:!1,error:void 0,paramsError:c[i],routeContext:void 0,context:void 0,abortController:new AbortController,fetchCount:0,cause:k,loaderDeps:I,invalid:!1,preload:!1,links:null==(h=(d=e.options).links)?void 0:h.call(d),scripts:null==(p=(f=e.options).scripts)?void 0:p.call(f),staticData:e.options.staticData||{},loadPromise:rb()}}"success"===C.status&&(C.meta=null==(g=(m=e.options).meta)?void 0:g.call(m,{matches:u,match:C,params:C.params,loaderData:C.loaderData}),C.headers=null==(y=(v=e.options).headers)?void 0:y.call(v,{loaderData:C.loaderData})),(null==n?void 0:n.preload)||(C.globalNotFound=l===e.id),C.search=$w(C.search,b),C.searchError=_,u.push(C)})),u},this.cancelMatch=e=>{const t=this.getMatch(e);t&&(t.abortController.abort(),clearTimeout(t.pendingTimeout))},this.cancelMatches=()=>{var e;null==(e=this.state.pendingMatches)||e.forEach((e=>{this.cancelMatch(e.id)}))},this.buildLocation=e=>{const t=function(){var t,n,r,s,o;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=arguments.length>1?arguments[1]:void 0;var c,u,d;const h=null!=a._fromLocation?i.matchRoutes(a._fromLocation.pathname,a.fromSearch||a._fromLocation.search):i.state.matches,f=null!=a.from?h.find((e=>hb(i.basepath,lb(e.pathname),{to:a.from,caseSensitive:!1,fuzzy:!1}))):void 0,p=(null==f?void 0:f.pathname)||i.latestLocation.pathname;yb(null==a.from||null!=f,"Could not find match for from: "+a.from);const m=(null==(c=Qw(h))?void 0:c.search)||i.latestLocation.search,g=null==l?void 0:l.filter((e=>h.find((t=>t.routeId===e.routeId)))),v=i.routesById[null==(u=null==g?void 0:g.find((e=>e.pathname===p)))?void 0:u.routeId];let y=a.to?i.resolvePathWithBase(p,"".concat(a.to)):i.resolvePathWithBase(p,null!==(t=null==v?void 0:v.to)&&void 0!==t?t:p);const w={...null==(d=Qw(h))?void 0:d.params};let b=!0===(null===(n=a.params)||void 0===n||n)?w:{...w,...Yw(a.params,w)};Object.keys(b).length>0&&(null==l||l.map((e=>{var t,n;const r=i.looseRoutesById[e.routeId];return null!==(t=null==(n=null==r?void 0:r.options.params)?void 0:n.stringify)&&void 0!==t?t:r.options.stringifyParams})).filter(Boolean).forEach((e=>{b={...b,...e(b)}}))),y=db({path:y,params:null!==(r=b)&&void 0!==r?r:{},leaveWildcards:!1,leaveParams:e.leaveParams});const _=null!==(s=null==g?void 0:g.map((e=>{var t;return null!==(t=i.looseRoutesById[e.routeId].options.preSearchFilters)&&void 0!==t?t:[]})).flat().filter(Boolean))&&void 0!==s?s:[],I=null!==(o=null==g?void 0:g.map((e=>{var t;return null!==(t=i.looseRoutesById[e.routeId].options.postSearchFilters)&&void 0!==t?t:[]})).flat().filter(Boolean))&&void 0!==o?o:[],E=_.length?_.reduce(((e,t)=>t(e)),m):m,S=!0===a.search?E:a.search?Yw(a.search,E):_.length?E:{},x=$w(m,I.length?I.reduce(((e,t)=>t(e)),S):S),T=i.options.stringifySearch(x),k=!0===a.hash?i.latestLocation.hash:a.hash?Yw(a.hash,i.latestLocation.hash):void 0,C=k?"#".concat(k):"";let N=!0===a.state?i.latestLocation.state:a.state?Yw(a.state,i.latestLocation.state):{};return N=$w(i.latestLocation.state,N),{pathname:y,search:x,searchStr:T,state:N,hash:null!==k&&void 0!==k?k:"",href:"".concat(y).concat(T).concat(C),unmaskOnReload:a.unmaskOnReload}},n=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;var s;const o=t(n);let a=r?t(r):void 0;if(!a){let n={};const l=null==(s=i.options.routeMasks)?void 0:s.find((e=>{const t=hb(i.basepath,o.pathname,{to:e.from,caseSensitive:!1,fuzzy:!1});return!!t&&(n=t,!0)}));if(l){const{from:i,...s}=l;r={...Jw(e,["from"]),...s,params:n},a=t(r)}}const l=i.matchRoutes(o.pathname,o.search),c=a?i.matchRoutes(a.pathname,a.search):void 0,u=a?t(r,c):void 0,d=t(n,l);return u&&(d.maskedLocation=u),d};return e.mask?n(e,{...Jw(e,["from"]),...e.mask}):n(e)},this.commitLocation=e=>{var t;let{viewTransition:n,ignoreBlocker:r,...i}=e;const s=this.latestLocation.href===i.href,o=this.commitLocationPromise;if(this.commitLocationPromise=rb((()=>{null==o||o.resolve()})),s&&(()=>{i.state.key=this.latestLocation.state.key;const e=tb(i.state,this.latestLocation.state);return delete i.state.key,e})())this.load();else{let{maskedLocation:e,...t}=i;var a,l;if(e)t={...e,state:{...e.state,__tempKey:void 0,__tempLocation:{...t,search:t.searchStr,state:{...t.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},null!==(a=null!==(l=t.unmaskOnReload)&&void 0!==l?l:this.options.unmaskOnReload)&&void 0!==a&&a&&(t.state.__tempKey=this.tempLocationKey);this.shouldViewTransition=n,this.history[i.replace?"replace":"push"](t.href,t.state,{ignoreBlocker:r})}return this.resetNextScroll=null===(t=i.resetScroll)||void 0===t||t,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=function(){let{replace:e,resetScroll:t,viewTransition:n,ignoreBlocker:r,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=i.buildLocation(s);return i.commitLocation({...o,viewTransition:n,replace:e,resetScroll:t,ignoreBlocker:r})},this.navigate=e=>{let{from:t,to:n,__isRedirect:r,...i}=e;const s=String(n);let o;try{new URL("".concat(s)),o=!0}catch(bI){}return yb(!o,"Attempting to navigate to external url with router.navigate!"),this.buildAndCommitLocation({...i,from:t,to:n})},this.load=async()=>{let e,t;this.latestLocation=this.parseLocation(this.latestLocation),this.__store.setState((e=>({...e,loadedAt:Date.now()})));const n=new Promise((r=>{this.startReactTransition((async()=>{var i;try{const e=this.latestLocation,t=this.state.resolvedLocation,n=t.href!==e.href;let r;this.cancelMatches(),this.__store.batch((()=>{r=this.matchRoutes(e.pathname,e.search),this.__store.setState((t=>({...t,status:"pending",isLoading:!0,location:e,pendingMatches:r,cachedMatches:t.cachedMatches.filter((e=>!r.find((t=>t.id===e.id))))})))})),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:t,toLocation:e,pathChanged:n}),this.emit({type:"onBeforeLoad",fromLocation:t,toLocation:e,pathChanged:n}),await this.loadMatches({matches:r,location:e,onReady:async()=>{this.startViewTransition((async()=>{let e,t,n;this.__store.batch((()=>{this.__store.setState((r=>{const i=r.matches,s=r.pendingMatches||r.matches;return e=i.filter((e=>!s.find((t=>t.id===e.id)))),t=s.filter((e=>!i.find((t=>t.id===e.id)))),n=i.filter((e=>s.find((t=>t.id===e.id)))),{...r,isLoading:!1,matches:s,pendingMatches:void 0,cachedMatches:[...r.cachedMatches,...e.filter((e=>"error"!==e.status))]}})),this.cleanCache()})),[[e,"onLeave"],[t,"onEnter"],[n,"onStay"]].forEach((e=>{let[t,n]=e;t.forEach((e=>{var t,r;null==(r=(t=this.looseRoutesById[e.routeId].options)[n])||r.call(t,e)}))}))}))}})}catch(s){Sb(s)?(e=s,this.isServer||this.navigate({...s,replace:!0,__isRedirect:!0})):wb(s)&&(t=s),this.__store.setState((n=>({...n,statusCode:e?e.statusCode:t?404:n.matches.some((e=>"error"===e.status))?500:200,redirect:e})))}this.latestLoadPromise===n&&(null==(i=this.commitLocationPromise)||i.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),r()}))}));for(this.latestLoadPromise=n,await n;this.latestLoadPromise&&n!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=e=>{var t,n,r;const i=null!==(t=this.shouldViewTransition)&&void 0!==t?t:this.options.defaultViewTransition;delete this.shouldViewTransition,(null==(r=null==(n=i&&"undefined"!==typeof document?document:void 0)?void 0:n.startViewTransition)?void 0:r.call(n,e))||e()},this.updateMatch=(e,t)=>{var n;let r;const i=null==(n=this.state.pendingMatches)?void 0:n.find((t=>t.id===e)),s=this.state.matches.find((t=>t.id===e)),o=i?"pendingMatches":s?"matches":"cachedMatches";return this.__store.setState((n=>{var i;return{...n,[o]:null==(i=n[o])?void 0:i.map((n=>n.id===e?r=t(n):n))}})),r},this.getMatch=e=>{var t;return[...this.state.cachedMatches,...null!==(t=this.state.pendingMatches)&&void 0!==t?t:[],...this.state.matches].find((t=>t.id===e))},this.loadMatches=async e=>{let t,{location:n,matches:r,preload:i,onReady:s,updateMatch:o=this.updateMatch}=e,a=!1;const l=async()=>{a||(a=!0,await(null==s?void 0:s()))};this.isServer||this.state.matches.length||l();const c=(e,t)=>{var i,s,l;if(Sb(t))throw t;if(Eb(t)||wb(t)){if(o(e.id,(e=>({...e,status:Eb(t)?"redirected":wb(t)?"notFound":"error",isFetching:!1,error:t,beforeLoadPromise:void 0,loaderPromise:void 0}))),t.routeId||(t.routeId=e.routeId),null==(i=e.beforeLoadPromise)||i.resolve(),null==(s=e.loaderPromise)||s.resolve(),null==(l=e.loadPromise)||l.resolve(),Eb(t))throw a=!0,t=this.resolveRedirect({...t,_fromLocation:n});if(wb(t))throw this._handleNotFound(r,t,{updateMatch:o}),t}};try{await new Promise(((e,a)=>{(async()=>{var u,d,h;try{const a=(e,n,i)=>{var s,a,l;const{id:u,routeId:d}=r[e],h=this.looseRoutesById[d];if(n instanceof Promise)throw n;n.routerCode=i,t=null!==(s=t)&&void 0!==s?s:e,c(this.getMatch(u),n);try{null==(l=(a=h.options).onError)||l.call(a,n)}catch(f){n=f,c(this.getMatch(u),n)}o(u,(e=>{var t;return null==(t=e.beforeLoadPromise)||t.resolve(),{...e,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}}))};for(const[e,{id:t,routeId:c}]of r.entries()){const v=this.getMatch(t);if(v.beforeLoadPromise||v.loaderPromise)await v.beforeLoadPromise;else{try{var f,p,m;o(t,(e=>({...e,loadPromise:rb((()=>{var t;null==(t=e.loadPromise)||t.resolve()})),beforeLoadPromise:rb()})));const g=this.looseRoutesById[c],v=new AbortController,y=null==(u=r[e-1])?void 0:u.id,w=()=>{var e,t,n;return y?null!==(e=null!==(t=this.getMatch(y).context)&&void 0!==t?t:this.options.context)&&void 0!==e?e:{}:null!==(n=this.options.context)&&void 0!==n?n:{}},b=null!==(f=g.options.pendingMs)&&void 0!==f?f:this.options.defaultPendingMs;let _;!(!s||this.isServer||i||!g.options.loader&&!g.options.beforeLoad||"number"!==typeof b||b===1/0||!(null!==(p=g.options.pendingComponent)&&void 0!==p?p:this.options.defaultPendingComponent))&&(_=setTimeout((()=>{try{l()}catch{}}),b));const{paramsError:I,searchError:E}=this.getMatch(t);I&&a(e,I,"PARSE_PARAMS"),E&&a(e,E,"VALIDATE_SEARCH");const S=w();o(t,(e=>({...e,isFetching:"beforeLoad",fetchCount:e.fetchCount+1,routeContext:$w(e.routeContext,S),context:$w(e.context,S),abortController:v,pendingTimeout:_})));const{search:x,params:T,routeContext:k,cause:C}=this.getMatch(t),N={search:x,abortController:v,params:T,preload:!!i,context:k,location:n,navigate:e=>this.navigate({...e,_fromLocation:n}),buildLocation:this.buildLocation,cause:i?"preload":C},A=null!==(m=await(null==(h=(d=g.options).beforeLoad)?void 0:h.call(d,N)))&&void 0!==m?m:{};(Eb(A)||wb(A))&&a(e,A,"BEFORE_LOAD"),o(t,(e=>{const t={...e.routeContext,...A};return{...e,routeContext:$w(e.routeContext,t),context:$w(e.context,t),abortController:v}}))}catch(g){a(e,g,"BEFORE_LOAD")}o(t,(e=>{var t;return null==(t=e.beforeLoadPromise)||t.resolve(),{...e,beforeLoadPromise:void 0,isFetching:!1}}))}}const v=r.slice(0,t),y=[];v.forEach(((e,t)=>{let{id:s,routeId:a}=e;y.push((async()=>{const{loaderPromise:e}=this.getMatch(s);if(e)await e;else{var l,u,d,h;const e=y[t-1],f=this.looseRoutesById[a],p=()=>{const{params:t,loaderDeps:r,abortController:o,context:a,cause:l}=this.getMatch(s);return{params:t,deps:r,preload:!!i,parentMatchPromise:e,abortController:o,context:a,location:n,navigate:e=>this.navigate({...e,_fromLocation:n}),cause:i?"preload":l,route:f}},m=Date.now()-this.getMatch(s).updatedAt,v=i?null!==(l=null!==(u=f.options.preloadStaleTime)&&void 0!==u?u:this.options.defaultPreloadStaleTime)&&void 0!==l?l:3e4:null!==(d=null!==(h=f.options.staleTime)&&void 0!==h?h:this.options.defaultStaleTime)&&void 0!==d?d:0,w=f.options.shouldReload,b="function"===typeof w?w(p()):w;o(s,(e=>({...e,loaderPromise:rb(),preload:!!i&&!this.state.matches.find((e=>e.id===s))})));const _=async()=>{var e,t,n,i,a,l,u,d;try{const m=async()=>{const e=this.getMatch(s);e.minPendingPromise&&await e.minPendingPromise};try{f._lazyPromise=f._lazyPromise||(f.lazyFn?f.lazyFn().then((e=>{Object.assign(f.options,e.options)})):Promise.resolve());const u=this.getMatch(s).componentsPromise||f._lazyPromise.then((()=>Promise.all(s_.map((async e=>{const t=f.options[e];(null==t?void 0:t.preload)&&await t.preload()})))));o(s,(e=>({...e,isFetching:"loader",componentsPromise:u}))),await f._lazyPromise;let d=await(null==(t=(e=f.options).loader)?void 0:t.call(e,p()));this.serializeLoaderData&&(d=this.serializeLoaderData(d,{router:this,match:this.getMatch(s)})),c(this.getMatch(s),d),await m();const h=null==(i=(n=f.options).meta)?void 0:i.call(n,{matches:r,match:this.getMatch(s),params:this.getMatch(s).params,loaderData:d}),g=null==(l=(a=f.options).headers)?void 0:l.call(a,{loaderData:d});o(s,(e=>({...e,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:d,meta:h,headers:g})))}catch(bI){let t=bI;await m(),c(this.getMatch(s),bI);try{null==(d=(u=f.options).onError)||d.call(u,bI)}catch(h){t=h,c(this.getMatch(s),h)}o(s,(e=>({...e,error:t,status:"error",isFetching:!1})))}await this.getMatch(s).componentsPromise}catch(g){c(this.getMatch(s),g)}},{status:I,invalid:E}=this.getMatch(s);"success"===I&&(E||(null!==b&&void 0!==b?b:m>v))?(async()=>{try{await _()}catch(g){}})():"success"!==I&&await _();const{loaderPromise:S,loadPromise:x}=this.getMatch(s);null==S||S.resolve(),null==x||x.resolve()}o(s,(e=>({...e,isFetching:!1,loaderPromise:void 0})))})())})),await Promise.all(y),e()}catch(g){a(g)}})()})),await l()}catch(u){if(Eb(u)||wb(u))throw wb(u)&&!i&&await l(),u}return r},this.invalidate=()=>{const e=e=>({...e,invalid:!0,..."error"===e.status?{status:"pending",error:void 0}:{}});return this.__store.setState((t=>{var n;return{...t,matches:t.matches.map(e),cachedMatches:t.cachedMatches.map(e),pendingMatches:null==(n=t.pendingMatches)?void 0:n.map(e)}})),this.load()},this.resolveRedirect=e=>{const t=e;return t.href||(t.href=this.buildLocation(t).href),t},this.cleanCache=()=>{this.__store.setState((e=>({...e,cachedMatches:e.cachedMatches.filter((e=>{var t,n,r;const i=this.looseRoutesById[e.routeId];if(!i.options.loader)return!1;const s=null!==(t=e.preload?null!==(n=i.options.preloadGcTime)&&void 0!==n?n:this.options.defaultPreloadGcTime:null!==(r=i.options.gcTime)&&void 0!==r?r:this.options.defaultGcTime)&&void 0!==t?t:3e5;return"error"!==e.status&&Date.now()-e.updatedAt<s}))})))},this.preloadRoute=async e=>{var t,n;const r=this.buildLocation(e);let i=this.matchRoutes(r.pathname,r.search,{throwOnError:!0,preload:!0});const s=Object.fromEntries([...this.state.matches,...null!==(t=this.state.pendingMatches)&&void 0!==t?t:[],...this.state.cachedMatches].map((e=>[e.id,!0])));this.__store.batch((()=>{i.forEach((e=>{s[e.id]||this.__store.setState((t=>({...t,cachedMatches:[...t.cachedMatches,e]})))}))}));const o=new Set([...this.state.matches,...null!==(n=this.state.pendingMatches)&&void 0!==n?n:[]].map((e=>e.id)));try{return i=await this.loadMatches({matches:i,location:r,preload:!0,updateMatch:(e,t)=>{o.has(e)?i=i.map((n=>n.id===e?t(n):n)):this.updateMatch(e,t)}}),i}catch(a){return Eb(a)?await this.preloadRoute({...a,_fromLocation:r}):void console.error(a)}},this.matchRoute=(e,t)=>{var n;const r={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},i=this.buildLocation(r);if((null==t?void 0:t.pending)&&"pending"!==this.state.status)return!1;const s=(void 0===(null==t?void 0:t.pending)?!this.state.isLoading:t.pending)?this.latestLocation:this.state.resolvedLocation,o=hb(this.basepath,s.pathname,{...t,to:i.pathname});return!!o&&(!(e.params&&!tb(o,e.params,!0))&&(o&&(null===(n=null==t?void 0:t.includeSearch)||void 0===n||n)?!!tb(s.search,i.search,!0)&&o:o))},this.dehydrate=()=>{var e,t;const n=null!==(e=null==(t=this.options.errorSerializer)?void 0:t.serialize)&&void 0!==e?e:c_;return{state:{dehydratedMatches:this.state.matches.map((e=>({...Jw(e,["id","status","updatedAt"]),error:e.error?{data:n(e.error),__isServerError:!0}:void 0})))},manifest:this.manifest}},this.hydrate=()=>{var e,t,n;let r;"undefined"!==typeof document&&(r=this.options.transformer.parse(null==(e=window.__TSR__)?void 0:e.dehydrated)),yb(r,"Expected to find a dehydrated data on window.__TSR__.dehydrated... but we did not. Please file an issue!"),this.dehydratedData=r.payload,null==(n=(t=this.options).hydrate)||n.call(t,r.payload);const i=r.router.state,s=this.matchRoutes(this.state.location.pathname,this.state.location.search).map((e=>{const t=i.dehydratedMatches.find((t=>t.id===e.id));return yb(t,"Could not find a client-side match for dehydrated match with id: ".concat(e.id,"!")),{...e,...t}}));this.__store.setState((e=>({...e,matches:s}))),this.manifest=r.router.manifest},this.injectedHtml=[],this.injectHtml=e=>{const t=()=>(this.injectedHtml=this.injectedHtml.filter((e=>e!==t)),e);this.injectedHtml.push(t)},this.streamedKeys=new Set,this.getStreamedValue=e=>{var t;if(this.isServer)return;const n=null==(t=window.__TSR__)?void 0:t.streamedValues[e];return n?(n.parsed||(n.parsed=this.options.transformer.parse(n.value)),n.parsed):void 0},this.streamValue=(e,t)=>{var n;Uw(!this.streamedKeys.has(e),"Key has already been streamed: "+e),this.streamedKeys.add(e);const r="__TSR__.streamedValues['".concat(e,"'] = { value: ").concat(null==(n=this.serializer)?void 0:n.call(this,this.options.transformer.stringify(t)),"}");this.injectHtml("<script class='tsr-once'>".concat(r).concat("","; __TSR__.cleanScripts()<\/script>"))},this._handleNotFound=function(e,t){let{updateMatch:n=i.updateMatch}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Object.fromEntries(e.map((e=>[e.routeId,e])));let s=(t.global?i.looseRoutesById[Nb]:i.looseRoutesById[t.routeId])||i.looseRoutesById[Nb];for(;!s.options.notFoundComponent&&!i.options.defaultNotFoundComponent&&s.id!==Nb;)s=s.parentRoute,yb(s,"Found invalid route tree while trying to find not-found handler.");const o=r[s.id];yb(o,"Could not find match for route: "+s.id),n(o.id,(e=>({...e,status:"notFound",error:t,isFetching:!1}))),"BEFORE_LOAD"===t.routerCode&&s.parentRoute&&(t.routeId=s.parentRoute.id,i._handleNotFound(e,t,{updateMatch:n}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some((e=>"notFound"===e.status||e.globalNotFound)),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...e,stringifySearch:null!==(t=e.stringifySearch)&&void 0!==t?t:i_,parseSearch:null!==(n=e.parseSearch)&&void 0!==n?n:n_,transformer:null!==(r=e.transformer)&&void 0!==r?r:{parse:JSON.parse,stringify:JSON.stringify}}),"undefined"!==typeof document&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}}class a_ extends Error{}class l_ extends Error{}function c_(e){if(e instanceof Error){return{name:e.name,message:e.message}}return{data:e}}var u_=n(950);function d_(e,n){var r,i;const s=Ww(),[o,a]=t.useState(!1),l=function(e){const n=t.useRef(null);return t.useEffect((()=>{e&&("function"===typeof e?e(n.current):e.current=n.current)})),n}(n),{activeProps:c=()=>({className:"active"}),inactiveProps:u=()=>({}),activeOptions:d,hash:h,search:f,params:p,to:m,state:g,mask:v,preload:y,preloadDelay:w,replace:b,startTransition:_,resetScroll:I,viewTransition:E,children:S,target:x,disabled:T,style:k,className:C,onClick:N,onFocus:A,onMouseEnter:P,onMouseLeave:R,onTouchStart:D,ignoreBlocker:O,...L}=e,M=t.useMemo((()=>{try{return new URL("".concat(m)),"external"}catch{}return"internal"}),[m]),F=t.useMemo((()=>s.buildLocation(e)),[s,e]),U=t.useMemo((()=>null!==y&&void 0!==y?y:s.options.defaultPreload),[s.options.defaultPreload,y]),V=null!==(r=null!==w&&void 0!==w?w:s.options.defaultPreloadDelay)&&void 0!==r?r:0,j=Gw({select:e=>{var t;const n=cb(e.location.pathname,s.basepath).split("/"),r=cb(F.pathname,s.basepath).split("/").every(((e,t)=>e===n[t])),i=(null==d?void 0:d.exact)?(o=e.location.pathname,a=F.pathname,l=s.basepath,cb(o,l)===cb(a,l)):r;var o,a,l;const c=!(null==d?void 0:d.includeHash)||e.location.hash===F.hash,u=null!==(t=null==d?void 0:d.includeSearch)&&void 0!==t&&!t||tb(e.location.search,F.search,!(null==d?void 0:d.exact));return i&&c&&u}}),z=t.useCallback((()=>{s.preloadRoute(e).catch((e=>{console.warn(e),console.warn("Error preloading route! \u261d\ufe0f")}))}),[e,s]);if(function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=t.useRef("function"===typeof IntersectionObserver),o=t.useRef(null);t.useEffect((()=>{if(e.current&&s.current&&!i.disabled)return o.current=new IntersectionObserver((e=>{let[t]=e;n(t)}),r),o.current.observe(e.current),()=>{var e;null==(e=o.current)||e.disconnect()}}),[n,r,i.disabled,e]),o.current}(l,t.useCallback((e=>{(null==e?void 0:e.isIntersecting)&&z()}),[z]),{rootMargin:"100px"},{disabled:!!T||"viewport"!==U}),"external"===M)return{...L,ref:l,type:M,href:m,...S&&{children:S},...x&&{target:x},...T&&{disabled:T},...k&&{style:k},...C&&{className:C},...N&&{onClick:N},...A&&{onFocus:A},...P&&{onMouseEnter:P},...R&&{onMouseLeave:R},...D&&{onTouchStart:D}};const B=e=>{T||U&&z()},q=B,H=e=>t=>{var n;null==(n=t.persist)||n.call(t),e.filter(Boolean).forEach((e=>{t.defaultPrevented||e(t)}))},K=j&&null!==(i=Yw(c,{}))&&void 0!==i?i:{},W=j?{}:Yw(u,{}),G=[C,K.className,W.className].filter(Boolean).join(" "),Q={...k,...K.style,...W.style};return{...K,...W,...L,href:T?void 0:F.maskedLocation?s.history.createHref(F.maskedLocation.href):s.history.createHref(F.href),ref:l,onClick:H([N,e=>{if(!T&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)&&!e.defaultPrevented&&(!x||"_self"===x)&&0===e.button){e.preventDefault(),(0,u_.flushSync)((()=>{a(!0)}));const t=s.subscribe("onResolved",(()=>{t(),a(!1)}));s.commitLocation({...F,replace:b,resetScroll:I,startTransition:_,viewTransition:E,ignoreBlocker:O})}}]),onFocus:H([A,B]),onMouseEnter:H([P,e=>{if(T)return;const t=e.target||{};if(U){if(t.preloadTimeout)return;t.preloadTimeout=setTimeout((()=>{t.preloadTimeout=null,z()}),V)}}]),onMouseLeave:H([R,e=>{if(T)return;const t=e.target||{};t.preloadTimeout&&(clearTimeout(t.preloadTimeout),t.preloadTimeout=null)}]),onTouchStart:H([D,q]),disabled:!!T,target:x,...Object.keys(Q).length&&{style:Q},...G&&{className:G},...T&&{role:"link","aria-disabled":!0},...j&&{"data-status":"active","aria-current":"page"},...o&&{"data-transitioning":"transitioning"}}}const h_=t.forwardRef(((e,n)=>{const{_asChild:r,...i}=e,{type:s,ref:o,...a}=d_(i,n),l="function"===typeof i.children?i.children({isActive:"active"===a["data-status"]}):i.children;return"undefined"===typeof r&&delete a.disabled,t.createElement(r||"a",{...a,ref:o},l)}));function f_(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.brands.some((t=>e.test(t.brand))))||e.test(window.navigator.userAgent))}function p_(e){var t;return"undefined"!==typeof window&&null!=window.navigator&&e.test((null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.platform)||window.navigator.platform)}function m_(e){let t=null;return()=>(null==t&&(t=e()),t)}const g_=m_((function(){return p_(/^Mac/i)})),v_=m_((function(){return p_(/^iPhone/i)})),y_=m_((function(){return p_(/^iPad/i)||g_()&&navigator.maxTouchPoints>1})),w_=m_((function(){return v_()||y_()})),b_=(m_((function(){return g_()||w_()})),m_((function(){return f_(/AppleWebKit/i)&&!b_()})),m_((function(){return f_(/Chrome/i)}))),__=m_((function(){return f_(/Android/i)}));m_((function(){return f_(/Firefox/i)}));const I_=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.ownerDocument)&&void 0!==t?t:document},E_=e=>{if(e&&"window"in e&&e.window===e)return e;return I_(e).defaultView||window};let S_=null,x_=new Set,T_=new Map,k_=!1,C_=!1;const N_={Tab:!0,Escape:!0};function A_(e,t){for(let n of x_)n(e,t)}function P_(e){k_=!0,function(e){return!(e.metaKey||!g_()&&e.altKey||e.ctrlKey||"Control"===e.key||"Shift"===e.key||"Meta"===e.key)}(e)&&(S_="keyboard",A_("keyboard",e))}function R_(e){S_="pointer","mousedown"!==e.type&&"pointerdown"!==e.type||(k_=!0,A_("pointer",e))}function D_(e){var t;(0===(t=e).mozInputSource&&t.isTrusted||(__()&&t.pointerType?"click"===t.type&&1===t.buttons:0===t.detail&&!t.pointerType))&&(k_=!0,S_="virtual")}function O_(e){e.target!==window&&e.target!==document&&(k_||C_||(S_="virtual",A_("virtual",e)),k_=!1,C_=!1)}function L_(){k_=!1,C_=!0}function M_(e){if("undefined"===typeof window||T_.get(E_(e)))return;const t=E_(e),n=I_(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){k_=!0,r.apply(this,arguments)},n.addEventListener("keydown",P_,!0),n.addEventListener("keyup",P_,!0),n.addEventListener("click",D_,!0),t.addEventListener("focus",O_,!0),t.addEventListener("blur",L_,!1),"undefined"!==typeof PointerEvent?(n.addEventListener("pointerdown",R_,!0),n.addEventListener("pointermove",R_,!0),n.addEventListener("pointerup",R_,!0)):(n.addEventListener("mousedown",R_,!0),n.addEventListener("mousemove",R_,!0),n.addEventListener("mouseup",R_,!0)),t.addEventListener("beforeunload",(()=>{F_(e)}),{once:!0}),T_.set(t,{focus:r})}const F_=(e,t)=>{const n=E_(e),r=I_(e);t&&r.removeEventListener("DOMContentLoaded",t),T_.has(n)&&(n.HTMLElement.prototype.focus=T_.get(n).focus,r.removeEventListener("keydown",P_,!0),r.removeEventListener("keyup",P_,!0),r.removeEventListener("click",D_,!0),n.removeEventListener("focus",O_,!0),n.removeEventListener("blur",L_,!1),"undefined"!==typeof PointerEvent?(r.removeEventListener("pointerdown",R_,!0),r.removeEventListener("pointermove",R_,!0),r.removeEventListener("pointerup",R_,!0)):(r.removeEventListener("mousedown",R_,!0),r.removeEventListener("mousemove",R_,!0),r.removeEventListener("mouseup",R_,!0)),T_.delete(n))};function U_(){return"pointer"!==S_}"undefined"!==typeof document&&function(e){const t=I_(e);let n;"loading"!==t.readyState?M_(e):(n=()=>{M_(e)},t.addEventListener("DOMContentLoaded",n))}();const V_=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function j_(e,n,r){M_(),(0,t.useEffect)((()=>{let t=(t,n)=>{(function(e,t,n){var r;const i="undefined"!==typeof window?E_(null===n||void 0===n?void 0:n.target).HTMLInputElement:HTMLInputElement,s="undefined"!==typeof window?E_(null===n||void 0===n?void 0:n.target).HTMLTextAreaElement:HTMLTextAreaElement,o="undefined"!==typeof window?E_(null===n||void 0===n?void 0:n.target).HTMLElement:HTMLElement,a="undefined"!==typeof window?E_(null===n||void 0===n?void 0:n.target).KeyboardEvent:KeyboardEvent;return!((e=e||(null===n||void 0===n?void 0:n.target)instanceof i&&!V_.has(null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.type)||(null===n||void 0===n?void 0:n.target)instanceof s||(null===n||void 0===n?void 0:n.target)instanceof o&&(null===n||void 0===n?void 0:n.target.isContentEditable))&&"keyboard"===t&&n instanceof a&&!N_[n.key])})(!!(null===r||void 0===r?void 0:r.isTextInput),t,n)&&e(U_())};return x_.add(t),()=>{x_.delete(t)}}),n)}const z_="undefined"!==typeof document?t.useLayoutEffect:()=>{};function B_(e){const n=(0,t.useRef)(null);return z_((()=>{n.current=e}),[e]),(0,t.useCallback)((function(){const e=n.current;return null===e||void 0===e?void 0:e(...arguments)}),[])}class q_{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(e,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}}function H_(e){let n=(0,t.useRef)({isFocused:!1,observer:null});z_((()=>{const e=n.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}}),[]);let r=B_((t=>{null===e||void 0===e||e(t)}));return(0,t.useCallback)((e=>{if(e.target instanceof HTMLButtonElement||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement){n.current.isFocused=!0;let t=e.target,i=e=>{n.current.isFocused=!1,t.disabled&&r(new q_("blur",e)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};t.addEventListener("focusout",i,{once:!0}),n.current.observer=new MutationObserver((()=>{if(n.current.isFocused&&t.disabled){var e;null===(e=n.current.observer)||void 0===e||e.disconnect();let r=t===document.activeElement?null:document.activeElement;t.dispatchEvent(new FocusEvent("blur",{relatedTarget:r})),t.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:r}))}})),n.current.observer.observe(t,{attributes:!0,attributeFilter:["disabled"]})}}),[r])}function K_(e){let{isDisabled:n,onFocus:r,onBlur:i,onFocusChange:s}=e;const o=(0,t.useCallback)((e=>{if(e.target===e.currentTarget)return i&&i(e),s&&s(!1),!0}),[i,s]),a=H_(o),l=(0,t.useCallback)((e=>{const t=I_(e.target);e.target===e.currentTarget&&t.activeElement===e.target&&(r&&r(e),s&&s(!0),a(e))}),[s,r,a]);return{focusProps:{onFocus:!n&&(r||s||i)?l:void 0,onBlur:n||!i&&!s?void 0:o}}}function W_(e){let{isDisabled:n,onBlurWithin:r,onFocusWithin:i,onFocusWithinChange:s}=e,o=(0,t.useRef)({isFocusWithin:!1}),a=(0,t.useCallback)((e=>{o.current.isFocusWithin&&!e.currentTarget.contains(e.relatedTarget)&&(o.current.isFocusWithin=!1,r&&r(e),s&&s(!1))}),[r,s,o]),l=H_(a),c=(0,t.useCallback)((e=>{o.current.isFocusWithin||document.activeElement!==e.target||(i&&i(e),s&&s(!0),o.current.isFocusWithin=!0,l(e))}),[i,s,l]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:a}}}function G_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{autoFocus:n=!1,isTextInput:r,within:i}=e,s=(0,t.useRef)({isFocused:!1,isFocusVisible:n||U_()}),[o,a]=(0,t.useState)(!1),[l,c]=(0,t.useState)((()=>s.current.isFocused&&s.current.isFocusVisible)),u=(0,t.useCallback)((()=>c(s.current.isFocused&&s.current.isFocusVisible)),[]),d=(0,t.useCallback)((e=>{s.current.isFocused=e,a(e),u()}),[u]);j_((e=>{s.current.isFocusVisible=e,u()}),[],{isTextInput:r});let{focusProps:h}=K_({isDisabled:i,onFocusChange:d}),{focusWithinProps:f}=W_({isDisabled:!i,onFocusWithinChange:d});return{isFocused:o,isFocusVisible:l,focusProps:i?f:h}}let Q_=!1,Y_=0;function J_(){Q_=!0,setTimeout((()=>{Q_=!1}),50)}function $_(e){"touch"===e.pointerType&&J_()}function X_(){if("undefined"!==typeof document)return"undefined"!==typeof PointerEvent?document.addEventListener("pointerup",$_):document.addEventListener("touchend",J_),Y_++,()=>{Y_--,Y_>0||("undefined"!==typeof PointerEvent?document.removeEventListener("pointerup",$_):document.removeEventListener("touchend",J_))}}function Z_(e){let{onHoverStart:n,onHoverChange:r,onHoverEnd:i,isDisabled:s}=e,[o,a]=(0,t.useState)(!1),l=(0,t.useRef)({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;(0,t.useEffect)(X_,[]);let{hoverProps:c,triggerHoverEnd:u}=(0,t.useMemo)((()=>{let e=(e,t)=>{if(l.pointerType=t,s||"touch"===t||l.isHovered||!e.currentTarget.contains(e.target))return;l.isHovered=!0;let i=e.currentTarget;l.target=i,n&&n({type:"hoverstart",target:i,pointerType:t}),r&&r(!0),a(!0)},t=(e,t)=>{if(l.pointerType="",l.target=null,"touch"===t||!l.isHovered)return;l.isHovered=!1;let n=e.currentTarget;i&&i({type:"hoverend",target:n,pointerType:t}),r&&r(!1),a(!1)},o={};return"undefined"!==typeof PointerEvent?(o.onPointerEnter=t=>{Q_&&"mouse"===t.pointerType||e(t,t.pointerType)},o.onPointerLeave=e=>{!s&&e.currentTarget.contains(e.target)&&t(e,e.pointerType)}):(o.onTouchStart=()=>{l.ignoreEmulatedMouseEvents=!0},o.onMouseEnter=t=>{l.ignoreEmulatedMouseEvents||Q_||e(t,"mouse"),l.ignoreEmulatedMouseEvents=!1},o.onMouseLeave=e=>{!s&&e.currentTarget.contains(e.target)&&t(e,"mouse")}),{hoverProps:o,triggerHoverEnd:t}}),[n,r,i,s,l]);return(0,t.useEffect)((()=>{s&&u({currentTarget:l.target},l.pointerType)}),[s]),{hoverProps:c,isHovered:o}}var eI=Object.defineProperty,tI=(e,t,n)=>(((e,t,n)=>{t in e?eI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let nI=new class{constructor(){tI(this,"current",this.detect()),tI(this,"handoffState","pending"),tI(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}};function rI(e){return nI.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function iI(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function sI(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add((()=>e.removeEventListener(n,r,i)))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add((()=>cancelAnimationFrame(e)))},nextFrame(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.requestAnimationFrame((()=>t.requestAnimationFrame(...n)))},setTimeout(){let e=setTimeout(...arguments);return t.add((()=>clearTimeout(e)))},microTask(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i={current:!0};return iI((()=>{i.current&&n[0]()})),t.add((()=>{i.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=sI();return e(t),this.add((()=>t.dispose()))},add:t=>(e.includes(t)||e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function oI(){let[e]=(0,t.useState)(sI);return(0,t.useEffect)((()=>()=>e.dispose()),[e]),e}let aI=(e,n)=>{nI.isServer?(0,t.useEffect)(e,n):(0,t.useLayoutEffect)(e,n)};function lI(e){let n=(0,t.useRef)(e);return aI((()=>{n.current=e}),[e]),n}let cI=function(e){let n=lI(e);return t.useCallback((function(){return n.current(...arguments)}),[n])};function uI(){let{disabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,t.useRef)(null),[r,i]=(0,t.useState)(!1),s=oI(),o=cI((()=>{n.current=null,i(!1),s.dispose()})),a=cI((e=>{if(s.dispose(),null===n.current){n.current=e.currentTarget,i(!0);{let t=rI(e.currentTarget);s.addEventListener(t,"pointerup",o,!1),s.addEventListener(t,"pointermove",(e=>{if(n.current){let t=function(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}(e);i(function(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}(t,n.current.getBoundingClientRect()))}}),!1),s.addEventListener(t,"pointercancel",o,!1)}}}));return{pressed:r,pressProps:e?{}:{onPointerDown:a,onPointerUp:o,onClick:o}}}function dI(e){var t;if(e.type)return e.type;let n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function hI(e,n){let[r,i]=(0,t.useState)((()=>dI(e)));return aI((()=>{i(dI(e))}),[e.type,e.as]),aI((()=>{r||n.current&&n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&i("button")}),[r,n]),r}let fI=Symbol();function pI(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object.assign(e,{[fI]:t})}function mI(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i=(0,t.useRef)(n);(0,t.useEffect)((()=>{i.current=n}),[n]);let s=cI((e=>{for(let t of i.current)null!=t&&("function"==typeof t?t(e):t.current=e)}));return n.every((e=>null==e||(null==e?void 0:e[fI])))?void 0:s}var gI=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(gI||{});function vI(e){let t={};for(let n in e)!0===e[n]&&(t["data-".concat(n)]="");return t}function yI(e,n,r,i){let[s,o]=(0,t.useState)(r),{hasFlag:a,addFlag:l,removeFlag:c}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[n,r]=(0,t.useState)(e),i=(0,t.useCallback)((e=>r(e)),[n]),s=(0,t.useCallback)((e=>r((t=>t|e))),[n]),o=(0,t.useCallback)((e=>(n&e)===e),[n]),a=(0,t.useCallback)((e=>r((t=>t&~e))),[r]),l=(0,t.useCallback)((e=>r((t=>t^e))),[r]);return{flags:n,setFlag:i,addFlag:s,hasFlag:o,removeFlag:a,toggleFlag:l}}(e&&s?3:0),u=(0,t.useRef)(!1),d=(0,t.useRef)(!1),h=oI();return aI((function t(){var s;if(!e)return;r&&o(!0);let a=n.current;return a?(null==(s=null==i?void 0:i.start)||s.call(i,r),function(e,t){let{prepare:n,run:r,done:i,inFlight:s}=t,o=sI();return function(e,t){let{inFlight:n,prepare:r}=t;if(null!=n&&n.current)return void r();let i=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=i}(e,{prepare:n,inFlight:s}),o.nextFrame((()=>{o.add(wI(e,i)),r()})),o.dispose}(a,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(r?(l(3),c(4)):(l(4),c(2)))},run(){d.current?r?(c(3),l(4)):(c(4),l(3)):r?c(1):l(1)},done(){var e;d.current&&"function"==typeof a.getAnimations&&a.getAnimations().length>0||(u.current=!1,c(7),r||o(!1),null==(e=null==i?void 0:i.end)||e.call(i,r))}})):r?(l(3),h.nextFrame((()=>t()))):void 0}),[e,r,n,h]),e?[s,{closed:a(1),enter:a(2),leave:a(4),transition:a(2)||a(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function wI(e,t){let n=function(e){let t={called:!1};return function(){if(!t.called)return t.called=!0,e(...arguments)}}(t),r=sI();if(!e)return r.dispose;let{transitionDuration:i,transitionDelay:s}=getComputedStyle(e),[o,a]=[i,s].map((e=>{let[t=0]=e.split(",").filter(Boolean).map((e=>e.includes("ms")?parseFloat(e):1e3*parseFloat(e))).sort(((e,t)=>t-e));return t})),l=o+a;if(0!==l){let t=r.group((r=>{let i=r.setTimeout((()=>{n(),r.dispose()}),l);r.addEventListener(e,"transitionrun",(s=>{s.target===s.currentTarget&&(i(),r.addEventListener(e,"transitioncancel",(e=>{e.target===e.currentTarget&&(n(),t())})))}))}));r.addEventListener(e,"transitionend",(e=>{e.target===e.currentTarget&&(n(),r.dispose())}))}else n();return r.dispose}let bI=(0,t.createContext)((()=>{}));function _I(e){let{value:n,children:r}=e;return t.createElement(bI.Provider,{value:n},r)}let II=(0,t.createContext)(null);II.displayName="OpenClosedContext";var EI=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(EI||{});function SI(){return(0,t.useContext)(II)}function xI(e){let{value:n,children:r}=e;return t.createElement(II.Provider,{value:n},r)}function TI(e){let{children:n}=e;return t.createElement(II.Provider,{value:null},n)}function kI(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}function CI(e,t){if(e in t){let s=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof s?s(...r):s}let s=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map((e=>'"'.concat(e,'"'))).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(s,CI),s}function NI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}var AI,PI=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(PI||{}),RI=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(RI||{});function DI(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:i,features:s,visible:o=!0,name:a,mergeRefs:l}=e;l=null!=l?l:MI;let c=FI(n,t);if(o)return OI(c,r,i,a,l);let u=null!=s?s:0;if(2&u){let{static:e=!1,...t}=c;if(e)return OI(t,r,i,a,l)}if(1&u){let{unmount:e=!0,...t}=c;return CI(e?0:1,{0:()=>null,1:()=>OI({...t,hidden:!0,style:{display:"none"}},r,i,a,l)})}return OI(c,r,i,a,l)}function OI(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,{as:o=r,children:a,refName:l="ref",...c}=zI(e,["unmount","static"]),u=void 0!==e.ref?{[l]:e.ref}:{},d="function"==typeof a?a(n):a;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(n)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let h={};if(n){let e=!1,t=[];for(let[r,i]of Object.entries(n))"boolean"==typeof i&&(e=!0),!0===i&&t.push(r.replace(/([A-Z])/g,(e=>"-".concat(e.toLowerCase()))));if(e){h["data-headlessui-state"]=t.join(" ");for(let e of t)h["data-".concat(e)]=""}}if(o===t.Fragment&&(Object.keys(jI(c)).length>0||Object.keys(jI(h)).length>0)){if((0,t.isValidElement)(d)&&!(Array.isArray(d)&&d.length>1)){let e=d.props,n=null==e?void 0:e.className,r="function"==typeof n?function(){return NI(n(...arguments),c.className)}:NI(n,c.className),i=r?{className:r}:{},o=FI(d.props,jI(zI(c,["ref"])));for(let t in h)t in o&&delete h[t];return(0,t.cloneElement)(d,Object.assign({},o,h,u,{ref:s(d.ref,u.ref)},i))}if(Object.keys(jI(c)).length>0)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(i,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(jI(c)).concat(Object.keys(jI(h))).map((e=>"  - ".concat(e))).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>"  - ".concat(e))).join("\n")].join("\n"))}return(0,t.createElement)(o,Object.assign({},zI(c,["ref"]),o!==t.Fragment&&u,o!==t.Fragment&&h),d)}function LI(){let e=(0,t.useRef)([]),n=(0,t.useCallback)((t=>{for(let n of e.current)null!=n&&("function"==typeof n?n(t):n.current=t)}),[]);return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(!r.every((e=>null==e)))return e.current=r,n}}function MI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((e=>null==e))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}function FI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let s of t)for(let e in s)e.startsWith("on")&&"function"==typeof s[e]?(null!=i[e]||(i[e]=[]),i[e].push(s[e])):r[e]=s[e];if(r.disabled||r["aria-disabled"])for(let s in i)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(i[s]=[e=>{var t;return null==(t=null==e?void 0:e.preventDefault)?void 0:t.call(e)}]);for(let s in i)Object.assign(r,{[s](e){let t=i[s];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(let i of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;i(e,...r)}}});return r}function UI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let s of t)for(let e in s)e.startsWith("on")&&"function"==typeof s[e]?(null!=i[e]||(i[e]=[]),i[e].push(s[e])):r[e]=s[e];for(let s in i)Object.assign(r,{[s](){let e=i[s];for(let t of e)null==t||t(...arguments)}});return r}function VI(e){var n;return Object.assign((0,t.forwardRef)(e),{displayName:null!=(n=e.displayName)?n:e.name})}function jI(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function zI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let BI=null!=(AI=t.startTransition)?AI:function(e){e()};var qI=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(qI||{}),HI=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(HI||{}),KI=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(KI||{});let WI={0:e=>({...e,disclosureState:CI(e.disclosureState,{0:1,1:0})}),1:e=>1===e.disclosureState?e:{...e,disclosureState:1},4:e=>!0===e.linkedPanel?e:{...e,linkedPanel:!0},5:e=>!1===e.linkedPanel?e:{...e,linkedPanel:!1},2:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},3:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId}},GI=(0,t.createContext)(null);function QI(e){let n=(0,t.useContext)(GI);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <Disclosure /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,QI),t}return n}GI.displayName="DisclosureContext";let YI=(0,t.createContext)(null);function JI(e){let n=(0,t.useContext)(YI);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <Disclosure /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,JI),t}return n}YI.displayName="DisclosureAPIContext";let $I=(0,t.createContext)(null);function XI(e,t){return CI(t.type,WI,e,t)}$I.displayName="DisclosurePanelContext";let ZI=t.Fragment;let eE=PI.RenderStrategy|PI.Static;let tE=VI((function(e,n){let{defaultOpen:r=!1,...i}=e,s=(0,t.useRef)(null),o=mI(n,pI((e=>{s.current=e}),void 0===e.as||e.as===t.Fragment)),a=(0,t.useRef)(null),l=(0,t.useRef)(null),c=(0,t.useReducer)(XI,{disclosureState:r?0:1,linkedPanel:!1,buttonRef:l,panelRef:a,buttonId:null,panelId:null}),[{disclosureState:u,buttonId:d},h]=c,f=cI((e=>{h({type:1});let t=rI(s);if(!t||!d)return;let n=e?e instanceof HTMLElement?e:e.current instanceof HTMLElement?e.current:t.getElementById(d):t.getElementById(d);null==n||n.focus()})),p=(0,t.useMemo)((()=>({close:f})),[f]),m=(0,t.useMemo)((()=>({open:0===u,close:f})),[u,f]),g={ref:o};return t.createElement(GI.Provider,{value:c},t.createElement(YI.Provider,{value:p},t.createElement(_I,{value:f},t.createElement(xI,{value:CI(u,{0:EI.Open,1:EI.Closed})},DI({ourProps:g,theirProps:i,slot:m,defaultTag:ZI,name:"Disclosure"})))))})),nE=VI((function(e,n){let r=(0,t.useId)(),{id:i="headlessui-disclosure-button-".concat(r),disabled:s=!1,autoFocus:o=!1,...a}=e,[l,c]=QI("Disclosure.Button"),u=(0,t.useContext)($I),d=null!==u&&u===l.panelId,h=(0,t.useRef)(null),f=mI(h,n,d?null:l.buttonRef),p=LI();(0,t.useEffect)((()=>{if(!d)return c({type:2,buttonId:i}),()=>{c({type:2,buttonId:null})}}),[i,c,d]);let m=cI((e=>{var t;if(d){if(1===l.disclosureState)return;switch(e.key){case qI.Space:case qI.Enter:e.preventDefault(),e.stopPropagation(),c({type:0}),null==(t=l.buttonRef.current)||t.focus()}}else switch(e.key){case qI.Space:case qI.Enter:e.preventDefault(),e.stopPropagation(),c({type:0})}})),g=cI((e=>{if(e.key===qI.Space)e.preventDefault()})),v=cI((e=>{var t;kI(e.currentTarget)||s||(d?(c({type:0}),null==(t=l.buttonRef.current)||t.focus()):c({type:0}))})),{isFocusVisible:y,focusProps:w}=G_({autoFocus:o}),{isHovered:b,hoverProps:_}=Z_({isDisabled:s}),{pressed:I,pressProps:E}=uI({disabled:s}),S=(0,t.useMemo)((()=>({open:0===l.disclosureState,hover:b,active:I,disabled:s,focus:y,autofocus:o})),[l,b,I,y,s,o]),x=hI(e,h);return DI({mergeRefs:p,ourProps:UI(d?{ref:f,type:x,disabled:s||void 0,autoFocus:o,onKeyDown:m,onClick:v}:{ref:f,id:i,type:x,"aria-expanded":0===l.disclosureState,"aria-controls":l.linkedPanel?l.panelId:void 0,disabled:s||void 0,autoFocus:o,onKeyDown:m,onKeyUp:g,onClick:v},w,_,E),theirProps:a,slot:S,defaultTag:"button",name:"Disclosure.Button"})})),rE=VI((function(e,n){let r=(0,t.useId)(),{id:i="headlessui-disclosure-panel-".concat(r),transition:s=!1,...o}=e,[a,l]=QI("Disclosure.Panel"),{close:c}=JI("Disclosure.Panel"),u=LI(),d=mI(n,a.panelRef,(e=>{BI((()=>l({type:e?4:5})))}));(0,t.useEffect)((()=>(l({type:3,panelId:i}),()=>{l({type:3,panelId:null})})),[i,l]);let h=SI(),[f,p]=yI(s,a.panelRef,null!==h?(h&EI.Open)===EI.Open:0===a.disclosureState),m=(0,t.useMemo)((()=>({open:0===a.disclosureState,close:c})),[a.disclosureState,c]),g={ref:d,id:i,...vI(p)};return t.createElement(TI,null,t.createElement($I.Provider,{value:a.panelId},DI({mergeRefs:u,ourProps:g,theirProps:o,slot:m,defaultTag:"div",features:eE,visible:f,name:"Disclosure.Panel"})))})),iE=Object.assign(tE,{Button:nE,Panel:rE});function sE(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null===e?null:"current"in e?e.current:e,[i,s]=(0,t.useReducer)((()=>({})),{}),o=(0,t.useMemo)((()=>function(e){if(null===e)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}(r)),[r,i]);return aI((()=>{if(!r)return;let e=new ResizeObserver(s);return e.observe(r),()=>{e.disconnect()}}),[r]),n?{width:"".concat(o.width,"px"),height:"".concat(o.height,"px")}:o}class oE extends Map{constructor(e){super(),this.factory=e}get(e){let t=super.get(e);return void 0===t&&(t=this.factory(e),this.set(e,t)),t}}function aE(e,t){let n=e(),r=new Set;return{getSnapshot:()=>n,subscribe:e=>(r.add(e),()=>r.delete(e)),dispatch(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];let a=t[e].call(n,...s);a&&(n=a,r.forEach((e=>e())))}}}function lE(e){return(0,t.useSyncExternalStore)(e.subscribe,e.getSnapshot,e.getSnapshot)}let cE=new oE((()=>aE((()=>[]),{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(-1===t)return this;let n=this.slice();return n.splice(t,1),n}})));function uE(e,n){let r=cE.get(n),i=(0,t.useId)(),s=lE(r);if(aI((()=>{if(e)return r.dispatch("ADD",i),()=>r.dispatch("REMOVE",i)}),[r,e]),!e)return!1;let o=s.indexOf(i),a=s.length;return-1===o&&(o=a,a+=1),o===a-1}let dE=new Map,hE=new Map;function fE(e){var t;let n=null!=(t=hE.get(e))?t:0;return hE.set(e,n+1),0!==n||(dE.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0),()=>pE(e)}function pE(e){var t;let n=null!=(t=hE.get(e))?t:1;if(1===n?hE.delete(e):hE.set(e,n-1),1!==n)return;let r=dE.get(e);r&&(null===r["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,dE.delete(e))}let mE=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>"".concat(e,":not([tabindex='-1'])"))).join(","),gE=["[data-autofocus]"].map((e=>"".concat(e,":not([tabindex='-1'])"))).join(",");var vE=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(vE||{}),yE=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(yE||{}),wE=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(wE||{});function bE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(mE)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var _E=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(_E||{});function IE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;return e!==(null==(n=rI(e))?void 0:n.body)&&CI(t,{0:()=>e.matches(mE),1(){let t=e;for(;null!==t;){if(t.matches(mE))return!0;t=t.parentElement}return!1}})}function EE(e){let t=rI(e);sI().nextFrame((()=>{t&&!IE(t.activeElement,0)&&function(e){null==e||e.focus({preventScroll:!0})}(e)}))}var SE=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(SE||{});"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let xE=["textarea","input"].join(",");function TE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let s=r.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function kE(e,t){return function(e,t){let{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?TE(e):e:64&t?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(gE)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}(e):bE(e);i.length>0&&o.length>1&&(o=o.filter((e=>!i.some((t=>null!=t&&"current"in t?(null==t?void 0:t.current)===e:t===e))))),r=null!=r?r:s.activeElement;let a,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,o.indexOf(r))-1;if(4&t)return Math.max(0,o.indexOf(r))+1;if(8&t)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=32&t?{preventScroll:!0}:{},d=0,h=o.length;do{if(d>=h||d+h<=0)return 0;let e=c+d;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}a=o[e],null==a||a.focus(u),d+=l}while(a!==s.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,xE))&&n}(a)&&a.select(),2}(bE(),t,{relativeTo:e})}function CE(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function NE(){return CE()||/Android/gi.test(window.navigator.userAgent)}function AE(e,n,r,i){let s=lI(r);(0,t.useEffect)((()=>{if(e)return document.addEventListener(n,t,i),()=>document.removeEventListener(n,t,i);function t(e){s.current(e)}}),[e,n,i])}const PE=30;function RE(e,n,r){let i=uE(e,"outside-click"),s=lI(r),o=(0,t.useCallback)((function(e,t){if(e.defaultPrevented)return;let r=t(e);if(null===r||!r.getRootNode().contains(r)||!r.isConnected)return;let i=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(n);for(let n of i){if(null===n)continue;let t=n instanceof HTMLElement?n:n.current;if(null!=t&&t.contains(r)||e.composed&&e.composedPath().includes(t))return}return!IE(r,_E.Loose)&&-1!==r.tabIndex&&e.preventDefault(),s.current(e,r)}),[s]),a=(0,t.useRef)(null);AE(i,"pointerdown",(e=>{var t,n;a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),!0),AE(i,"mousedown",(e=>{var t,n;a.current=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target}),!0),AE(i,"click",(e=>{NE()||a.current&&(o(e,(()=>a.current)),a.current=null)}),!0);let l=(0,t.useRef)({x:0,y:0});AE(i,"touchstart",(e=>{l.current.x=e.touches[0].clientX,l.current.y=e.touches[0].clientY}),!0),AE(i,"touchend",(e=>{let t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!(Math.abs(t-l.current.x)>=PE||Math.abs(n-l.current.y)>=PE))return o(e,(()=>e.target instanceof HTMLElement?e.target:null))}),!0),function(e,n,r,i){let s=lI(r);(0,t.useEffect)((()=>{if(e)return window.addEventListener(n,t,i),()=>window.removeEventListener(n,t,i);function t(e){s.current(e)}}),[e,n,i])}(i,"blur",(e=>o(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}function DE(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,t.useMemo)((()=>rI(...n)),[...n])}function OE(){let e;return{before(t){let{doc:n}=t;var r;let i=n.documentElement,s=null!=(r=n.defaultView)?r:window;e=Math.max(0,s.innerWidth-i.clientWidth)},after(t){let{doc:n,d:r}=t,i=n.documentElement,s=Math.max(0,i.clientWidth-i.offsetWidth),o=Math.max(0,e-s);r.style(i,"paddingRight","".concat(o,"px"))}}}function LE(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ME=aE((()=>new Map),{PUSH(e,t){var n;let r=null!=(n=this.get(e))?n:{doc:e,count:0,d:sI(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT(e){let{doc:t,d:n,meta:r}=e,i={doc:t,d:n,meta:LE(r)},s=[CE()?{before(e){let{doc:t,d:n,meta:r}=e;function i(e){return r.containers.flatMap((e=>e())).some((t=>t.contains(e)))}n.microTask((()=>{var e;if("auto"!==window.getComputedStyle(t.documentElement).scrollBehavior){let e=sI();e.style(t.documentElement,"scrollBehavior","auto"),n.add((()=>n.microTask((()=>e.dispose()))))}let r=null!=(e=window.scrollY)?e:window.pageYOffset,s=null;n.addEventListener(t,"click",(e=>{if(e.target instanceof HTMLElement)try{let n=e.target.closest("a");if(!n)return;let{hash:r}=new URL(n.href),o=t.querySelector(r);o&&!i(o)&&(s=o)}catch{}}),!0),n.addEventListener(t,"touchstart",(e=>{if(e.target instanceof HTMLElement)if(i(e.target)){let t=e.target;for(;t.parentElement&&i(t.parentElement);)t=t.parentElement;n.style(t,"overscrollBehavior","contain")}else n.style(e.target,"touchAction","none")})),n.addEventListener(t,"touchmove",(e=>{if(e.target instanceof HTMLElement){if("INPUT"===e.target.tagName)return;if(i(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}}),{passive:!1}),n.add((()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;r!==t&&window.scrollTo(0,r),s&&s.isConnected&&(s.scrollIntoView({block:"nearest"}),s=null)}))}))}}:{},OE(),{before(e){let{doc:t,d:n}=e;n.style(t.documentElement,"overflow","hidden")}}];s.forEach((e=>{let{before:t}=e;return null==t?void 0:t(i)})),s.forEach((e=>{let{after:t}=e;return null==t?void 0:t(i)}))},SCROLL_ALLOW(e){let{d:t}=e;t.dispose()},TEARDOWN(e){let{doc:t}=e;this.delete(t)}});function FE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>[document.body];!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>({containers:[]}),r=lE(ME),i=t?r.get(t):void 0,s=!!i&&i.count>0;aI((()=>{if(t&&e)return ME.dispatch("PUSH",t,n),()=>ME.dispatch("POP",t,n)}),[e,t])}(uE(e,"scroll-lock"),t,(e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],n]}}))}ME.subscribe((()=>{let e=ME.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let e="hidden"===t.get(n.doc),r=0!==n.count;(r&&!e||!r&&e)&&ME.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),0===n.count&&ME.dispatch("TEARDOWN",n)}}));let UE=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function VE(e){var t,n;let r=null!=(t=e.innerText)?t:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return r;let s=!1;for(let a of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),s=!0;let o=s?null!=(n=i.innerText)?n:"":r;return UE.test(o)&&(o=o.replace(UE,"")),o}function jE(e){let n=(0,t.useRef)(""),r=(0,t.useRef)("");return cI((()=>{let t=e.current;if(!t)return"";let i=t.innerText;if(n.current===i)return r.current;let s=function(e){let t=e.getAttribute("aria-label");if("string"==typeof t)return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let e=n.split(" ").map((e=>{let t=document.getElementById(e);if(t){let e=t.getAttribute("aria-label");return"string"==typeof e?e.trim():VE(t).trim()}return null})).filter(Boolean);if(e.length>0)return e.join(", ")}return VE(e).trim()}(t).trim().toLowerCase();return n.current=i,r.current=s,s}))}function zE(e){return[e.screenX,e.screenY]}function BE(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}const qE=Math.min,HE=Math.max,KE=Math.round,WE=Math.floor,GE=e=>({x:e,y:e}),QE={left:"right",right:"left",bottom:"top",top:"bottom"},YE={start:"end",end:"start"};function JE(e,t,n){return HE(e,qE(t,n))}function $E(e,t){return"function"===typeof e?e(t):e}function XE(e){return e.split("-")[0]}function ZE(e){return e.split("-")[1]}function eS(e){return"x"===e?"y":"x"}function tS(e){return"y"===e?"height":"width"}function nS(e){return["top","bottom"].includes(XE(e))?"y":"x"}function rS(e){return eS(nS(e))}function iS(e){return e.replace(/start|end/g,(e=>YE[e]))}function sS(e){return e.replace(/left|right|bottom|top/g,(e=>QE[e]))}function oS(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function aS(e){return uS(e)?(e.nodeName||"").toLowerCase():"#document"}function lS(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function cS(e){var t;return null==(t=(uS(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function uS(e){return e instanceof Node||e instanceof lS(e).Node}function dS(e){return e instanceof Element||e instanceof lS(e).Element}function hS(e){return e instanceof HTMLElement||e instanceof lS(e).HTMLElement}function fS(e){return"undefined"!==typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof lS(e).ShadowRoot)}function pS(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=bS(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function mS(e){return["table","td","th"].includes(aS(e))}function gS(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(bI){return!1}}))}function vS(e){const t=yS(),n=dS(e)?bS(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function yS(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function wS(e){return["html","body","#document"].includes(aS(e))}function bS(e){return lS(e).getComputedStyle(e)}function _S(e){return dS(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function IS(e){if("html"===aS(e))return e;const t=e.assignedSlot||e.parentNode||fS(e)&&e.host||cS(e);return fS(t)?t.host:t}function ES(e){const t=IS(e);return wS(t)?e.ownerDocument?e.ownerDocument.body:e.body:hS(t)&&pS(t)?t:ES(t)}function SS(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=ES(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),o=lS(i);return s?t.concat(o,o.visualViewport||[],pS(i)?i:[],o.frameElement&&n?SS(o.frameElement):[]):t.concat(i,SS(i,[],n))}function xS(e,t,n){let{reference:r,floating:i}=e;const s=nS(t),o=rS(t),a=tS(o),l=XE(t),c="y"===s,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(ZE(t)){case"start":f[o]-=h*(n&&c?-1:1);break;case"end":f[o]+=h*(n&&c?-1:1)}return f}async function TS(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=$E(t,e),p=function(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}(f),m=a[h?"floating"===d?"reference":"floating":d],g=oS(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),w=await(null==s.isElement?void 0:s.isElement(y))&&await(null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},b=oS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-b.top+p.top)/w.y,bottom:(b.bottom-g.bottom+p.bottom)/w.y,left:(g.left-b.left+p.left)/w.x,right:(b.right-g.right+p.right)/w.x}}function kS(e){const t=bS(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=hS(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=KE(n)!==s||KE(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function CS(e){return dS(e)?e:e.contextElement}function NS(e){const t=CS(e);if(!hS(t))return GE(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=kS(t);let o=(s?KE(n.width):n.width)/r,a=(s?KE(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const AS=GE(0);function PS(e){const t=lS(e);return yS()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:AS}function RS(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=CS(e);let o=GE(1);t&&(r?dS(r)&&(o=NS(r)):o=NS(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==lS(e))&&t}(s,n,r)?PS(s):GE(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const e=lS(s),t=r&&dS(r)?lS(r):r;let n=e,i=n.frameElement;for(;i&&r&&t!==n;){const e=NS(i),t=i.getBoundingClientRect(),r=bS(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=o,n=lS(i),i=n.frameElement}}return oS({width:u,height:d,x:l,y:c})}function DS(e){return RS(cS(e)).left+_S(e).scrollLeft}function OS(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=lS(e),r=cS(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const e=yS();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=cS(e),n=_S(e),r=e.ownerDocument.body,i=HE(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=HE(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+DS(e);const a=-n.scrollTop;return"rtl"===bS(r).direction&&(o+=HE(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}(cS(e));else if(dS(t))r=function(e,t){const n=RS(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=hS(e)?NS(e):GE(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}(t,n);else{const n=PS(e);r={...t,x:t.x-n.x,y:t.y-n.y}}return oS(r)}function LS(e,t){const n=IS(e);return!(n===t||!dS(n)||wS(n))&&("fixed"===bS(n).position||LS(n,t))}function MS(e,t,n){const r=hS(t),i=cS(t),s="fixed"===n,o=RS(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=GE(0);if(r||!r&&!s)if(("body"!==aS(t)||pS(i))&&(a=_S(t)),r){const e=RS(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=DS(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function FS(e){return"static"===bS(e).position}function US(e,t){return hS(e)&&"fixed"!==bS(e).position?t?t(e):e.offsetParent:null}function VS(e,t){const n=lS(e);if(gS(e))return n;if(!hS(e)){let t=IS(e);for(;t&&!wS(t);){if(dS(t)&&!FS(t))return t;t=IS(t)}return n}let r=US(e,t);for(;r&&mS(r)&&FS(r);)r=US(r,t);return r&&wS(r)&&FS(r)&&!vS(r)?n:r||function(e){let t=IS(e);for(;hS(t)&&!wS(t);){if(vS(t))return t;if(gS(t))return null;t=IS(t)}return null}(e)||n}const jS={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s="fixed"===i,o=cS(r),a=!!t&&gS(t.floating);if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=GE(1);const u=GE(0),d=hS(r);if((d||!d&&!s)&&(("body"!==aS(r)||pS(o))&&(l=_S(r)),hS(r))){const e=RS(r);c=NS(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}},getDocumentElement:cS,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[..."clippingAncestors"===n?gS(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=SS(e,[],!1).filter((e=>dS(e)&&"body"!==aS(e))),i=null;const s="fixed"===bS(e).position;let o=s?IS(e):e;for(;dS(o)&&!wS(o);){const t=bS(o),n=vS(o);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||pS(o)&&!n&&LS(e,o))?r=r.filter((e=>e!==o)):i=t,o=IS(o)}return t.set(e,r),r}(t,this._c):[].concat(n),r],o=s[0],a=s.reduce(((e,n)=>{const r=OS(t,n,i);return e.top=HE(r.top,e.top),e.right=qE(r.right,e.right),e.bottom=qE(r.bottom,e.bottom),e.left=HE(r.left,e.left),e}),OS(t,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:VS,getElementRects:async function(e){const t=this.getOffsetParent||VS,n=this.getDimensions,r=await n(e.floating);return{reference:MS(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=kS(e);return{width:t,height:n}},getScale:NS,isElement:dS,isRTL:function(e){return"rtl"===bS(e).direction}};function zS(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=CS(e),u=i||s?[...c?SS(c):[],...SS(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)}));const d=c&&a?function(e,t){let n,r=null;const i=cS(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const{left:c,top:u,width:d,height:h}=e.getBoundingClientRect();if(a||t(),!d||!h)return;const f={rootMargin:-WE(u)+"px "+-WE(i.clientWidth-(c+d))+"px "+-WE(i.clientHeight-(u+h))+"px "+-WE(c)+"px",threshold:HE(0,qE(1,l))||1};let p=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!p)return o();t?o(!1,t):n=setTimeout((()=>{o(!1,1e-7)}),1e3)}p=!1}try{r=new IntersectionObserver(m,{...f,root:i.ownerDocument})}catch(bI){r=new IntersectionObserver(m,f)}r.observe(e)}(!0),s}(c,n):null;let h,f=-1,p=null;o&&(p=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame((()=>{var e;null==(e=p)||e.observe(t)}))),n()})),c&&!l&&p.observe(c),p.observe(t));let m=l?RS(e):null;return l&&function t(){const r=RS(e);!m||r.x===m.x&&r.y===m.y&&r.width===m.width&&r.height===m.height||n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(h)}}const BS=TS,qS=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,s=await(null==r.isRTL?void 0:r.isRTL(i.floating)),o=XE(n),a=ZE(n),l="y"===nS(n),c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=$E(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&"number"===typeof p&&(f="end"===a?-1*p:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}(t,e);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},HS=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=$E(e,t),c={x:n,y:r},u=await TS(t,l),d=nS(XE(i)),h=eS(d);let f=c[h],p=c[d];if(s){const e="y"===h?"bottom":"right";f=JE(f+u["y"===h?"top":"left"],f,f-u[e])}if(o){const e="y"===d?"bottom":"right";p=JE(p+u["y"===d?"top":"left"],p,p-u[e])}const m=a.fn({...t,[h]:f,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},KS=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=$E(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const v=XE(i),y=nS(a),w=XE(a)===a,b=await(null==l.isRTL?void 0:l.isRTL(c.floating)),_=h||(w||!m?[sS(a)]:function(e){const t=sS(e);return[iS(e),t,iS(t)]}(a)),I="none"!==p;!h&&I&&_.push(...function(e,t,n,r){const i=ZE(e);let s=function(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}(XE(e),"start"===n,r);return i&&(s=s.map((e=>e+"-"+i)),t&&(s=s.concat(s.map(iS)))),s}(a,m,p,b));const E=[a,..._],S=await TS(t,g),x=[];let T=(null==(r=s.flip)?void 0:r.overflows)||[];if(u&&x.push(S[v]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=ZE(e),i=rS(e),s=tS(i);let o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=sS(o)),[o,sS(o)]}(i,o,b);x.push(S[e[0]],S[e[1]])}if(T=[...T,{placement:i,overflows:x}],!x.every((e=>e<=0))){var k,C;const e=((null==(k=s.flip)?void 0:k.index)||0)+1,t=E[e];if(t)return{data:{index:e,overflows:T},reset:{placement:t}};let n=null==(C=T.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:C.placement;if(!n)switch(f){case"bestFit":{var N;const e=null==(N=T.filter((e=>{if(I){const t=nS(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:N[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},WS=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=$E(e,t),l=await TS(t,a),c=XE(n),u=ZE(n),d="y"===nS(n),{width:h,height:f}=r.floating;let p,m;"top"===c||"bottom"===c?(p=c,m=u===(await(null==i.isRTL?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,p="end"===u?"top":"bottom");const g=f-l.top-l.bottom,v=h-l.left-l.right,y=qE(f-l[p],g),w=qE(h-l[m],v),b=!t.middlewareData.shift;let _=y,I=w;if(d?I=u||b?qE(w,v):v:_=u||b?qE(y,g):g,b&&!u){const e=HE(l.left,0),t=HE(l.right,0),n=HE(l.top,0),r=HE(l.bottom,0);d?I=h-2*(0!==e||0!==t?e+t:HE(l.left,l.right)):_=f-2*(0!==n||0!==r?n+r:HE(l.top,l.bottom))}await o({...t,availableWidth:I,availableHeight:_});const E=await i.getDimensions(s.floating);return h!==E.width||f!==E.height?{reset:{rects:!0}}:{}}}},GS=(e,t,n)=>{const r=new Map,i={platform:jS,...n},s={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(null==o.isRTL?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=xS(c,r,l),h=r,f={},p=0;for(let m=0;m<a.length;m++){const{name:n,fn:s}=a[m],{x:g,y:v,data:y,reset:w}=await s({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=v?v:d,f={...f,[n]:{...f[n],...y}},w&&p<=50&&(p++,"object"===typeof w&&(w.placement&&(h=w.placement),w.rects&&(c=!0===w.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),({x:u,y:d}=xS(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}})(e,t,{...i,platform:s})};var QS="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function YS(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!YS(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!YS(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function JS(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $S(e,t){const n=JS(e);return Math.round(t*n)/n}function XS(e){const n=t.useRef(e);return QS((()=>{n.current=e})),n}const ZS=(e,t)=>({...qS(e),options:[e,t]}),ex=(e,t)=>({...HS(e),options:[e,t]}),tx=(e,t)=>({...KS(e),options:[e,t]}),nx=(e,t)=>({...WS(e),options:[e,t]});const rx={...r},ix=rx.useInsertionEffect||(e=>e());function sx(e){const n=t.useRef((()=>{0}));return ix((()=>{n.current=e})),t.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)}),[])}const ox="ArrowUp",ax="ArrowDown",lx="ArrowLeft",cx="ArrowRight";var ux="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;const dx=[lx,cx],hx=[ox,ax];let fx=!1,px=0;const mx=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+px++;const gx=rx.useId||function(){const[e,n]=t.useState((()=>fx?mx():void 0));return ux((()=>{null==e&&n(mx())}),[]),t.useEffect((()=>{fx=!0}),[]),e};function vx(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}const yx=t.createContext(null),wx=t.createContext(null),bx=()=>{var e;return(null==(e=t.useContext(yx))?void 0:e.id)||null},_x=()=>t.useContext(wx);function Ix(e){void 0===e&&(e={});const{nodeId:n}=e,r=function(e){const{open:n=!1,onOpenChange:r,elements:i}=e,s=gx(),o=t.useRef({}),[a]=t.useState((()=>vx())),l=null!=bx(),[c,u]=t.useState(i.reference),d=sx(((e,t,n)=>{o.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:n,nested:l}),null==r||r(e,t,n)})),h=t.useMemo((()=>({setPositionReference:u})),[]),f=t.useMemo((()=>({reference:c||i.reference||null,floating:i.floating||null,domReference:i.reference})),[c,i.reference,i.floating]);return t.useMemo((()=>({dataRef:o,open:n,onOpenChange:d,elements:f,events:a,floatingId:s,refs:h})),[n,d,f,a,s,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),i=e.rootContext||r,s=i.elements,[o,a]=t.useState(null),[l,c]=t.useState(null),u=(null==s?void 0:s.reference)||o,d=t.useRef(null),h=_x();ux((()=>{u&&(d.current=u)}),[u]);const f=function(e){void 0===e&&(e={});const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=t.useState({x:0,y:0,strategy:r,placement:n,middlewareData:{},isPositioned:!1}),[f,p]=t.useState(i);YS(f,i)||p(i);const[m,g]=t.useState(null),[v,y]=t.useState(null),w=t.useCallback((e=>{e!==E.current&&(E.current=e,g(e))}),[]),b=t.useCallback((e=>{e!==S.current&&(S.current=e,y(e))}),[]),_=o||m,I=a||v,E=t.useRef(null),S=t.useRef(null),x=t.useRef(d),T=null!=c,k=XS(c),C=XS(s),N=t.useCallback((()=>{if(!E.current||!S.current)return;const e={placement:n,strategy:r,middleware:f};C.current&&(e.platform=C.current),GS(E.current,S.current,e).then((e=>{const t={...e,isPositioned:!0};A.current&&!YS(x.current,t)&&(x.current=t,u_.flushSync((()=>{h(t)})))}))}),[f,n,r,C]);QS((()=>{!1===u&&x.current.isPositioned&&(x.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[u]);const A=t.useRef(!1);QS((()=>(A.current=!0,()=>{A.current=!1})),[]),QS((()=>{if(_&&(E.current=_),I&&(S.current=I),_&&I){if(k.current)return k.current(_,I,N);N()}}),[_,I,N,k,T]);const P=t.useMemo((()=>({reference:E,floating:S,setReference:w,setFloating:b})),[w,b]),R=t.useMemo((()=>({reference:_,floating:I})),[_,I]),D=t.useMemo((()=>{const e={position:r,left:0,top:0};if(!R.floating)return e;const t=$S(R.floating,d.x),n=$S(R.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+n+"px)",...JS(R.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}}),[r,l,R.floating,d.x,d.y]);return t.useMemo((()=>({...d,update:N,refs:P,elements:R,floatingStyles:D})),[d,N,P,R,D])}({...e,elements:{...s,...l&&{reference:l}}}),p=t.useCallback((e=>{const t=dS(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;c(t),f.refs.setReference(t)}),[f.refs]),m=t.useCallback((e=>{(dS(e)||null===e)&&(d.current=e,a(e)),(dS(f.refs.reference.current)||null===f.refs.reference.current||null!==e&&!dS(e))&&f.refs.setReference(e)}),[f.refs]),g=t.useMemo((()=>({...f.refs,setReference:m,setPositionReference:p,domReference:d})),[f.refs,m,p]),v=t.useMemo((()=>({...f.elements,domReference:u})),[f.elements,u]),y=t.useMemo((()=>({...f,...i,refs:g,elements:v,nodeId:n})),[f,g,v,n,i]);return ux((()=>{i.dataRef.current.floatingContext=y;const e=null==h?void 0:h.nodesRef.current.find((e=>e.id===n));e&&(e.context=y)})),t.useMemo((()=>({...f,context:y,refs:g,elements:v})),[f,g,v,y])}const Ex="active",Sx="selected";function xx(e,t,n){const r=new Map,i="item"===n;let s=e;if(i&&e){const{[Ex]:t,[Sx]:n,...r}=e;s=r}return{..."floating"===n&&{tabIndex:-1},...s,...t.map((t=>{const r=t?t[n]:null;return"function"===typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,s]=t;var o;i&&[Ex,Sx].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"===typeof s&&(null==(o=r.get(n))||o.push(s),e[n]=function(){for(var e,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return null==(e=r.get(n))?void 0:e.map((e=>e(...i))).find((e=>void 0!==e))})):e[n]=s)})),e):e),{})}}function Tx(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const kx=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:i,offset:s=0,index:o=0,minItemsVisible:a=4,referenceOverflowThreshold:l=0,scrollRef:c,...u}=$E(e,t),{rects:d,elements:{floating:h}}=t,f=n.current[o];if(!f)return{};const p={...t,...await ZS(-f.offsetTop-h.clientTop-d.reference.height/2-f.offsetHeight/2-s).fn(t)},m=(null==c?void 0:c.current)||h,g=await BS(Tx(p,m.scrollHeight),u),v=await BS(p,{...u,elementContext:"reference"}),y=Math.max(0,g.top),w=p.y+y,b=Math.max(0,m.scrollHeight-y-Math.max(0,g.bottom));return m.style.maxHeight=b+"px",m.scrollTop=y,i&&(m.offsetHeight<f.offsetHeight*Math.min(a,n.current.length-1)-1||v.top>=-l||v.bottom>=-l?u_.flushSync((()=>i(!0))):u_.flushSync((()=>i(!1)))),r&&(r.current=await BS(Tx({...p,y:w},m.offsetHeight),u)),{y:w}}});let Cx=(0,t.createContext)({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});Cx.displayName="FloatingContext";let Nx=(0,t.createContext)(null);Nx.displayName="PlacementContext";let Ax=4;function Px(e){let{children:n,enabled:r=!0}=e,[i,s]=(0,t.useState)(null),[o,a]=(0,t.useState)(0),l=(0,t.useRef)(null),[c,u]=(0,t.useState)(null);!function(e){aI((()=>{if(!e)return;let t=new MutationObserver((()=>{let t=window.getComputedStyle(e).maxHeight,n=parseFloat(t);if(isNaN(n))return;let r=parseInt(t);isNaN(r)||n!==r&&(e.style.maxHeight="".concat(Math.ceil(n),"px"))}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}}),[e])}(c);let d=r&&null!==i&&null!==c,{to:h="bottom",gap:f=0,offset:p=0,padding:m=0,inner:g}=function(e,t){var n,r,i;let s=Rx(null!=(n=null==e?void 0:e.gap)?n:"var(--anchor-gap, 0)",t),o=Rx(null!=(r=null==e?void 0:e.offset)?r:"var(--anchor-offset, 0)",t),a=Rx(null!=(i=null==e?void 0:e.padding)?i:"var(--anchor-padding, 0)",t);return{...e,gap:s,offset:o,padding:a}}(i,c),[v,y="center"]=h.split(" ");aI((()=>{d&&a(0)}),[d]);let{refs:w,floatingStyles:b,context:_}=Ix({open:d,placement:"selection"===v?"center"===y?"bottom":"bottom-".concat(y):"center"===y?"".concat(v):"".concat(v,"-").concat(y),strategy:"absolute",transform:!1,middleware:[ZS({mainAxis:"selection"===v?0:f,crossAxis:p}),ex({padding:m}),"selection"!==v&&tx({padding:m}),"selection"===v&&g?kx({...g,padding:m,overflowRef:l,offset:o,minItemsVisible:Ax,referenceOverflowThreshold:m,onFallbackChange(e){var t,n;if(!e)return;let r=_.elements.floating;if(!r)return;let i=parseFloat(getComputedStyle(r).scrollPaddingBottom)||0,s=Math.min(Ax,r.childElementCount),o=0,l=0;for(let a of null!=(n=null==(t=_.elements.floating)?void 0:t.childNodes)?n:[])if(a instanceof HTMLElement){let e=a.offsetTop,t=e+a.clientHeight+i,n=r.scrollTop,c=n+r.clientHeight;if(!(e>=n&&t<=c)){l=Math.max(0,Math.min(t,c)-Math.max(e,n)),o=a.clientHeight;break}s--}s>=1&&a((e=>{let t=o*s-l+i;return e>=t?e:t}))}}):null,nx({padding:m,apply(e){let{availableWidth:t,availableHeight:n,elements:r}=e;Object.assign(r.floating.style,{overflow:"auto",maxWidth:"".concat(t,"px"),maxHeight:"min(var(--anchor-max-height, 100vh), ".concat(n,"px)")})}})].filter(Boolean),whileElementsMounted:zS}),[I=v,E=y]=_.placement.split("-");"selection"===v&&(I="selection");let S=(0,t.useMemo)((()=>({anchor:[I,E].filter(Boolean).join(" ")})),[I,E]),x=function(e,n){const{open:r,elements:i}=e,{enabled:s=!0,overflowRef:o,scrollRef:a,onChange:l}=n,c=sx(l),u=t.useRef(!1),d=t.useRef(null),h=t.useRef(null);t.useEffect((()=>{if(!s)return;function e(e){if(e.ctrlKey||!t||null==o.current)return;const n=e.deltaY,r=o.current.top>=-.5,i=o.current.bottom>=-.5,s=t.scrollHeight-t.clientHeight,a=n<0?-1:1,l=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!r&&n>0||!i&&n<0?(e.preventDefault(),u_.flushSync((()=>{c((e=>e+Math[l](n,s*a)))}))):/firefox/i.test(BE())&&(t.scrollTop+=n))}const t=(null==a?void 0:a.current)||i.floating;return r&&t?(t.addEventListener("wheel",e),requestAnimationFrame((()=>{d.current=t.scrollTop,null!=o.current&&(h.current={...o.current})})),()=>{d.current=null,h.current=null,t.removeEventListener("wheel",e)}):void 0}),[s,r,i.floating,o,a,c]);const f=t.useMemo((()=>({onKeyDown(){u.current=!0},onWheel(){u.current=!1},onPointerMove(){u.current=!1},onScroll(){const e=(null==a?void 0:a.current)||i.floating;if(o.current&&e&&u.current){if(null!==d.current){const t=e.scrollTop-d.current;(o.current.bottom<-.5&&t<-1||o.current.top<-.5&&t>1)&&u_.flushSync((()=>c((e=>e+t))))}requestAnimationFrame((()=>{d.current=e.scrollTop}))}}})),[i.floating,c,o,a]);return t.useMemo((()=>s?{floating:f}:{}),[s,f])}(_,{overflowRef:l,onChange:a}),{getReferenceProps:T,getFloatingProps:k}=function(e){void 0===e&&(e=[]);const n=e.map((e=>null==e?void 0:e.reference)),r=e.map((e=>null==e?void 0:e.floating)),i=e.map((e=>null==e?void 0:e.item)),s=t.useCallback((t=>xx(t,e,"reference")),n),o=t.useCallback((t=>xx(t,e,"floating")),r),a=t.useCallback((t=>xx(t,e,"item")),i);return t.useMemo((()=>({getReferenceProps:s,getFloatingProps:o,getItemProps:a})),[s,o,a])}([x]),C=cI((e=>{u(e),w.setFloating(e)}));return t.createElement(Nx.Provider,{value:s},t.createElement(Cx.Provider,{value:{setFloating:C,setReference:w.setReference,styles:b,getReferenceProps:T,getFloatingProps:k,slot:S}},n))}function Rx(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=oI(),s=cI(((e,t)=>{if(null==e)return[r,null];if("number"==typeof e)return[e,null];if("string"==typeof e){if(!t)return[r,null];let n=Ox(e,t);return[n,r=>{let s=Dx(e);{let o=s.map((e=>window.getComputedStyle(t).getPropertyValue(e)));i.requestAnimationFrame((function a(){i.nextFrame(a);let l=!1;for(let[e,n]of s.entries()){let r=window.getComputedStyle(t).getPropertyValue(n);if(o[e]!==r){o[e]=r,l=!0;break}}if(!l)return;let c=Ox(e,t);n!==c&&(r(c),n=c)}))}return i.dispose}]}return[r,null]})),o=(0,t.useMemo)((()=>s(e,n)[0]),[e,n]),[a=o,l]=(0,t.useState)();return aI((()=>{let[t,r]=s(e,n);if(l(t),r)return r(l)}),[e,n]),a}function Dx(e){let t=/var\((.*)\)/.exec(e);if(t){let e=t[1].indexOf(",");if(-1===e)return[t[1]];let n=t[1].slice(0,e).trim(),r=t[1].slice(e+1).trim();return r?[n,...Dx(r)]:[n]}return[]}function Ox(e,t){let n=document.createElement("div");t.appendChild(n),n.style.setProperty("margin-top","0px","important"),n.style.setProperty("margin-top",e,"important");let r=parseFloat(window.getComputedStyle(n).marginTop)||0;return t.removeChild(n),r}var Lx=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Lx||{});function Mx(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),i=null!=r?r:-1;switch(e.focus){case 0:for(let e=0;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 1:-1===i&&(i=n.length);for(let e=i-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 2:for(let e=i+1;e<n.length;++e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 3:for(let e=n.length-1;e>=0;--e)if(!t.resolveDisabled(n[e],e,n))return e;return r;case 4:for(let r=0;r<n.length;++r)if(t.resolveId(n[r],r,n)===e.id)return r;return r;case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}let Fx=(0,t.createContext)(void 0);function Ux(){return(0,t.useContext)(Fx)}let Vx=(0,t.createContext)(null);function jx(){let e=(0,t.useContext)(Vx);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,jx),e}return e}Vx.displayName="DescriptionContext";let zx=VI((function(e,n){let r=(0,t.useId)(),i=Ux(),{id:s="headlessui-description-".concat(r),...o}=e,a=jx(),l=mI(n);aI((()=>a.register(s)),[s,a.register]);let c=i||!1,u=(0,t.useMemo)((()=>({...a.slot,disabled:c})),[a.slot,c]);return DI({ourProps:{ref:l,...a.props,id:s},theirProps:o,slot:u,defaultTag:"p",name:a.name||"Description"})})),Bx=(Object.assign(zx,{}),(0,t.createContext)(void 0));let qx=(0,t.createContext)(null);function Hx(){let e=(0,t.useContext)(qx);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Hx),e}return e}function Kx(){let{inherit:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=function(e){var n,r,i;let s=null!=(r=null==(n=(0,t.useContext)(qx))?void 0:n.value)?r:void 0;return(null!=(i=null==e?void 0:e.length)?i:0)>0?[s,...e].filter(Boolean).join(" "):s}(),[r,i]=(0,t.useState)([]),s=e?[n,...r].filter(Boolean):r;return[s.length>0?s.join(" "):void 0,(0,t.useMemo)((()=>function(e){let n=cI((e=>(i((t=>[...t,e])),()=>i((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),r=(0,t.useMemo)((()=>({register:n,slot:e.slot,name:e.name,props:e.props,value:e.value})),[n,e.slot,e.name,e.props,e.value]);return t.createElement(qx.Provider,{value:r},e.children)}),[i])]}qx.displayName="LabelContext";let Wx=VI((function(e,n){var r;let i=(0,t.useId)(),s=Hx(),o=(0,t.useContext)(Bx),a=Ux(),{id:l="headlessui-label-".concat(i),htmlFor:c=(null!=o?o:null==(r=s.props)?void 0:r.htmlFor),passive:u=!1,...d}=e,h=mI(n);aI((()=>s.register(l)),[l,s.register]);let f=cI((e=>{let t=e.currentTarget;if(t instanceof HTMLLabelElement&&e.preventDefault(),s.props&&"onClick"in s.props&&"function"==typeof s.props.onClick&&s.props.onClick(e),t instanceof HTMLLabelElement){let e=document.getElementById(t.htmlFor);if(e){let t=e.getAttribute("disabled");if("true"===t||""===t)return;let n=e.getAttribute("aria-disabled");if("true"===n||""===n)return;(e instanceof HTMLInputElement&&("radio"===e.type||"checkbox"===e.type)||"radio"===e.role||"checkbox"===e.role||"switch"===e.role)&&e.click(),e.focus({preventScroll:!0})}}})),p=a||!1,m=(0,t.useMemo)((()=>({...s.slot,disabled:p})),[s.slot,p]),g={ref:h,...s.props,id:l,htmlFor:c,onClick:f};return u&&("onClick"in g&&(delete g.htmlFor,delete g.onClick),"onClick"in d&&delete d.onClick),DI({ourProps:g,theirProps:d,slot:m,defaultTag:c?"label":"div",name:s.name||"Label"})}));Object.assign(Wx,{});function Gx(){let e=function(){let e="undefined"==typeof document;return(e=>e.useSyncExternalStore)(r)((()=>()=>{}),(()=>!1),(()=>!e))}(),[n,i]=t.useState(nI.isHandoffComplete);return n&&!1===nI.isHandoffComplete&&i(!1),t.useEffect((()=>{!0!==n&&i(!0)}),[n]),t.useEffect((()=>nI.handoff()),[]),!e&&n}let Qx=(0,t.createContext)(!1);function Yx(e){let n=(0,t.useContext)(Qx),r=(0,t.useContext)(Zx),i=DE(e),[s,o]=(0,t.useState)((()=>{var e;if(!n&&null!==r)return null!=(e=r.current)?e:null;if(nI.isServer)return null;let t=null==i?void 0:i.getElementById("headlessui-portal-root");if(t)return t;if(null===i)return null;let s=i.createElement("div");return s.setAttribute("id","headlessui-portal-root"),i.body.appendChild(s)}));return(0,t.useEffect)((()=>{null!==s&&(null!=i&&i.body.contains(s)||null==i||i.body.appendChild(s))}),[s,i]),(0,t.useEffect)((()=>{n||null!==r&&o(r.current)}),[r,o,n]),s}let Jx=t.Fragment,$x=VI((function(e,n){let r=e,i=(0,t.useRef)(null),s=mI(pI((e=>{i.current=e})),n),o=DE(i),a=Yx(i),[l]=(0,t.useState)((()=>{var e;return nI.isServer?null:null!=(e=null==o?void 0:o.createElement("div"))?e:null})),c=(0,t.useContext)(eT),u=Gx();return aI((()=>{!a||!l||a.contains(l)||(l.setAttribute("data-headlessui-portal",""),a.appendChild(l))}),[a,l]),aI((()=>{if(l&&c)return c.register(l)}),[c,l]),function(e){let n=cI(e),r=(0,t.useRef)(!1);(0,t.useEffect)((()=>(r.current=!1,()=>{r.current=!0,iI((()=>{r.current&&n()}))})),[n])}((()=>{var e;!a||!l||(l instanceof Node&&a.contains(l)&&a.removeChild(l),a.childNodes.length<=0&&(null==(e=a.parentElement)||e.removeChild(a)))})),u&&a&&l?(0,u_.createPortal)(DI({ourProps:{ref:s},theirProps:r,slot:{},defaultTag:Jx,name:"Portal"}),l):null}));let Xx=t.Fragment,Zx=(0,t.createContext)(null);let eT=(0,t.createContext)(null);let tT=VI((function(e,n){let r=mI(n),{enabled:i=!0,...s}=e;return i?t.createElement($x,{...s,ref:r}):DI({ourProps:{ref:r},theirProps:s,slot:{},defaultTag:Jx,name:"Portal"})})),nT=VI((function(e,n){let{target:r,...i}=e,s={ref:mI(n)};return t.createElement(Zx.Provider,{value:r},DI({ourProps:s,theirProps:i,defaultTag:Xx,name:"Popover.Group"}))})),rT=Object.assign(tT,{Group:nT});var iT=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(iT||{}),sT=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(sT||{}),oT=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(oT||{});function aT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e,n=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,r=TE(t(e.items.slice()),(e=>e.dataRef.current.domRef.current)),i=n?r.indexOf(n):null;return-1===i&&(i=null),{items:r,activeItemIndex:i}}let lT={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,__demoMode:!1,menuState:0},2:(e,t)=>{var n,r,i,s,o;if(1===e.menuState)return e;let a={...e,searchQuery:"",activationTrigger:null!=(n=t.trigger)?n:1,__demoMode:!1};if(t.focus===Lx.Nothing)return{...a,activeItemIndex:null};if(t.focus===Lx.Specific)return{...a,activeItemIndex:e.items.findIndex((e=>e.id===t.id))};if(t.focus===Lx.Previous){let n=e.activeItemIndex;if(null!==n){let s=e.items[n].dataRef.current.domRef,o=Mx(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==o){let t=e.items[o].dataRef.current.domRef;if((null==(r=s.current)?void 0:r.previousElementSibling)===t.current||null===(null==(i=t.current)?void 0:i.previousElementSibling))return{...a,activeItemIndex:o}}}}else if(t.focus===Lx.Next){let n=e.activeItemIndex;if(null!==n){let r=e.items[n].dataRef.current.domRef,i=Mx(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});if(null!==i){let t=e.items[i].dataRef.current.domRef;if((null==(s=r.current)?void 0:s.nextElementSibling)===t.current||null===(null==(o=t.current)?void 0:o.nextElementSibling))return{...a,activeItemIndex:i}}}}let l=aT(e),c=Mx(t,{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...a,...l,activeItemIndex:c}},3:(e,t)=>{let n=""!==e.searchQuery?0:1,r=e.searchQuery+t.value.toLowerCase(),i=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(r))&&!e.dataRef.current.disabled})),s=i?e.items.indexOf(i):-1;return-1===s||s===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let n=aT(e,(e=>[...e,{id:t.id,dataRef:t.dataRef}]));return{...e,...n}},6:(e,t)=>{let n=aT(e,(e=>{let n=e.findIndex((e=>e.id===t.id));return-1!==n&&e.splice(n,1),e}));return{...e,...n,activationTrigger:1}}},cT=(0,t.createContext)(null);function uT(e){let n=(0,t.useContext)(cT);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <Menu /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,uT),t}return n}function dT(e,t){return CI(t.type,lT,e,t)}cT.displayName="MenuContext";let hT=t.Fragment;let fT=PI.RenderStrategy|PI.Static;let pT=t.Fragment;let mT=VI((function(e,n){let{__demoMode:r=!1,...i}=e,s=(0,t.useReducer)(dT,{__demoMode:r,menuState:r?0:1,buttonRef:(0,t.createRef)(),itemsRef:(0,t.createRef)(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:o,itemsRef:a,buttonRef:l},c]=s,u=mI(n);RE(0===o,[l,a],((e,t)=>{var n;c({type:1}),IE(t,_E.Loose)||(e.preventDefault(),null==(n=l.current)||n.focus())}));let d=cI((()=>{c({type:1})})),h=(0,t.useMemo)((()=>({open:0===o,close:d})),[o,d]),f={ref:u};return t.createElement(Px,null,t.createElement(cT.Provider,{value:s},t.createElement(xI,{value:CI(o,{0:EI.Open,1:EI.Closed})},DI({ourProps:f,theirProps:i,slot:h,defaultTag:hT,name:"Menu"}))))})),gT=VI((function(e,n){var r;let i=(0,t.useId)(),{id:s="headlessui-menu-button-".concat(i),disabled:o=!1,autoFocus:a=!1,...l}=e,[c,u]=uT("Menu.Button"),d=(0,t.useContext)(Cx).getReferenceProps,h=mI(c.buttonRef,n,(0,t.useContext)(Cx).setReference),f=cI((e=>{switch(e.key){case qI.Space:case qI.Enter:case qI.ArrowDown:e.preventDefault(),e.stopPropagation(),(0,u_.flushSync)((()=>u({type:0}))),u({type:2,focus:Lx.First});break;case qI.ArrowUp:e.preventDefault(),e.stopPropagation(),(0,u_.flushSync)((()=>u({type:0}))),u({type:2,focus:Lx.Last})}})),p=cI((e=>{if(e.key===qI.Space)e.preventDefault()})),m=cI((e=>{var t;if(kI(e.currentTarget))return e.preventDefault();o||(0===c.menuState?((0,u_.flushSync)((()=>u({type:1}))),null==(t=c.buttonRef.current)||t.focus({preventScroll:!0})):(e.preventDefault(),u({type:0})))})),{isFocusVisible:g,focusProps:v}=G_({autoFocus:a}),{isHovered:y,hoverProps:w}=Z_({isDisabled:o}),{pressed:b,pressProps:_}=uI({disabled:o}),I=(0,t.useMemo)((()=>({open:0===c.menuState,active:b||0===c.menuState,disabled:o,hover:y,focus:g,autofocus:a})),[c,y,g,b,o,a]);return DI({ourProps:UI(d(),{ref:h,id:s,type:hI(e,c.buttonRef),"aria-haspopup":"menu","aria-controls":null==(r=c.itemsRef.current)?void 0:r.id,"aria-expanded":0===c.menuState,disabled:o||void 0,autoFocus:a,onKeyDown:f,onKeyUp:p,onClick:m},v,w,_),theirProps:l,slot:I,defaultTag:"button",name:"Menu.Button"})})),vT=VI((function(e,n){var r,i;let s=(0,t.useId)(),{id:o="headlessui-menu-items-".concat(s),anchor:a,portal:l=!1,modal:c=!0,transition:u=!1,...d}=e,h=function(e){return(0,t.useMemo)((()=>e?"string"==typeof e?{to:e}:e:null),[e])}(a),[f,p]=uT("Menu.Items"),[m,g]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===e&&(e=null),"string"==typeof e&&(e={to:e});let n=(0,t.useContext)(Nx),r=(0,t.useMemo)((()=>e),[JSON.stringify(e,"undefined"!=typeof HTMLElement?(e,t)=>t instanceof HTMLElement?t.outerHTML:t:void 0)]);aI((()=>{null==n||n(null!=r?r:null)}),[n,r]);let i=(0,t.useContext)(Cx);return(0,t.useMemo)((()=>[i.setFloating,e?i.styles:{}]),[i.setFloating,e,i.styles])}(h),v=function(){let{getFloatingProps:e,slot:n}=(0,t.useContext)(Cx);return(0,t.useCallback)((function(){return Object.assign({},e(...arguments),{"data-anchor":n.anchor})}),[e,n])}(),y=mI(f.itemsRef,n,h?m:null),w=DE(f.itemsRef);h&&(l=!0);let b=SI(),[_,I]=yI(u,f.itemsRef,null!==b?(b&EI.Open)===EI.Open:0===f.menuState);!function(e,n,r){let i=lI((e=>{let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&r()}));(0,t.useEffect)((()=>{if(!e)return;let t=null===n?null:n instanceof HTMLElement?n:n.current;if(!t)return;let r=sI();if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver((()=>i.current(t)));e.observe(t),r.add((()=>e.disconnect()))}if("undefined"!=typeof IntersectionObserver){let e=new IntersectionObserver((()=>i.current(t)));e.observe(t),r.add((()=>e.disconnect()))}return()=>r.dispose()}),[n,i,e])}(_,f.buttonRef,(()=>{p({type:1})})),FE(!f.__demoMode&&(c&&0===f.menuState),w),function(e){let{allowed:t,disallowed:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=uE(e,"inert-others");aI((()=>{var e,i;if(!r)return;let s=sI();for(let t of null!=(e=null==n?void 0:n())?e:[])t&&s.add(fE(t));let o=null!=(i=null==t?void 0:t())?i:[];for(let t of o){if(!t)continue;let e=rI(t);if(!e)continue;let n=t.parentElement;for(;n&&n!==e.body;){for(let e of n.children)o.some((t=>e.contains(t)))||s.add(fE(e));n=n.parentElement}}return s.dispose}),[r,t,n])}(!f.__demoMode&&(c&&0===f.menuState),{allowed:cI((()=>[f.buttonRef.current,f.itemsRef.current]))});let E=!function(e,n){let r=(0,t.useRef)({left:0,top:0});if(aI((()=>{let e=n.current;if(!e)return;let t=e.getBoundingClientRect();t&&(r.current=t)}),[e]),null==n.current||!e||n.current===document.activeElement)return!1;let i=n.current.getBoundingClientRect();return i.top!==r.current.top||i.left!==r.current.left}(0!==f.menuState,f.buttonRef)&&_;(0,t.useEffect)((()=>{let e=f.itemsRef.current;e&&0===f.menuState&&e!==(null==w?void 0:w.activeElement)&&e.focus({preventScroll:!0})}),[f.menuState,f.itemsRef,w,f.itemsRef.current]),function(e,n){let{container:r,accept:i,walk:s}=n,o=(0,t.useRef)(i),a=(0,t.useRef)(s);(0,t.useEffect)((()=>{o.current=i,a.current=s}),[i,s]),aI((()=>{if(!r||!e)return;let t=rI(r);if(!t)return;let n=o.current,i=a.current,s=Object.assign((e=>n(e)),{acceptNode:n}),l=t.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,s,!1);for(;l.nextNode();)i(l.currentNode)}),[r,e,o,a])}(0===f.menuState,{container:f.itemsRef.current,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let S=oI(),x=cI((e=>{var t,n,r;switch(S.dispose(),e.key){case qI.Space:if(""!==f.searchQuery)return e.preventDefault(),e.stopPropagation(),p({type:3,value:e.key});case qI.Enter:if(e.preventDefault(),e.stopPropagation(),p({type:1}),null!==f.activeItemIndex){let{dataRef:e}=f.items[f.activeItemIndex];null==(n=null==(t=e.current)?void 0:t.domRef.current)||n.click()}EE(f.buttonRef.current);break;case qI.ArrowDown:return e.preventDefault(),e.stopPropagation(),p({type:2,focus:Lx.Next});case qI.ArrowUp:return e.preventDefault(),e.stopPropagation(),p({type:2,focus:Lx.Previous});case qI.Home:case qI.PageUp:return e.preventDefault(),e.stopPropagation(),p({type:2,focus:Lx.First});case qI.End:case qI.PageDown:return e.preventDefault(),e.stopPropagation(),p({type:2,focus:Lx.Last});case qI.Escape:e.preventDefault(),e.stopPropagation(),(0,u_.flushSync)((()=>p({type:1}))),null==(r=f.buttonRef.current)||r.focus({preventScroll:!0});break;case qI.Tab:e.preventDefault(),e.stopPropagation(),(0,u_.flushSync)((()=>p({type:1}))),kE(f.buttonRef.current,e.shiftKey?vE.Previous:vE.Next);break;default:1===e.key.length&&(p({type:3,value:e.key}),S.setTimeout((()=>p({type:4})),350))}})),T=cI((e=>{if(e.key===qI.Space)e.preventDefault()})),k=(0,t.useMemo)((()=>({open:0===f.menuState})),[f.menuState]),C=UI(h?v():{},{"aria-activedescendant":null===f.activeItemIndex||null==(r=f.items[f.activeItemIndex])?void 0:r.id,"aria-labelledby":null==(i=f.buttonRef.current)?void 0:i.id,id:o,onKeyDown:x,onKeyUp:T,role:"menu",tabIndex:0===f.menuState?0:void 0,ref:y,style:{...d.style,...g,"--button-width":sE(f.buttonRef,!0).width},...vI(I)});return t.createElement(rT,{enabled:!!l&&(e.static||_)},DI({ourProps:C,theirProps:d,slot:k,defaultTag:"div",features:fT,visible:E,name:"Menu.Items"}))})),yT=VI((function(e,n){let r=(0,t.useId)(),{id:i="headlessui-menu-item-".concat(r),disabled:s=!1,...o}=e,[a,l]=uT("Menu.Item"),c=null!==a.activeItemIndex&&a.items[a.activeItemIndex].id===i,u=(0,t.useRef)(null),d=mI(n,u);aI((()=>{if(!a.__demoMode&&0===a.menuState&&c&&0!==a.activationTrigger)return sI().requestAnimationFrame((()=>{var e,t;null==(t=null==(e=u.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})}))}),[a.__demoMode,u,c,a.menuState,a.activationTrigger,a.activeItemIndex]);let h=jE(u),f=(0,t.useRef)({disabled:s,domRef:u,get textValue(){return h()}});aI((()=>{f.current.disabled=s}),[f,s]),aI((()=>(l({type:5,id:i,dataRef:f}),()=>l({type:6,id:i}))),[f,i]);let p=cI((()=>{l({type:1})})),m=cI((e=>{if(s)return e.preventDefault();l({type:1}),EE(a.buttonRef.current)})),g=cI((()=>{if(s)return l({type:2,focus:Lx.Nothing});l({type:2,focus:Lx.Specific,id:i})})),v=function(){let e=(0,t.useRef)([-1,-1]);return{wasMoved(t){let n=zE(t);return(e.current[0]!==n[0]||e.current[1]!==n[1])&&(e.current=n,!0)},update(t){e.current=zE(t)}}}(),y=cI((e=>{v.update(e),!s&&(c||l({type:2,focus:Lx.Specific,id:i,trigger:0}))})),w=cI((e=>{v.wasMoved(e)&&(s||c||l({type:2,focus:Lx.Specific,id:i,trigger:0}))})),b=cI((e=>{v.wasMoved(e)&&(s||c&&l({type:2,focus:Lx.Nothing}))})),[_,I]=Kx(),[E,S]=function(){let[e,n]=(0,t.useState)([]);return[e.length>0?e.join(" "):void 0,(0,t.useMemo)((()=>function(e){let r=cI((e=>(n((t=>[...t,e])),()=>n((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),i=(0,t.useMemo)((()=>({register:r,slot:e.slot,name:e.name,props:e.props,value:e.value})),[r,e.slot,e.name,e.props,e.value]);return t.createElement(Vx.Provider,{value:i},e.children)}),[n])]}(),x=(0,t.useMemo)((()=>({active:c,focus:c,disabled:s,close:p})),[c,s,p]);return t.createElement(I,null,t.createElement(S,null,DI({ourProps:{id:i,ref:d,role:"menuitem",tabIndex:!0===s?void 0:-1,"aria-disabled":!0===s||void 0,"aria-labelledby":_,"aria-describedby":E,disabled:void 0,onClick:m,onFocus:g,onPointerEnter:y,onMouseEnter:y,onPointerMove:w,onMouseMove:w,onPointerLeave:b,onMouseLeave:b},theirProps:o,slot:x,defaultTag:pT,name:"Menu.Item"})))})),wT=VI((function(e,n){let[r,i]=Kx();return t.createElement(i,null,DI({ourProps:{ref:n,"aria-labelledby":r,role:"group"},theirProps:e,slot:{},defaultTag:"div",name:"Menu.Section"}))})),bT=VI((function(e,n){let r=(0,t.useId)(),{id:i="headlessui-menu-heading-".concat(r),...s}=e,o=Hx();return aI((()=>o.register(i)),[i,o.register]),DI({ourProps:{id:i,ref:n,role:"presentation",...o.props},theirProps:s,slot:{},defaultTag:"header",name:"Menu.Heading"})})),_T=VI((function(e,t){return DI({ourProps:{ref:t,role:"separator"},theirProps:e,slot:{},defaultTag:"div",name:"Menu.Separator"})})),IT=Object.assign(mT,{Button:gT,Items:vT,Item:yT,Section:wT,Heading:bT,Separator:_T});function ET(e,n){let{title:r,titleId:i,...s}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":i},s),r?t.createElement("title",{id:i},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const ST=t.forwardRef(ET);function xT(e,n){let{title:r,titleId:i,...s}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":i},s),r?t.createElement("title",{id:i},r):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const TT=t.forwardRef(xT);function kT(){const e=Fw();return(0,Ow.jsxs)(iE,{as:"nav",className:"bg-gray-800 fixed top-0 left-0 right-0",children:[(0,Ow.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,Ow.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,Ow.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,Ow.jsxs)(nE,{className:"group relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[(0,Ow.jsx)("span",{className:"absolute -inset-0.5"}),(0,Ow.jsx)(ST,{"aria-hidden":"true",className:"block h-6 w-6 group-data-[open]:hidden"}),(0,Ow.jsx)(TT,{"aria-hidden":"true",className:"hidden h-6 w-6 group-data-[open]:block"})]})}),(0,Ow.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,Ow.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,Ow.jsx)("img",{alt:"\u0411\u043b\u043e\u0433 \u0441\u0438\u043d\u0435\u0440\u0433\u0438\u0438",src:"https://synergy.ru/assets/template/v5/new3/images/logo.svg",className:"h-8",style:{width:"32px",objectFit:"cover",objectPosition:"left"}})}),(0,Ow.jsx)("div",{className:"hidden sm:ml-6 sm:block",children:(0,Ow.jsxs)("div",{className:"flex space-x-4",children:[(0,Ow.jsx)(h_,{to:"/",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"rounded-md px-3 py-2 text-sm font-medium",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e?(0,Ow.jsxs)(Ow.Fragment,{children:[(0,Ow.jsx)(h_,{to:"/feed",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"rounded-md px-3 py-2 text-sm font-medium",children:"\u041b\u0435\u043d\u0442\u0430"}),(0,Ow.jsx)(h_,{to:"/subscriptions",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"rounded-md px-3 py-2 text-sm font-medium",children:"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0438"}),(0,Ow.jsx)(h_,{to:"/my-feed",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"rounded-md px-3 py-2 text-sm font-medium",children:"\u041c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b"}),(0,Ow.jsx)(h_,{to:"/posts/new",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"rounded-md px-3 py-2 text-sm font-medium",children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})]}):null]})})]}),(0,Ow.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:e?(0,Ow.jsxs)(IT,{as:"div",className:"relative ml-3",children:[(0,Ow.jsx)("div",{children:(0,Ow.jsx)(gT,{className:"text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium",children:e.displayName})}),(0,Ow.jsx)(vT,{transition:!0,className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 transition focus:outline-none data-[closed]:scale-95 data-[closed]:transform data-[closed]:opacity-0 data-[enter]:duration-100 data-[leave]:duration-75 data-[enter]:ease-out data-[leave]:ease-in",children:(0,Ow.jsx)(yT,{children:(0,Ow.jsx)("button",{className:"w-full text-left block px-4 py-2 text-sm text-gray-700 data-[focus]:bg-gray-100",onClick:Sw,children:"\u0412\u044b\u0445\u043e\u0434"})})})]}):(0,Ow.jsx)(h_,{to:"/login",activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"rounded-md px-3 py-2 text-sm font-medium",children:"\u0412\u0445\u043e\u0434/\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})}),(0,Ow.jsx)(rE,{className:"sm:hidden",children:(0,Ow.jsxs)("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[(0,Ow.jsx)(nE,{as:h_,to:"/",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"block rounded-md px-3 py-2 text-base font-medium",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e?(0,Ow.jsxs)(Ow.Fragment,{children:[(0,Ow.jsx)(nE,{as:h_,to:"/feed",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"block rounded-md px-3 py-2 text-base font-medium",children:"\u041b\u0435\u043d\u0442\u0430"}),(0,Ow.jsx)(nE,{as:h_,to:"/subscriptions",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"block rounded-md px-3 py-2 text-base font-medium",children:"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0438"}),(0,Ow.jsx)(nE,{as:h_,to:"/my-feed",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"block rounded-md px-3 py-2 text-base font-medium",children:"\u041c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b"}),(0,Ow.jsx)(nE,{as:h_,to:"/posts/new",activeOptions:{exact:!0},activeProps:{className:"bg-gray-900 text-white"},inactiveProps:{className:"text-gray-300 hover:bg-gray-700 hover:text-white"},className:"block rounded-md px-3 py-2 text-base font-medium",children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})]}):null]})})]})}const CT={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var NT,AT=new Uint8Array(16);function PT(){if(!NT&&!(NT="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return NT(AT)}for(var RT=[],DT=0;DT<256;++DT)RT.push((DT+256).toString(16).slice(1));function OT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(RT[e[t+0]]+RT[e[t+1]]+RT[e[t+2]]+RT[e[t+3]]+"-"+RT[e[t+4]]+RT[e[t+5]]+"-"+RT[e[t+6]]+RT[e[t+7]]+"-"+RT[e[t+8]]+RT[e[t+9]]+"-"+RT[e[t+10]]+RT[e[t+11]]+RT[e[t+12]]+RT[e[t+13]]+RT[e[t+14]]+RT[e[t+15]]).toLowerCase()}const LT=function(e,t,n){if(CT.randomUUID&&!t&&!e)return CT.randomUUID();var r=(e=e||{}).random||(e.rng||PT)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return OT(r)};var MT=n(139),FT=n.n(MT);function UT(e){var n,r,i;let{post:s}=e;const o=Fw(),a=Vb(),[l,c]=(0,t.useState)({title:"",url:"",text:"",isPublic:!0,createdAt:NaN,email:null!==(n=null===o||void 0===o?void 0:o.email)&&void 0!==n?n:"",tags:[],...s}),[u,d]=(0,t.useState)(null!==(r=null===(i=s.tags)||void 0===i?void 0:i.join(" "))&&void 0!==r?r:""),h=(e,t)=>c((n=>({...n,[e]:t}))),[f,p]=(0,t.useState)(!1);return(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8",children:(0,Ow.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),p(!0);const t=Array.from(new Set(u.split(" ").filter(Boolean)));return await kw({...l,tags:t,createdAt:isNaN(l.createdAt)?Date.now():l.createdAt}),await a({to:"/posts/".concat(l.id)}),!1},children:[(0,Ow.jsxs)("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:[(0,Ow.jsxs)("div",{className:"sm:col-span-4",children:[(0,Ow.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium leading-6 text-gray-900",children:["\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",(0,Ow.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ow.jsx)("div",{className:"mt-2",children:(0,Ow.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,Ow.jsx)("input",{id:"title",name:"title",type:"text",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u0442 (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)",className:FT()("pl-3 block flex-1 border-0 bg-transparent py-1.5 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",f?"cursor-not-allowed":""),disabled:f,value:l.title,onChange:e=>h("title",e.target.value)})})})]}),(0,Ow.jsxs)("div",{className:"sm:col-span-4",children:[(0,Ow.jsx)("label",{htmlFor:"picture",className:"block text-sm font-medium leading-6 text-gray-900",children:"URL \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"}),(0,Ow.jsx)("div",{className:"mt-2",children:(0,Ow.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,Ow.jsx)("input",{id:"picture",name:"picture",type:"text",placeholder:"https://tailwindui.com/img/og-default.png",className:FT()("pl-3 block flex-1 border-0 bg-transparent py-1.5 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",f?"cursor-not-allowed":""),disabled:f,value:l.url,onChange:e=>h("url",e.target.value)})})})]}),(0,Ow.jsxs)("div",{className:"col-span-full",children:[(0,Ow.jsxs)("label",{htmlFor:"text",className:"block text-sm font-medium leading-6 text-gray-900",children:["\u0422\u0435\u043a\u0441\u0442",(0,Ow.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ow.jsx)("div",{className:"mt-2",children:(0,Ow.jsx)("textarea",{id:"text",name:"text",rows:3,className:FT()("block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",f?"cursor-not-allowed":""),placeholder:"(\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)",disabled:f,value:l.text,onChange:e=>h("text",e.target.value)})})]}),(0,Ow.jsxs)("div",{className:"sm:col-span-4",children:[(0,Ow.jsx)("label",{htmlFor:"picture",className:"block text-sm font-medium leading-6 text-gray-900",children:"\u0422\u0435\u0433\u0438 (\u0447\u0435\u0440\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b)"}),(0,Ow.jsx)("div",{className:"mt-2",children:(0,Ow.jsx)("div",{className:"flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md",children:(0,Ow.jsx)("input",{id:"tags",name:"tags",type:"text",placeholder:"\u0442\u0435\u04331 \u0442\u0435\u04332",className:FT()("pl-3 block flex-1 border-0 bg-transparent py-1.5 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6",f?"cursor-not-allowed":""),disabled:f,value:u,onChange:e=>d(e.target.value)})})})]}),(0,Ow.jsx)("div",{className:"col-span-full",children:(0,Ow.jsxs)("div",{className:"mt-2 relative flex gap-x-3",children:[(0,Ow.jsx)("div",{className:"flex h-6 items-center",children:(0,Ow.jsx)("input",{id:"public",name:"public",type:"checkbox",className:FT()("h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",f?"cursor-not-allowed":""),disabled:f,checked:l.isPublic,onChange:e=>h("isPublic",e.target.checked)})}),(0,Ow.jsx)("div",{className:"text-sm leading-6",children:(0,Ow.jsx)("label",{htmlFor:"public",className:"font-medium text-gray-900",children:"\u041f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439?"})})]})})]}),(0,Ow.jsxs)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:[(0,Ow.jsx)("button",{type:"button",className:FT()("text-sm font-semibold leading-6 text-gray-900",f?"cursor-not-allowed":""),disabled:f,onClick:()=>window.history.go(-1),children:"\u041d\u0430\u0437\u0430\u0434"}),(0,Ow.jsx)("button",{type:"submit",disabled:!l.title||!l.text||f,className:FT()("rounded-md bg-indigo-500 leading-6 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 inline-flex items-center",l.title&&l.text&&!f?"":"cursor-not-allowed"),children:f?(0,Ow.jsxs)(Ow.Fragment,{children:[(0,Ow.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Ow.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ow.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f..."]}):"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})}const VT=(0,t.createContext)([]);function jT(e){let{children:n}=e;const r=Fw(),[i,s]=(0,t.useState)([]);return(0,t.useEffect)((()=>{var e;if(r)return((e,t)=>{const n=Pw.doc(e);return n.onSnapshot((e=>{var r;const i=e.data();i||n.set({},{merge:!0}),t(null!==(r=null===i||void 0===i?void 0:i.subscriptions)&&void 0!==r?r:[])}))})(null!==(e=r.email)&&void 0!==e?e:"",s)}),[r]),(0,Ow.jsx)(VT.Provider,{value:i,children:n})}function zT(){return(0,t.useContext)(VT)}function BT(e){var t;let{post:n}=e;const r=Fw(),i=zT(),s=Vb();return(0,Ow.jsxs)("div",{className:"grid gap-x-6 gap-y-4 rounded-3xl bg-gray-100 p-4",children:[n.url?(0,Ow.jsx)("img",{className:"rounded-2xl mb-3",src:n.url}):null,(0,Ow.jsx)("time",{title:new Date(n.createdAt).toLocaleString("ru-RU"),dateTime:new Date(n.createdAt).toLocaleDateString("ru-RU"),className:"block text-gray-500",children:new Date(n.createdAt).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})}),(0,Ow.jsxs)("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:[n.title,n.email===(null===r||void 0===r?void 0:r.email)?(0,Ow.jsxs)(Ow.Fragment,{children:[(0,Ow.jsx)(h_,{to:"/posts/".concat(n.id,"/edit"),children:(0,Ow.jsx)("p",{className:"inline font-normal text-gray-600 text-2xl",children:" (\u270e)"})}),(0,Ow.jsx)("span",{className:"inline font-normal text-red-500 text-2xl cursor-pointer",onClick:async e=>{e.stopPropagation(),e.preventDefault(),window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u043e\u0441\u0442?")&&(await Aw(n.id),"/"===window.location.pathname?window.location.reload():await s({to:"/"}))},children:" (\ud83d\uddd1)"})]}):null]}),n.isPublic?null:(0,Ow.jsx)("h2",{className:"text-sm tracking-tight text-gray-500 sm:text-sm",children:"(\u043f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0439 \u043f\u043e\u0441\u0442)"}),(0,Ow.jsx)("p",{className:"mt-2 text-lg leading-8 text-gray-600",children:n.text}),(null===(t=n.tags)||void 0===t?void 0:t.length)>0?(0,Ow.jsx)("div",{className:"flex flex-row flex-wrap gap-x-3 gap-y-3",children:n.tags.map((e=>(0,Ow.jsx)(h_,{to:"/tags/".concat(e),className:"rounded-2xl bg-gray-200 px-3 py-1 text-sm",id:e,children:e})))}):null,(0,Ow.jsxs)("p",{className:"mt-1 font-semibold text-gray-900",children:[n.email,null!==r&&void 0!==r&&r.email?n.email===r.email?(0,Ow.jsx)("span",{className:"inline font-normal text-gray-600 text-sm",children:" (\u0412\u044b)"}):i.includes(n.email)?(0,Ow.jsx)("span",{className:"inline font-normal text-gray-600 text-sm cursor-pointer",onClick:async e=>{var t;e.preventDefault(),e.stopPropagation(),await Dw(null!==(t=null===r||void 0===r?void 0:r.email)&&void 0!==t?t:"",n.email)},children:" [\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f]"}):(0,Ow.jsx)("span",{className:"inline font-normal text-gray-600 text-sm cursor-pointer",onClick:async e=>{var t;e.preventDefault(),e.stopPropagation(),await Rw(null!==(t=null===r||void 0===r?void 0:r.email)&&void 0!==t?t:"",n.email)},children:" [\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f]"}):null]})]})}function qT(e){let{comment:t}=e;return(0,Ow.jsxs)("div",{className:"grid gap-x-6 gap-y-4 rounded-3xl bg-gray-100 p-4",children:[(0,Ow.jsx)("time",{title:new Date(t.createdAt).toLocaleString("ru-RU"),dateTime:new Date(t.createdAt).toLocaleDateString("ru-RU"),className:"block text-gray-500",children:new Date(t.createdAt).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})}),(0,Ow.jsx)("p",{className:"mt-2 text-lg leading-8 text-gray-600",children:t.text}),(0,Ow.jsx)("p",{className:"mt-1 font-semibold text-gray-900",children:t.email})]})}function HT(e){let{id:n,email:r}=e;const[i,s]=(0,t.useState)(""),[o,a]=(0,t.useState)(!1);return(0,Ow.jsx)("div",{className:" rounded-3xl bg-gray-100 p-4",children:(0,Ow.jsxs)("form",{onSubmit:async e=>(e.preventDefault(),a(!0),await Nw(n,{text:i,createdAt:Date.now(),email:r}),a(!1),s(""),!1),children:[(0,Ow.jsx)("h3",{className:"text-lg font-bold tracking-tight text-gray-900 sm:text-lg",children:"\u041d\u043e\u0432\u044b\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439:"}),(0,Ow.jsx)("div",{className:"grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6",children:(0,Ow.jsx)("textarea",{id:"text",name:"text",rows:3,className:FT()("col-span-full block mt-2 w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",o?"cursor-not-allowed":""),placeholder:"(\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435)",disabled:o,value:i,onChange:e=>s(e.target.value)})}),(0,Ow.jsx)("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:(0,Ow.jsx)("button",{type:"submit",disabled:!i||o,className:FT()("rounded-md bg-indigo-500 leading-6 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500 inline-flex items-center",!i||o?"cursor-not-allowed":""),children:o?(0,Ow.jsxs)(Ow.Fragment,{children:[(0,Ow.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Ow.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Ow.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"\u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f..."]}):"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})})}const KT=Bb()({component:()=>(0,Ow.jsxs)("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[(0,Ow.jsx)(kT,{}),(0,Ow.jsx)(Rb,{})]})}),WT=zb({getParentRoute:()=>KT,path:"/",component:function(){const[e,n]=(0,t.useState)([]);return(0,t.useEffect)((()=>{(async()=>Tw.where("isPublic","==",!0).orderBy("createdAt","desc").get().then((e=>e.docs.map((e=>e.data())))))().then((e=>n(e)))}),[]),0===e.length?(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f..."}):(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 grid gap-y-8",children:e.map((e=>(0,Ow.jsx)(h_,{to:"/posts/".concat(e.id),children:(0,Ow.jsx)(BT,{post:e})},e.id)))})}}),GT=zb({getParentRoute:()=>KT,path:"/feed",component:function(){const[e,n]=(0,t.useState)(!0),r=zT(),[i,s]=(0,t.useState)([]);return(0,t.useEffect)((()=>{n(!0),0!==r.length?(async e=>Tw.where("email","in",e).where("isPublic","==",!0).orderBy("createdAt","desc").get().then((e=>e.docs.map((e=>e.data())))))(r).then((e=>{s(e),n(!1)})):n(!1)}),[r]),e?(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f..."}):0===r.length?(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u043e\u043a"}):0===i.length?(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0412\u044b \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u044b \u043d\u0430 \u0430\u0432\u0442\u043e\u0440\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430."}):(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 grid gap-y-8",children:i.map((e=>(0,Ow.jsx)(h_,{to:"/posts/".concat(e.id),children:(0,Ow.jsx)(BT,{post:e})},e.id)))})},beforeLoad:e=>{let{context:t}=e;if(!t.user)throw Ib({to:"/"})}}),QT=zb({getParentRoute:()=>KT,path:"/tags/$tag",component:function(){const{tag:e}=Ub({from:"/tags/$tag"}),[n,r]=(0,t.useState)(void 0);return(0,t.useEffect)((()=>{r(void 0),(async e=>Tw.where("isPublic","==",!0).where("tags","array-contains",e).orderBy("createdAt","desc").get().then((e=>e.docs.map((e=>e.data())))))(e).then((e=>r(e)))}),[e]),n?0===n.length?(0,Ow.jsxs)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:['\u041d\u0435\u0442 \u043f\u043e\u0441\u0442\u043e\u0432 \u0441 \u0442\u0435\u0433\u043e\u043c "',e,'"']}):(0,Ow.jsxs)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 grid gap-y-8",children:[(0,Ow.jsxs)("h2",{className:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl",children:['\u041f\u043e\u0441\u0442\u044b \u043f\u043e \u0442\u0435\u0433\u0443 "',e,'"']}),n.map((e=>(0,Ow.jsx)(h_,{to:"/posts/".concat(e.id),children:(0,Ow.jsx)(BT,{post:e})},e.id)))]}):(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f..."})}}),YT=zb({getParentRoute:()=>KT,path:"/subscriptions",component:function(){const e=zT(),t=Fw();return 0===e.length?(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u043e\u043a"}):(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 grid gap-y-8",children:e.map((e=>(0,Ow.jsx)("div",{className:"grid gap-x-6 gap-y-4 rounded-3xl bg-gray-100 p-4",children:(0,Ow.jsxs)("p",{className:"font-semibold text-gray-900",children:[e,(0,Ow.jsx)("span",{className:"inline font-normal text-gray-600 text-sm cursor-pointer",onClick:()=>{var n;return Dw(null!==(n=null===t||void 0===t?void 0:t.email)&&void 0!==n?n:"",e)},children:" [\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f]"})]})},e)))})},beforeLoad:e=>{let{context:t}=e;if(!t.user)throw Ib({to:"/"})}}),JT=zb({getParentRoute:()=>KT,path:"/my-feed",component:function(){const[e,n]=(0,t.useState)(!0),r=Fw(),[i,s]=(0,t.useState)([]);return(0,t.useEffect)((()=>{var e;(async e=>Tw.where("email","==",e).orderBy("createdAt","desc").get().then((e=>e.docs.map((e=>e.data())))))(null!==(e=null===r||void 0===r?void 0:r.email)&&void 0!==e?e:"").then((e=>{s(e),n(!1)}))}),[]),e?(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f..."}):0===i.length?(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0412\u044b \u043d\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430."}):(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 grid gap-y-8",children:i.map((e=>(0,Ow.jsx)(h_,{to:"/posts/".concat(e.id),children:(0,Ow.jsx)(BT,{post:e})},e.id)))})},beforeLoad:e=>{let{context:t}=e;if(!t.user)throw Ib({to:"/"})}}),$T=zb({getParentRoute:()=>KT,path:"/posts/$id/edit",component:function(){const{id:e}=Ub({from:"/posts/$id/edit"}),n=Vb(),r=Fw(),[i,s]=(0,t.useState)();return(0,t.useEffect)((()=>{(async()=>{if(!r)return void await n({to:"/"});s(void 0);const t=await Cw(e);(null===t||void 0===t?void 0:t.email)===r.email?s(t):await n({to:"/"})})()}),[n,r,e]),i?(0,Ow.jsx)(UT,{post:i}):(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f..."})},beforeLoad:e=>{let{context:t}=e;if(!t.user)throw Ib({to:"/"})}}),XT=zb({getParentRoute:()=>KT,path:"/posts/$id",component:function(){var e;const{id:n}=Ub({from:"/posts/$id"}),r=Fw(),[i,s]=(0,t.useState)(void 0),[o,a]=(0,t.useState)(void 0);return(0,t.useEffect)((()=>(s(void 0),a(void 0),Cw(n).then((e=>s(null!==e&&void 0!==e?e:null))),((e,t)=>Tw.doc(e).collection("comments").onSnapshot((e=>{t(e.docs.map((e=>e.data())))})))(n,a))),[n]),void 0===i?(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f..."}):null===i?(0,Ow.jsx)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 text-center",children:"\u041f\u043e\u0441\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"}):(0,Ow.jsxs)("div",{className:"mx-auto w-full max-w-screen-sm px-4 py-24 sm:px-6 sm:py-32 lg:px-8 grid gap-y-8",children:[(0,Ow.jsx)(BT,{post:i}),(0,Ow.jsxs)("div",{className:"flex flex-col mx-4 gap-y-4",children:[r?(0,Ow.jsx)(HT,{id:i.id,email:null!==(e=r.email)&&void 0!==e?e:""}):null,o?0===o.length?"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432 \u043d\u0435\u0442.":(0,Ow.jsxs)(Ow.Fragment,{children:["\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438:",o.map((e=>(0,Ow.jsx)(qT,{comment:e})))]}):"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u044e\u0442\u0441\u044f..."]})]})}}),ZT=zb({getParentRoute:()=>KT,path:"/login",component:function(){return(0,t.useEffect)((()=>{var e;e=".login-page",Ew.start(e,{signInOptions:[kt.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:()=>!1}})}),[]),(0,Ow.jsx)("div",{className:"login-page",style:{flex:1,display:"flex",alignItems:"center"}})},beforeLoad:e=>{let{context:t}=e;if(t.user)throw Ib({to:"/"})}}),ek=zb({getParentRoute:()=>KT,path:"/posts/new",component:function(){const e=(0,t.useRef)(LT());return(0,Ow.jsx)(UT,{post:{id:e.current}})},beforeLoad:e=>{let{context:t}=e;if(!t.user)throw Ib({to:"/"})}}),tk=KT.addChildren([WT,GT,QT,YT,JT,ek,$T,XT,ZT]),nk=new o_({routeTree:tk,context:{user:null}});function rk(){const e=Fw();return(0,t.useEffect)((()=>{nk.invalidate()}),[e]),(0,Ow.jsx)(Mb,{router:nk,context:{user:e}})}i.createRoot(document.getElementById("root")).render((0,Ow.jsx)(t.StrictMode,{children:(0,Ow.jsx)(Mw,{children:(0,Ow.jsx)(jT,{children:(0,Ow.jsx)(rk,{})})})}))})()})();
//# sourceMappingURL=main.55cc1296.js.map